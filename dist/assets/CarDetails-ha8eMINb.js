import{c as D,r as v,k as Lt,a3 as It,s as q,j as t,B as ie,J as V,a4 as lt,a5 as et,b as je,n as ke,E as At,a6 as Te,a1 as Pt,z as Tt,a2 as Ot,M as Dt}from"./index-B1v-fdDy.js";import{S as ae}from"./skeleton-B5zSXtNC.js";import{N as Oe}from"./Navigation-B7IoAuwX.js";import{H as Ft,B as zt,i as _t,u as Bt,s as Rt,C as Vt}from"./savedCarService-CH1V1nh4.js";import{V as qt}from"./VerificationRequiredDialog-BhXpjI7V.js";import{u as Ht}from"./useVerificationStatus-BsTQxagy.js";import{C as ut}from"./calendar-D-otnCnk.js";import{P as Kt,a as Ut,b as $t}from"./popover-4EB8yVS7.js";import{M as dt}from"./user-ClMVbWgE.js";import{C as ze,a as _e,b as Be,d as Re}from"./card-BByP0N-G.js";import{C as Gt}from"./car-ggFPcI9D.js";import{U as Qt}from"./users-BmNgVsFF.js";import{G as tt}from"./gauge-Bk1GUCbY.js";import{C as nt}from"./camera-BVx23dB2.js";import{S as Jt}from"./shield-BbSxX3Ts.js";import{K as Zt,C as Yt,a as Xt}from"./CarDescription-C30gcCJa.js";import{A as Wt}from"./arrow-left-C5bMyyle.js";import{A as en}from"./arrow-right-wlC4lylp.js";import{P as tn}from"./progress-BdAEPFoL.js";import{B as nn}from"./badge-CMWgFMV2.js";import{S as sn}from"./star-C2MEvl-w.js";import{f as rn}from"./format-BOBWS5Wu.js";import"./CustomMapbox-B-n_RDKf.js";import{d as on}from"./OnlineStatusToggle-jbesaRgw.js";import"./calendar-Blx7UGIQ.js";import"./addDays-Di48Ycau.js";import"./chevron-right-CgiltgM9.js";import"./scroll-area-DG1WSctR.js";import"./index-BdQq_4o_.js";import"./clock-CASyaKu3.js";import"./circle-alert-B4G_r9SV.js";import"./file-text-25BybcTk.js";import"./phone-C1RE3XPx.js";import"./circle-check-big-BC5npB6H.js";import"./ChatDrawer-CK7-6vcM.js";import"./avatar-BcfxHyyU.js";import"./textarea-iq9NORl0.js";import"./send-BDkAZ2Oi.js";import"./select-DXEtncUe.js";import"./check-BnE2eJB3.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const an=D("AirVent",[["path",{d:"M6 12H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"larmp2"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"M18.3 17.7a2.5 2.5 0 0 1-3.16 3.83 2.53 2.53 0 0 1-1.14-2V12",key:"1bo8pg"}],["path",{d:"M6.6 15.6A2 2 0 1 0 10 17v-5",key:"t9h90c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cn=D("Baby",[["path",{d:"M9 12h.01",key:"157uk2"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"5yv0yz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ln=D("Bluetooth",[["path",{d:"m7 7 10 10-5 5V2l5 5L7 17",key:"1q5490"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const un=D("CalendarCheck",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dn=D("Compass",[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fn=D("FolderTree",[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mn=D("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hn=D("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xn=D("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pn=D("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=D("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rt=D("Sofa",[["path",{d:"M20 9V6a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v3",key:"1dgpiv"}],["path",{d:"M2 16a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a2 2 0 0 0-4 0v1.5a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5V11a2 2 0 0 0-4 0z",key:"xacw8m"}],["path",{d:"M4 18v2",key:"jwo5n2"}],["path",{d:"M20 18v2",key:"1ar1qi"}],["path",{d:"M12 4v9",key:"oqhhn3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gn=D("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yn=D("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bn=D("Thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jn=D("Umbrella",[["path",{d:"M22 12a10.06 10.06 1 0 0-20 0Z",key:"1teyop"}],["path",{d:"M12 12v8a2 2 0 0 0 4 0",key:"ulpmoc"}],["path",{d:"M12 2v1",key:"11qlp1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nn=D("Webcam",[["circle",{cx:"12",cy:"10",r:"8",key:"1gshiw"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 22h10",key:"10w4w3"}],["path",{d:"M12 22v-4",key:"1utk9m"}]]),vn=({car:e})=>{const[n,i]=v.useState(!1),[r,o]=v.useState(!1),[s,a]=v.useState(!1),[u,l]=v.useState(!1),[c,y]=v.useState(!1),[f,x]=v.useState(!1),{isVerified:b,isLoading:d}=Ht(),h=Lt(),p=It();v.useEffect(()=>{(async()=>{var k;const{data:E}=await q.auth.getSession(),S=!!E.session;if(y(S),S&&((k=E.session)!=null&&k.user)){const C=E.session.user.id;x(C===e.owner_id)}})();const{data:{subscription:w}}=q.auth.onAuthStateChange((E,S)=>{const k=!!S;if(y(k),k&&S){const C=S.user.id;x(C===e.owner_id)}else x(!1)});return()=>w.unsubscribe()},[e.owner_id]),v.useEffect(()=>{(async()=>{if(c)try{const w=await _t(e.id);a(w)}catch(w){console.error("Failed to check if car is saved:",w)}})()},[e.id,c]);const m=()=>{if(!c){h("/login");return}if(f){V.error("You cannot book your own vehicle");return}if(!b&&!d){o(!0);return}i(!0)},g=async()=>{if(!c){h("/login");return}if(!u){l(!0);try{s?await Bt(e.id)&&(a(!1),V.success("Vehicle removed from saved list"),p.invalidateQueries({queryKey:["saved-cars-full"]}),p.invalidateQueries({queryKey:["saved-car-ids"]})):await Rt(e.id)&&(a(!0),V.success("Vehicle added to saved list"),p.invalidateQueries({queryKey:["saved-cars-full"]}),p.invalidateQueries({queryKey:["saved-car-ids"]}))}catch{V.error("An error occurred. Please try again.")}finally{l(!1)}}};return t.jsxs("div",{className:"sticky bottom-[72px] bg-background dark:bg-gray-800 p-4 rounded-t-lg border-t border-gray-200 dark:border-gray-700 shadow-lg",children:[f?t.jsxs("div",{className:"flex items-center justify-center p-2 bg-muted rounded-lg",children:[t.jsx(pn,{className:"h-5 w-5 mr-2 text-amber-500"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"You own this vehicle"})]}):t.jsxs("div",{className:"flex gap-2",children:[t.jsx(ie,{variant:"outline",className:"w-12 flex-shrink-0",onClick:g,disabled:u,children:t.jsx(Ft,{className:`${s?"fill-red-500 text-red-500":"text-gray-600 dark:text-gray-400"}`})}),t.jsxs(ie,{className:"flex-1 flex items-center justify-center gap-2",onClick:m,children:[t.jsx(ut,{className:"w-5 h-5"}),"Book Now"]})]}),t.jsx(zt,{car:e,isOpen:n,onClose:()=>i(!1)}),t.jsx(qt,{isOpen:r,onClose:()=>o(!1),action:"booking",carData:e})]})},kn=({brand:e,model:n,year:i,location:r,pricePerDay:o})=>{const{id:s}=lt(),[a,u]=v.useState(!1),[l,c]=v.useState(!0),[y,f]=v.useState(!1);v.useEffect(()=>{(async()=>{var d,h;try{c(!0);const{data:p}=await q.auth.getSession(),m=(h=(d=p==null?void 0:p.session)==null?void 0:d.user)==null?void 0:h.id;if(!m||!s){u(!1);return}const{data:g}=await q.from("cars").select("owner_id").eq("id",s).single();u((g==null?void 0:g.owner_id)===m)}catch(p){console.error("Error checking car ownership:",p),u(!1)}finally{c(!1)}})()},[s]);const x=async()=>{if(!s)return;const b=`${window.location.origin}/cars/${s}`;try{navigator.share?(await navigator.share({title:`${e} ${n} (${i})`,text:`Let's rent this ${e} ${n} on Mobi Rides`,url:b}),V.success("Shared successfully")):(await navigator.clipboard.writeText(b),f(!0),V.success("Link copied to clipboard"),setTimeout(()=>{f(!1)},2e3))}catch(d){console.error("Error sharing:",d),V.error("Failed to share. Please try again.")}};return t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700 p-4",children:t.jsxs("div",{className:"flex flex-col md:flex-row justify-between md:items-start",children:[t.jsxs("div",{children:[t.jsxs("h1",{className:"text-2xl md:text-3xl text-left text-gray-700 dark:text-white font-bold",children:[e," ",n]}),t.jsxs("div",{className:"flex items-center gap-1 mt-1 text-sm md:text-base text-muted-foreground dark:text-white",children:[t.jsx(un,{size:16,className:"h-4 w-4 mr-1 text-blue-500"}),t.jsx("span",{className:"text-sm md:text-base text-muted-foreground",children:i})]}),t.jsxs("div",{className:"flex items-center gap-1 mt-1 ",children:[t.jsx(dt,{size:16,className:"h-4 w-4 mr-1 text-red-500"}),t.jsx("span",{className:"text-sm md:text-base text-muted-foreground",children:r})]}),t.jsxs("div",{className:"mt-8 flex items-center gap-1",children:[t.jsxs("h2",{className:"font-bold text-lg md:text-xl  text-primary",children:["BWP ",o]}),t.jsx("p",{className:"text-xs md:text-sm text-muted-foreground dark:text-white",children:"/day"})]})]}),t.jsxs("div",{className:"flex gap-2 mt-4 md:mt-0",children:[a&&t.jsx(ie,{variant:"outline",size:"icon",className:"rounded-2xl md:size-auto md:px-4 md:py-2 md:flex md:items-center md:gap-2",asChild:!0,children:t.jsxs(et,{to:`/edit-car/${s}`,children:[t.jsx(yn,{className:"h-4 w-4 text-[#581CFA] dark:text-white"}),t.jsx("span",{className:"hidden md:inline-block",children:t.jsx("p",{className:"text-[#581CFA] dark:text-white text-xs md:text-sm lg:text-base font-semibold",children:"Edit Car"})})]})}),t.jsxs(Kt,{open:y,onOpenChange:f,children:[t.jsx(Ut,{asChild:!0,children:t.jsxs(ie,{variant:"outline",size:"icon",className:"rounded-2xl md:size-auto md:px-4 md:py-2 md:flex md:items-center md:gap-2",onClick:x,children:[t.jsx(xn,{className:"h-4 w-4 text-[#581CFA] dark:text-white"}),t.jsx("span",{className:"hidden md:inline-block",children:t.jsx("p",{className:"text-[#581CFA] dark:text-white text-xs md:text-sm lg:text-base font-semibold",children:"Share"})})]})}),t.jsx($t,{className:"w-auto p-2 text-sm",children:"Link copied!"})]}),t.jsx(ie,{variant:"outline",size:"icon",className:"rounded-2xl md:size-auto md:px-4 md:py-2 md:flex md:items-center md:gap-2",asChild:!0,children:t.jsxs(et,{to:"/bookings",children:[t.jsx(ut,{className:"h-4 w-4 text-[#581CFA] dark:text-white"}),t.jsx("span",{className:"hidden md:inline-block",children:t.jsx("p",{className:"text-[#581CFA] dark:text-white text-xs md:text-sm lg:text-base font-semibold",children:"Bookings"})})]})})]})]})})},wn=({transmission:e,fuel:n,seats:i,pricePerDay:r,features:o=[],variant:s="card"})=>{const a=u=>{switch(u){case"Air Conditioning":return t.jsx(an,{className:"h-4 w-4"});case"Bluetooth":return t.jsx(ln,{className:"h-4 w-4"});case"Cruise Control":return t.jsx(tt,{className:"h-4 w-4"});case"Navigation System":return t.jsx(dn,{className:"h-4 w-4"});case"Leather Seats":return t.jsx(rt,{className:"h-4 w-4"});case"Sunroof":return t.jsx(jn,{className:"h-4 w-4"});case"Backup Camera":return t.jsx(nt,{className:"h-4 w-4"});case"Parking Sensors":return t.jsx(Nn,{className:"h-4 w-4"});case"Keyless Entry":return t.jsx(Zt,{className:"h-4 w-4"});case"Push Start":return t.jsx(mn,{className:"h-4 w-4"});case"Heated Seats":return t.jsx(bn,{className:"h-4 w-4"});case"Premium Sound":return t.jsx(hn,{className:"h-4 w-4"});case"Third Row Seating":return t.jsx(rt,{className:"h-4 w-4"});case"Blind Spot Monitor":return t.jsx(Jt,{className:"h-4 w-4"});case"360 Degree Camera":return t.jsx(nt,{className:"h-4 w-4"});case"Apple CarPlay":return t.jsx(st,{className:"h-4 w-4"});case"Android Auto":return t.jsx(st,{className:"h-4 w-4"});case"Roof Rack":return t.jsx(fn,{className:"h-4 w-4"});case"Child Seat Anchor":return t.jsx(cn,{className:"h-4 w-4"});case"Autonomous Driving":return t.jsx(tt,{className:"h-4 w-4"});default:return t.jsx(gn,{className:"h-4 w-4"})}};return s==="grid"?t.jsxs("div",{className:"grid grid-cols-3 gap-2 text-sm text-gray-600",children:[t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(Gt,{className:"w-4 h-4"}),e]}),t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx("i",{className:"w-4 h-4",children:"⛽"}),n]}),t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx("i",{className:"w-4 h-4",children:"👥"}),i," Seats"]})]}):t.jsxs(ze,{className:"dark:bg-gray-800 dark:border-gray-700",children:[t.jsx(_e,{className:"pb-2",children:t.jsx(Be,{className:"text-base text-left text-muted-foreground dark:text-white font-medium",children:"Car Specifications"})}),t.jsxs(Re,{children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm mb-6",children:[t.jsxs("div",{className:"p-4 bg-muted rounded-lg text-left w-full",children:[t.jsx(Vt,{className:"w-4 h-4 text-primary dark:text-primary-foreground"}),t.jsx("p",{className:"text-base md:text-xl text-left text-gray-700 dark:text-white font-medium mt-4",children:e}),t.jsx("p",{className:"text-xs md:text-sm text-muted-foreground",children:"Car Fuel"})]}),t.jsxs("div",{className:"p-4 bg-muted rounded-lg text-left",children:[t.jsx(Qt,{className:"w-4 h-4 text-primary dark:text-primary-foreground"}),t.jsx("p",{className:"text-base md:text-xl text-left text-gray-700 dark:text-white font-medium mt-4",children:i}),t.jsx("p",{className:"text-xs md:text-sm text-muted-foreground",children:"Passenger Seats"})]})]}),o&&o.length>0&&t.jsxs(t.Fragment,{children:[t.jsx("h3",{className:"mb-3 text-base text-left text-muted-foreground dark:text-white font-medium",children:"Car Features"}),t.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-2",children:o.map(u=>t.jsxs("div",{className:"flex items-center space-x-2 p-2 rounded-md border bg-muted/30",children:[t.jsx("span",{className:"text-primary",children:a(u)}),t.jsx("span",{className:"text-xs md:text-sm text-muted-foreground",children:u})]},u))})]})]})]})},Sn=({pricePerDay:e,transmission:n,seats:i,features:r=[]})=>t.jsx(wn,{transmission:n,fuel:"Petrol",seats:i,pricePerDay:e,features:r,variant:"card"});function Cn(e){return Object.prototype.toString.call(e)==="[object Object]"}function ot(e){return Cn(e)||Array.isArray(e)}function Mn(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function Ve(e,n){const i=Object.keys(e),r=Object.keys(n);if(i.length!==r.length)return!1;const o=JSON.stringify(Object.keys(e.breakpoints||{})),s=JSON.stringify(Object.keys(n.breakpoints||{}));return o!==s?!1:i.every(a=>{const u=e[a],l=n[a];return typeof u=="function"?`${u}`==`${l}`:!ot(u)||!ot(l)?u===l:Ve(u,l)})}function at(e){return e.concat().sort((n,i)=>n.name>i.name?1:-1).map(n=>n.options)}function En(e,n){if(e.length!==n.length)return!1;const i=at(e),r=at(n);return i.every((o,s)=>{const a=r[s];return Ve(o,a)})}function qe(e){return typeof e=="number"}function De(e){return typeof e=="string"}function Se(e){return typeof e=="boolean"}function it(e){return Object.prototype.toString.call(e)==="[object Object]"}function P(e){return Math.abs(e)}function He(e){return Math.sign(e)}function pe(e,n){return P(e-n)}function Ln(e,n){if(e===0||n===0||P(e)<=P(n))return 0;const i=pe(P(e),P(n));return P(i/e)}function ge(e){return ye(e).map(Number)}function H(e){return e[Ne(e)]}function Ne(e){return Math.max(0,e.length-1)}function Ke(e,n){return n===Ne(e)}function ct(e,n=0){return Array.from(Array(e),(i,r)=>n+r)}function ye(e){return Object.keys(e)}function ft(e,n){return[e,n].reduce((i,r)=>(ye(r).forEach(o=>{const s=i[o],a=r[o],u=it(s)&&it(a);i[o]=u?ft(s,a):a}),i),{})}function Fe(e,n){return typeof n.MouseEvent<"u"&&e instanceof n.MouseEvent}function In(e,n){const i={start:r,center:o,end:s};function r(){return 0}function o(l){return s(l)/2}function s(l){return n-l}function a(l,c){return De(e)?i[e](l):e(n,l,c)}return{measure:a}}function be(){let e=[];function n(o,s,a,u={passive:!0}){let l;if("addEventListener"in o)o.addEventListener(s,a,u),l=()=>o.removeEventListener(s,a,u);else{const c=o;c.addListener(a),l=()=>c.removeListener(a)}return e.push(l),r}function i(){e=e.filter(o=>o())}const r={add:n,clear:i};return r}function An(e,n,i,r){const o=be(),s=1e3/60;let a=null,u=0,l=0;function c(){o.add(e,"visibilitychange",()=>{e.hidden&&d()})}function y(){b(),o.clear()}function f(p){if(!l)return;a||(a=p);const m=p-a;for(a=p,u+=m;u>=s;)i(s),u-=s;const g=u/s;r(g),l&&n.requestAnimationFrame(f)}function x(){l||(l=n.requestAnimationFrame(f))}function b(){n.cancelAnimationFrame(l),a=null,u=0,l=0}function d(){a=null,u=0}return{init:c,destroy:y,start:x,stop:b,update:()=>i(s),render:r}}function Pn(e,n){const i=n==="rtl",r=e==="y",o=r?"y":"x",s=r?"x":"y",a=!r&&i?-1:1,u=y(),l=f();function c(d){const{height:h,width:p}=d;return r?h:p}function y(){return r?"top":i?"right":"left"}function f(){return r?"bottom":i?"left":"right"}function x(d){return d*a}return{scroll:o,cross:s,startEdge:u,endEdge:l,measureSize:c,direction:x}}function ce(e=0,n=0){const i=P(e-n);function r(c){return c<e}function o(c){return c>n}function s(c){return r(c)||o(c)}function a(c){return s(c)?r(c)?e:n:c}function u(c){return i?c-i*Math.ceil((c-n)/i):c}return{length:i,max:n,min:e,constrain:a,reachedAny:s,reachedMax:o,reachedMin:r,removeOffset:u}}function mt(e,n,i){const{constrain:r}=ce(0,e),o=e+1;let s=a(n);function a(x){return i?P((o+x)%o):r(x)}function u(){return s}function l(x){return s=a(x),f}function c(x){return y().set(u()+x)}function y(){return mt(e,u(),i)}const f={get:u,set:l,add:c,clone:y};return f}function Tn(e,n,i,r,o,s,a,u,l,c,y,f,x,b,d,h,p,m,g){const{cross:j,direction:w}=e,E=["INPUT","SELECT","TEXTAREA"],S={passive:!1},k=be(),C=be(),M=ce(50,225).constrain(b.measure(20)),T={mouse:300,touch:400},L={mouse:500,touch:600},_=d?43:25;let K=!1,U=0,$=0,re=!1,ee=!1,J=!1,Z=!1;function de(N){if(!g)return;function I(z){(Se(g)||g(N,z))&&me(z)}const O=n;k.add(O,"dragstart",z=>z.preventDefault(),S).add(O,"touchmove",()=>{},S).add(O,"touchend",()=>{}).add(O,"touchstart",I).add(O,"mousedown",I).add(O,"touchcancel",F).add(O,"contextmenu",F).add(O,"click",X,!0)}function G(){k.clear(),C.clear()}function le(){const N=Z?i:n;C.add(N,"touchmove",B,S).add(N,"touchend",F).add(N,"mousemove",B,S).add(N,"mouseup",F)}function ue(N){const I=N.nodeName||"";return E.includes(I)}function Y(){return(d?L:T)[Z?"mouse":"touch"]}function fe(N,I){const O=f.add(He(N)*-1),z=y.byDistance(N,!d).distance;return d||P(N)<M?z:p&&I?z*.5:y.byIndex(O.get(),0).distance}function me(N){const I=Fe(N,r);Z=I,J=d&&I&&!N.buttons&&K,K=pe(o.get(),a.get())>=2,!(I&&N.button!==0)&&(ue(N.target)||(re=!0,s.pointerDown(N),c.useFriction(0).useDuration(0),o.set(a),le(),U=s.readPoint(N),$=s.readPoint(N,j),x.emit("pointerDown")))}function B(N){if(!Fe(N,r)&&N.touches.length>=2)return F(N);const O=s.readPoint(N),z=s.readPoint(N,j),Q=pe(O,U),W=pe(z,$);if(!ee&&!Z&&(!N.cancelable||(ee=Q>W,!ee)))return F(N);const te=s.pointerMove(N);Q>h&&(J=!0),c.useFriction(.3).useDuration(.75),u.start(),o.add(w(te)),N.preventDefault()}function F(N){const O=y.byDistance(0,!1).index!==f.get(),z=s.pointerUp(N)*Y(),Q=fe(w(z),O),W=Ln(z,Q),te=_-10*W,ne=m+W/50;ee=!1,re=!1,C.clear(),c.useDuration(te).useFriction(ne),l.distance(Q,!d),Z=!1,x.emit("pointerUp")}function X(N){J&&(N.stopPropagation(),N.preventDefault(),J=!1)}function R(){return re}return{init:de,destroy:G,pointerDown:R}}function On(e,n){let r,o;function s(f){return f.timeStamp}function a(f,x){const d=`client${(x||e.scroll)==="x"?"X":"Y"}`;return(Fe(f,n)?f:f.touches[0])[d]}function u(f){return r=f,o=f,a(f)}function l(f){const x=a(f)-a(o),b=s(f)-s(r)>170;return o=f,b&&(r=f),x}function c(f){if(!r||!o)return 0;const x=a(o)-a(r),b=s(f)-s(r),d=s(f)-s(o)>170,h=x/b;return b&&!d&&P(h)>.1?h:0}return{pointerDown:u,pointerMove:l,pointerUp:c,readPoint:a}}function Dn(){function e(i){const{offsetTop:r,offsetLeft:o,offsetWidth:s,offsetHeight:a}=i;return{top:r,right:o+s,bottom:r+a,left:o,width:s,height:a}}return{measure:e}}function Fn(e){function n(r){return e*(r/100)}return{measure:n}}function zn(e,n,i,r,o,s,a){const u=[e].concat(r);let l,c,y=[],f=!1;function x(p){return o.measureSize(a.measure(p))}function b(p){if(!s)return;c=x(e),y=r.map(x);function m(g){for(const j of g){if(f)return;const w=j.target===e,E=r.indexOf(j.target),S=w?c:y[E],k=x(w?e:r[E]);if(P(k-S)>=.5){p.reInit(),n.emit("resize");break}}}l=new ResizeObserver(g=>{(Se(s)||s(p,g))&&m(g)}),i.requestAnimationFrame(()=>{u.forEach(g=>l.observe(g))})}function d(){f=!0,l&&l.disconnect()}return{init:b,destroy:d}}function _n(e,n,i,r,o,s){let a=0,u=0,l=o,c=s,y=e.get(),f=0;function x(S){const k=S/1e3,C=l*k,M=r.get()-e.get(),T=!l;let L=0;return T?(a=0,i.set(r),e.set(r),L=M):(i.set(e),a+=M/C,a*=c,y+=a,e.add(a*k),L=y-f),u=He(L),f=y,E}function b(){const S=r.get()-n.get();return P(S)<.001}function d(){return l}function h(){return u}function p(){return a}function m(){return j(o)}function g(){return w(s)}function j(S){return l=S,E}function w(S){return c=S,E}const E={direction:h,duration:d,velocity:p,seek:x,settled:b,useBaseFriction:g,useBaseDuration:m,useFriction:w,useDuration:j};return E}function Bn(e,n,i,r,o){const s=o.measure(10),a=o.measure(50),u=ce(.1,.99);let l=!1;function c(){return!(l||!e.reachedAny(i.get())||!e.reachedAny(n.get()))}function y(b){if(!c())return;const d=e.reachedMin(n.get())?"min":"max",h=P(e[d]-n.get()),p=i.get()-n.get(),m=u.constrain(h/a);i.subtract(p*m),!b&&P(p)<s&&(i.set(e.constrain(i.get())),r.useDuration(25).useBaseFriction())}function f(b){l=!b}return{shouldConstrain:c,constrain:y,toggleActive:f}}function Rn(e,n,i,r,o){const s=ce(-n+e,0),a=f(),u=y(),l=x();function c(d,h){return pe(d,h)<1}function y(){const d=a[0],h=H(a),p=a.lastIndexOf(d),m=a.indexOf(h)+1;return ce(p,m)}function f(){return i.map((d,h)=>{const{min:p,max:m}=s,g=s.constrain(d),j=!h,w=Ke(i,h);return j?m:w||c(p,g)?p:c(m,g)?m:g}).map(d=>parseFloat(d.toFixed(3)))}function x(){if(n<=e+o)return[s.max];if(r==="keepSnaps")return a;const{min:d,max:h}=u;return a.slice(d,h)}return{snapsContained:l,scrollContainLimit:u}}function Vn(e,n,i){const r=n[0],o=i?r-e:H(n);return{limit:ce(o,r)}}function qn(e,n,i,r){const s=n.min+.1,a=n.max+.1,{reachedMin:u,reachedMax:l}=ce(s,a);function c(x){return x===1?l(i.get()):x===-1?u(i.get()):!1}function y(x){if(!c(x))return;const b=e*(x*-1);r.forEach(d=>d.add(b))}return{loop:y}}function Hn(e){const{max:n,length:i}=e;function r(s){const a=s-n;return i?a/-i:0}return{get:r}}function Kn(e,n,i,r,o){const{startEdge:s,endEdge:a}=e,{groupSlides:u}=o,l=f().map(n.measure),c=x(),y=b();function f(){return u(r).map(h=>H(h)[a]-h[0][s]).map(P)}function x(){return r.map(h=>i[s]-h[s]).map(h=>-P(h))}function b(){return u(c).map(h=>h[0]).map((h,p)=>h+l[p])}return{snaps:c,snapsAligned:y}}function Un(e,n,i,r,o,s){const{groupSlides:a}=o,{min:u,max:l}=r,c=y();function y(){const x=a(s),b=!e||n==="keepSnaps";return i.length===1?[s]:b?x:x.slice(u,l).map((d,h,p)=>{const m=!h,g=Ke(p,h);if(m){const j=H(p[0])+1;return ct(j)}if(g){const j=Ne(s)-H(p)[0]+1;return ct(j,H(p)[0])}return d})}return{slideRegistry:c}}function $n(e,n,i,r,o){const{reachedAny:s,removeOffset:a,constrain:u}=r;function l(d){return d.concat().sort((h,p)=>P(h)-P(p))[0]}function c(d){const h=e?a(d):u(d),p=n.map((g,j)=>({diff:y(g-h,0),index:j})).sort((g,j)=>P(g.diff)-P(j.diff)),{index:m}=p[0];return{index:m,distance:h}}function y(d,h){const p=[d,d+i,d-i];if(!e)return d;if(!h)return l(p);const m=p.filter(g=>He(g)===h);return m.length?l(m):H(p)-i}function f(d,h){const p=n[d]-o.get(),m=y(p,h);return{index:d,distance:m}}function x(d,h){const p=o.get()+d,{index:m,distance:g}=c(p),j=!e&&s(p);if(!h||j)return{index:m,distance:d};const w=n[m]-g,E=d+y(w,0);return{index:m,distance:E}}return{byDistance:x,byIndex:f,shortcut:y}}function Gn(e,n,i,r,o,s,a){function u(f){const x=f.distance,b=f.index!==n.get();s.add(x),x&&(r.duration()?e.start():(e.update(),e.render(1),e.update())),b&&(i.set(n.get()),n.set(f.index),a.emit("select"))}function l(f,x){const b=o.byDistance(f,x);u(b)}function c(f,x){const b=n.clone().set(f),d=o.byIndex(b.get(),x);u(d)}return{distance:l,index:c}}function Qn(e,n,i,r,o,s,a,u){const l={passive:!0,capture:!0};let c=0;function y(b){if(!u)return;function d(h){if(new Date().getTime()-c>10)return;a.emit("slideFocusStart"),e.scrollLeft=0;const g=i.findIndex(j=>j.includes(h));qe(g)&&(o.useDuration(0),r.index(g,0),a.emit("slideFocus"))}s.add(document,"keydown",f,!1),n.forEach((h,p)=>{s.add(h,"focus",m=>{(Se(u)||u(b,m))&&d(p)},l)})}function f(b){b.code==="Tab"&&(c=new Date().getTime())}return{init:y}}function xe(e){let n=e;function i(){return n}function r(l){n=a(l)}function o(l){n+=a(l)}function s(l){n-=a(l)}function a(l){return qe(l)?l:l.get()}return{get:i,set:r,add:o,subtract:s}}function ht(e,n){const i=e.scroll==="x"?s:a,r=n.style;let o=!1;function s(f){return`translate3d(${f}px,0px,0px)`}function a(f){return`translate3d(0px,${f}px,0px)`}function u(f){o||(r.transform=i(e.direction(f)))}function l(f){o=!f}function c(){o||(r.transform="",n.getAttribute("style")||n.removeAttribute("style"))}return{clear:c,to:u,toggleActive:l}}function Jn(e,n,i,r,o,s,a,u,l){const y=ge(o),f=ge(o).reverse(),x=m().concat(g());function b(k,C){return k.reduce((M,T)=>M-o[T],C)}function d(k,C){return k.reduce((M,T)=>b(M,C)>0?M.concat([T]):M,[])}function h(k){return s.map((C,M)=>({start:C-r[M]+.5+k,end:C+n-.5+k}))}function p(k,C,M){const T=h(C);return k.map(L=>{const _=M?0:-i,K=M?i:0,U=M?"end":"start",$=T[L][U];return{index:L,loopPoint:$,slideLocation:xe(-1),translate:ht(e,l[L]),target:()=>u.get()>$?_:K}})}function m(){const k=a[0],C=d(f,k);return p(C,i,!1)}function g(){const k=n-a[0]-1,C=d(y,k);return p(C,-i,!0)}function j(){return x.every(({index:k})=>{const C=y.filter(M=>M!==k);return b(C,n)<=.1})}function w(){x.forEach(k=>{const{target:C,translate:M,slideLocation:T}=k,L=C();L!==T.get()&&(M.to(L),T.set(L))})}function E(){x.forEach(k=>k.translate.clear())}return{canLoop:j,clear:E,loop:w,loopPoints:x}}function Zn(e,n,i){let r,o=!1;function s(l){if(!i)return;function c(y){for(const f of y)if(f.type==="childList"){l.reInit(),n.emit("slidesChanged");break}}r=new MutationObserver(y=>{o||(Se(i)||i(l,y))&&c(y)}),r.observe(e,{childList:!0})}function a(){r&&r.disconnect(),o=!0}return{init:s,destroy:a}}function Yn(e,n,i,r){const o={};let s=null,a=null,u,l=!1;function c(){u=new IntersectionObserver(d=>{l||(d.forEach(h=>{const p=n.indexOf(h.target);o[p]=h}),s=null,a=null,i.emit("slidesInView"))},{root:e.parentElement,threshold:r}),n.forEach(d=>u.observe(d))}function y(){u&&u.disconnect(),l=!0}function f(d){return ye(o).reduce((h,p)=>{const m=parseInt(p),{isIntersecting:g}=o[m];return(d&&g||!d&&!g)&&h.push(m),h},[])}function x(d=!0){if(d&&s)return s;if(!d&&a)return a;const h=f(d);return d&&(s=h),d||(a=h),h}return{init:c,destroy:y,get:x}}function Xn(e,n,i,r,o,s){const{measureSize:a,startEdge:u,endEdge:l}=e,c=i[0]&&o,y=d(),f=h(),x=i.map(a),b=p();function d(){if(!c)return 0;const g=i[0];return P(n[u]-g[u])}function h(){if(!c)return 0;const g=s.getComputedStyle(H(r));return parseFloat(g.getPropertyValue(`margin-${l}`))}function p(){return i.map((g,j,w)=>{const E=!j,S=Ke(w,j);return E?x[j]+y:S?x[j]+f:w[j+1][u]-g[u]}).map(P)}return{slideSizes:x,slideSizesWithGaps:b,startGap:y,endGap:f}}function Wn(e,n,i,r,o,s,a,u,l){const{startEdge:c,endEdge:y,direction:f}=e,x=qe(i);function b(m,g){return ge(m).filter(j=>j%g===0).map(j=>m.slice(j,j+g))}function d(m){return m.length?ge(m).reduce((g,j,w)=>{const E=H(g)||0,S=E===0,k=j===Ne(m),C=o[c]-s[E][c],M=o[c]-s[j][y],T=!r&&S?f(a):0,L=!r&&k?f(u):0,_=P(M-L-(C+T));return w&&_>n+l&&g.push(j),k&&g.push(m.length),g},[]).map((g,j,w)=>{const E=Math.max(w[j-1]||0);return m.slice(E,g)}):[]}function h(m){return x?b(m,i):d(m)}return{groupSlides:h}}function es(e,n,i,r,o,s,a){const{align:u,axis:l,direction:c,startIndex:y,loop:f,duration:x,dragFree:b,dragThreshold:d,inViewThreshold:h,slidesToScroll:p,skipSnaps:m,containScroll:g,watchResize:j,watchSlides:w,watchDrag:E,watchFocus:S}=s,k=2,C=Dn(),M=C.measure(n),T=i.map(C.measure),L=Pn(l,c),_=L.measureSize(M),K=Fn(_),U=In(u,_),$=!f&&!!g,re=f||!!g,{slideSizes:ee,slideSizesWithGaps:J,startGap:Z,endGap:de}=Xn(L,M,T,i,re,o),G=Wn(L,_,p,f,M,T,Z,de,k),{snaps:le,snapsAligned:ue}=Kn(L,U,M,T,G),Y=-H(le)+H(J),{snapsContained:fe,scrollContainLimit:me}=Rn(_,Y,ue,g,k),B=$?fe:ue,{limit:F}=Vn(Y,B,f),X=mt(Ne(B),y,f),R=X.clone(),A=ge(i),N=({dragHandler:se,scrollBody:Ie,scrollBounds:Ae,options:{loop:ve}},Pe)=>{ve||Ae.constrain(se.pointerDown()),Ie.seek(Pe)},I=({scrollBody:se,translate:Ie,location:Ae,offsetLocation:ve,scrollLooper:Pe,slideLooper:kt,dragHandler:wt,animation:St,eventHandler:Je,scrollBounds:Ct,options:{loop:Ze}},Ye)=>{const Xe=se.settled(),Mt=!Ct.shouldConstrain(),We=Ze?Xe:Xe&&Mt;We&&!wt.pointerDown()&&(St.stop(),Je.emit("settle")),We||Je.emit("scroll");const Et=Ae.get()*Ye+te.get()*(1-Ye);ve.set(Et),Ze&&(Pe.loop(se.direction()),kt.loop()),Ie.to(ve.get())},O=An(r,o,se=>N(Le,se),se=>I(Le,se)),z=.68,Q=B[X.get()],W=xe(Q),te=xe(Q),ne=xe(Q),oe=xe(Q),he=_n(W,ne,te,oe,x,z),Me=$n(f,B,Y,F,oe),Ee=Gn(O,X,R,he,Me,oe,a),$e=Hn(F),Ge=be(),Nt=Yn(n,i,a,h),{slideRegistry:Qe}=Un($,g,B,me,G,A),vt=Qn(e,i,Qe,Ee,he,Ge,a,S),Le={ownerDocument:r,ownerWindow:o,eventHandler:a,containerRect:M,slideRects:T,animation:O,axis:L,dragHandler:Tn(L,e,r,o,oe,On(L,o),W,O,Ee,he,Me,X,a,K,b,d,m,z,E),eventStore:Ge,percentOfView:K,index:X,indexPrevious:R,limit:F,location:W,offsetLocation:ne,previousLocation:te,options:s,resizeHandler:zn(n,a,o,i,L,j,C),scrollBody:he,scrollBounds:Bn(F,ne,oe,he,K),scrollLooper:qn(Y,F,ne,[W,ne,te,oe]),scrollProgress:$e,scrollSnapList:B.map($e.get),scrollSnaps:B,scrollTarget:Me,scrollTo:Ee,slideLooper:Jn(L,_,Y,ee,J,le,B,ne,i),slideFocus:vt,slidesHandler:Zn(n,a,w),slidesInView:Nt,slideIndexes:A,slideRegistry:Qe,slidesToScroll:G,target:oe,translate:ht(L,n)};return Le}function ts(){let e={},n;function i(c){n=c}function r(c){return e[c]||[]}function o(c){return r(c).forEach(y=>y(n,c)),l}function s(c,y){return e[c]=r(c).concat([y]),l}function a(c,y){return e[c]=r(c).filter(f=>f!==y),l}function u(){e={}}const l={init:i,emit:o,off:a,on:s,clear:u};return l}const ns={align:"center",axis:"x",container:null,slides:null,containScroll:"trimSnaps",direction:"ltr",slidesToScroll:1,inViewThreshold:0,breakpoints:{},dragFree:!1,dragThreshold:10,loop:!1,skipSnaps:!1,duration:25,startIndex:0,active:!0,watchDrag:!0,watchResize:!0,watchSlides:!0,watchFocus:!0};function ss(e){function n(s,a){return ft(s,a||{})}function i(s){const a=s.breakpoints||{},u=ye(a).filter(l=>e.matchMedia(l).matches).map(l=>a[l]).reduce((l,c)=>n(l,c),{});return n(s,u)}function r(s){return s.map(a=>ye(a.breakpoints||{})).reduce((a,u)=>a.concat(u),[]).map(e.matchMedia)}return{mergeOptions:n,optionsAtMedia:i,optionsMediaQueries:r}}function rs(e){let n=[];function i(s,a){return n=a.filter(({options:u})=>e.optionsAtMedia(u).active!==!1),n.forEach(u=>u.init(s,e)),a.reduce((u,l)=>Object.assign(u,{[l.name]:l}),{})}function r(){n=n.filter(s=>s.destroy())}return{init:i,destroy:r}}function we(e,n,i){const r=e.ownerDocument,o=r.defaultView,s=ss(o),a=rs(s),u=be(),l=ts(),{mergeOptions:c,optionsAtMedia:y,optionsMediaQueries:f}=s,{on:x,off:b,emit:d}=l,h=L;let p=!1,m,g=c(ns,we.globalOptions),j=c(g),w=[],E,S,k;function C(){const{container:A,slides:N}=j;S=(De(A)?e.querySelector(A):A)||e.children[0];const O=De(N)?S.querySelectorAll(N):N;k=[].slice.call(O||S.children)}function M(A){const N=es(e,S,k,r,o,A,l);if(A.loop&&!N.slideLooper.canLoop()){const I=Object.assign({},A,{loop:!1});return M(I)}return N}function T(A,N){p||(g=c(g,A),j=y(g),w=N||w,C(),m=M(j),f([g,...w.map(({options:I})=>I)]).forEach(I=>u.add(I,"change",L)),j.active&&(m.translate.to(m.location.get()),m.animation.init(),m.slidesInView.init(),m.slideFocus.init(R),m.eventHandler.init(R),m.resizeHandler.init(R),m.slidesHandler.init(R),m.options.loop&&m.slideLooper.loop(),S.offsetParent&&k.length&&m.dragHandler.init(R),E=a.init(R,w)))}function L(A,N){const I=G();_(),T(c({startIndex:I},A),N),l.emit("reInit")}function _(){m.dragHandler.destroy(),m.eventStore.clear(),m.translate.clear(),m.slideLooper.clear(),m.resizeHandler.destroy(),m.slidesHandler.destroy(),m.slidesInView.destroy(),m.animation.destroy(),a.destroy(),u.clear()}function K(){p||(p=!0,u.clear(),_(),l.emit("destroy"),l.clear())}function U(A,N,I){!j.active||p||(m.scrollBody.useBaseFriction().useDuration(N===!0?0:j.duration),m.scrollTo.index(A,I||0))}function $(A){const N=m.index.add(1).get();U(N,A,-1)}function re(A){const N=m.index.add(-1).get();U(N,A,1)}function ee(){return m.index.add(1).get()!==G()}function J(){return m.index.add(-1).get()!==G()}function Z(){return m.scrollSnapList}function de(){return m.scrollProgress.get(m.location.get())}function G(){return m.index.get()}function le(){return m.indexPrevious.get()}function ue(){return m.slidesInView.get()}function Y(){return m.slidesInView.get(!1)}function fe(){return E}function me(){return m}function B(){return e}function F(){return S}function X(){return k}const R={canScrollNext:ee,canScrollPrev:J,containerNode:F,internalEngine:me,destroy:K,off:b,on:x,emit:d,plugins:fe,previousScrollSnap:le,reInit:h,rootNode:B,scrollNext:$,scrollPrev:re,scrollProgress:de,scrollSnapList:Z,scrollTo:U,selectedScrollSnap:G,slideNodes:X,slidesInView:ue,slidesNotInView:Y};return T(n,i),setTimeout(()=>l.emit("init"),0),R}we.globalOptions=void 0;function Ue(e={},n=[]){const i=v.useRef(e),r=v.useRef(n),[o,s]=v.useState(),[a,u]=v.useState(),l=v.useCallback(()=>{o&&o.reInit(i.current,r.current)},[o]);return v.useEffect(()=>{Ve(i.current,e)||(i.current=e,l())},[e,l]),v.useEffect(()=>{En(r.current,n)||(r.current=n,l())},[n,l]),v.useEffect(()=>{if(Mn()&&a){we.globalOptions=Ue.globalOptions;const c=we(a,i.current,r.current);return s(c),()=>c.destroy()}else s(void 0)},[a,s]),[u,o]}Ue.globalOptions=void 0;const xt=v.createContext(null);function Ce(){const e=v.useContext(xt);if(!e)throw new Error("useCarousel must be used within a <Carousel />");return e}const pt=v.forwardRef(({orientation:e="horizontal",opts:n,setApi:i,plugins:r,className:o,children:s,...a},u)=>{const[l,c]=Ue({...n,axis:e==="horizontal"?"x":"y"},r),[y,f]=v.useState(!1),[x,b]=v.useState(!1),d=v.useCallback(g=>{g&&(f(g.canScrollPrev()),b(g.canScrollNext()))},[]),h=v.useCallback(()=>{c==null||c.scrollPrev()},[c]),p=v.useCallback(()=>{c==null||c.scrollNext()},[c]),m=v.useCallback(g=>{g.key==="ArrowLeft"?(g.preventDefault(),h()):g.key==="ArrowRight"&&(g.preventDefault(),p())},[h,p]);return v.useEffect(()=>{!c||!i||i(c)},[c,i]),v.useEffect(()=>{if(c)return d(c),c.on("reInit",d),c.on("select",d),()=>{c==null||c.off("select",d)}},[c,d]),t.jsx(xt.Provider,{value:{carouselRef:l,api:c,opts:n,orientation:e||((n==null?void 0:n.axis)==="y"?"vertical":"horizontal"),scrollPrev:h,scrollNext:p,canScrollPrev:y,canScrollNext:x},children:t.jsx("div",{ref:u,onKeyDownCapture:m,className:je("relative",o),role:"region","aria-roledescription":"carousel",...a,children:s})})});pt.displayName="Carousel";const gt=v.forwardRef(({className:e,...n},i)=>{const{carouselRef:r,orientation:o}=Ce();return t.jsx("div",{ref:r,className:"overflow-hidden",children:t.jsx("div",{ref:i,className:je("flex",o==="horizontal"?"-ml-4":"-mt-4 flex-col",e),...n})})});gt.displayName="CarouselContent";const yt=v.forwardRef(({className:e,...n},i)=>{const{orientation:r}=Ce();return t.jsx("div",{ref:i,role:"group","aria-roledescription":"slide",className:je("min-w-0 shrink-0 grow-0 basis-full",r==="horizontal"?"pl-4":"pt-4",e),...n})});yt.displayName="CarouselItem";const bt=v.forwardRef(({className:e,variant:n="outline",size:i="icon",...r},o)=>{const{orientation:s,scrollPrev:a,canScrollPrev:u}=Ce();return t.jsxs(ie,{ref:o,variant:n,size:i,className:je("absolute  h-8 w-8 rounded-full",s==="horizontal"?"-left-12 top-1/2 -translate-y-1/2":"-top-12 left-1/2 -translate-x-1/2 rotate-90",e),disabled:!u,onClick:a,...r,children:[t.jsx(Wt,{className:"h-4 w-4"}),t.jsx("span",{className:"sr-only",children:"Previous slide"})]})});bt.displayName="CarouselPrevious";const jt=v.forwardRef(({className:e,variant:n="outline",size:i="icon",...r},o)=>{const{orientation:s,scrollNext:a,canScrollNext:u}=Ce();return t.jsxs(ie,{ref:o,variant:n,size:i,className:je("absolute h-8 w-8 rounded-full",s==="horizontal"?"-right-12 top-1/2 -translate-y-1/2":"-bottom-12 left-1/2 -translate-x-1/2 rotate-90",e),disabled:!u,onClick:a,...r,children:[t.jsx(en,{className:"h-4 w-4"}),t.jsx("span",{className:"sr-only",children:"Next slide"})]})});jt.displayName="CarouselNext";const os=({carId:e,mainImageUrl:n})=>{const{data:i,isLoading:r}=ke({queryKey:["car-images",e],queryFn:async()=>{console.log("Fetching images for car:",e);const{data:o,error:s}=await q.from("car_images").select("*").eq("car_id",e);if(s)throw console.error("Error fetching car images:",s),s;const a=n?[{id:"main",image_url:n},...o||[]]:o||[];return console.log("Retrieved images:",a),a}});return r?t.jsx(ae,{className:"w-full h-64 rounded-lg"}):i!=null&&i.length?t.jsxs(pt,{className:"w-full",children:[t.jsx(gt,{children:i.map(o=>t.jsx(yt,{children:t.jsx("img",{src:o.image_url,alt:"Car",className:"w-full h-64 object-cover rounded-lg"})},o.id))}),t.jsx(bt,{className:"left-2"}),t.jsx(jt,{className:"right-2"})]}):t.jsx("div",{className:"w-full h-64 bg-muted rounded-lg flex items-center justify-center",children:t.jsx("p",{className:"text-muted-foreground",children:"No images available"})})},as=({car:e})=>{v.useState(!1),v.useState(0),v.useState(""),At();const{data:n,isLoading:i}=ke({queryKey:["car-reviews",e.id],queryFn:async()=>{console.log("Fetching reviews for car:",e.id);const{data:o,error:s}=await q.from("reviews").select(`
          *,
          reviewer:profiles!reviewer_id (
            full_name,
            avatar_url
          )
        `).eq("car_id",e.id).eq("review_type","car").eq("status","published").order("created_at",{ascending:!1});if(s)throw console.error("Error fetching reviews:",s),s;return console.log("Retrieved reviews:",o),o}}),{data:r}=ke({queryKey:["categoryRatings",e.id],queryFn:async()=>{const{data:o,error:s}=await q.rpc("calculate_category_ratings",{car_uuid:e.id});if(s)throw s;return o}});return t.jsxs(ze,{className:"dark:bg-gray-800 dark:border-gray-700",children:[t.jsx(_e,{className:"pb-2",children:t.jsxs(Be,{className:"text-lg flex items-center justify-between dark:text-white",children:[t.jsx("div",{className:"flex items-center gap-2",children:t.jsx("span",{className:"text-base text-left text-muted-foreground dark:text-white font-medium",children:"Reviews"})}),t.jsxs("span",{className:"text-sm font-normal text-muted-foreground",children:[(n==null?void 0:n.length)||0," ",(n==null?void 0:n.length)===1?"review":"reviews"]})]})}),t.jsxs(Re,{children:[r&&Object.keys(r).length>1&&t.jsxs("div",{className:"mb-6 p-4 bg-muted/50 rounded-lg",children:[t.jsx("h4",{className:"font-medium mb-3",children:"Rating Breakdown"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:Object.entries(r).filter(([o])=>o!=="overall").map(([o,s])=>t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm capitalize",children:o.replace("_"," ")}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(tn,{value:s/5*100,className:"w-16 h-2"}),t.jsx("span",{className:"text-sm font-medium w-8",children:s.toFixed(1)})]})]},o))})]}),t.jsxs("div",{className:"space-y-4",children:[(n==null?void 0:n.length)===0&&t.jsx("div",{className:"text-center py-6",children:t.jsx("span",{className:"text-xs md:text-sm text-muted-foreground",children:"No reviews yet"})}),n==null?void 0:n.map(o=>t.jsxs("div",{className:"border rounded-lg p-4 dark:border-gray-700",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("img",{src:o.reviewer.avatar_url?q.storage.from("avatars").getPublicUrl(o.reviewer.avatar_url).data.publicUrl:"/placeholder.svg",alt:o.reviewer.full_name,className:"w-8 h-8 rounded-full object-cover"}),t.jsx("span",{className:"font-medium",children:o.reviewer.full_name})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex gap-0.5 mr-2",children:Array.from({length:o.rating}).map((s,a)=>t.jsx(sn,{className:"h-4 w-4 text-yellow-500",fill:"currentColor"},a))}),t.jsx("span",{className:"text-xs text-muted-foreground",children:o.created_at?rn(new Date(o.created_at),"MMM d, yyyy"):""})]})]}),o.category_ratings&&Object.keys(o.category_ratings).length>0&&t.jsx("div",{className:"mb-2",children:t.jsx("div",{className:"flex flex-wrap gap-1",children:Object.entries(o.category_ratings).map(([s,a])=>t.jsxs(nn,{variant:"secondary",className:"text-xs",children:[s.replace("_"," "),": ",a,"/5"]},s))})}),o.comment&&t.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:o.comment}),o.response&&t.jsxs("div",{className:"mt-2 p-2 bg-muted/30 rounded text-sm",children:[t.jsx("p",{className:"font-medium text-xs mb-1",children:"Response from owner:"}),t.jsx("p",{className:"text-muted-foreground",children:o.response})]})]},o.id))]})]})]})},is=({latitude:e,longitude:n,location:i,mapStyle:r="mapbox://styles/mapbox/streets-v12"})=>{const o=v.useRef(null),s=v.useRef(null),a=v.useRef(null),u=v.useRef(!1),[l,c]=v.useState(null),[y,f]=v.useState(!0),x="mapbox://styles/mapbox/light-v11";return v.useEffect(()=>{(async()=>{try{const d=await Pt();if(!d){V.error("Failed to get the map token");return}c(d),f(!1)}catch(d){console.error("Error getting Mapbox token:",d),V.error("Failed to load map configuration")}})()},[]),v.useEffect(()=>{if(y||!o.current)return;const b=o.current;if(b.offsetWidth===0||b.offsetHeight===0){console.error("Map container has zero width or height");return}if(console.log("Initializing map with coordinates:",{longitude:n,latitude:e}),l)Te.accessToken=l;else{console.error("No Mapbox token available");return}try{s.current=new Te.Map({container:o.current,style:r||x,center:[n,e],zoom:13,interactive:!1}),s.current.on("load",()=>{console.log("Map loaded successfully"),a.current=new Te.Marker({color:"#7C3AED"}).setLngLat([n,e]).addTo(s.current),u.current=!0}),s.current.on("style.load",()=>{console.log("Map style loaded successfully")}),s.current.on("error",d=>{var h;console.error("Map error:",d),V.error("Error loading location map"),d.error&&d.error.message.includes("style")&&r!==x&&(console.log("Attempting to load fallback style"),(h=s.current)==null||h.setStyle(x))})}catch(d){console.error("Error initializing map:",d),V.error("Could not initialize location map")}return()=>{s.current&&(s.current.remove(),s.current=null,a.current=null,u.current=!1)}},[e,n,l,r,y]),v.useEffect(()=>{s.current&&u.current&&a.current&&(s.current.setCenter([n,e]),a.current.setLngLat([n,e]))},[e,n]),v.useEffect(()=>{s.current&&u.current&&s.current.setStyle(r||x)},[r]),t.jsxs(ze,{className:"dark:bg-gray-800 dark:border-gray-700",children:[t.jsx(_e,{className:"pb-2",children:t.jsx(Be,{className:"text-base text-left text-muted-foreground dark:text-white font-medium",children:"Location"})}),t.jsxs(Re,{children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx(dt,{size:16,className:"text-red-500 "}),t.jsx("p",{className:"text-xs md:text-sm text-left text-muted-foreground dark:text-gray-300",children:i})]}),t.jsx("div",{ref:o,className:"w-full h-40 rounded-md overflow-hidden border border-muted dark:border-gray-700"})]})]})},Qs=()=>{var u,l;const{id:e}=lt(),{theme:n}=Tt(),i=on.useUser(),{data:r,isLoading:o,error:s}=ke({queryKey:["car",e],queryFn:async()=>{if(console.log("Fetching car details for ID:",e),e==="af67919d-012e-418a-a183-0d390caeef1f"){const{error:f}=await q.from("cars").update({latitude:-24.6527,longitude:25.9088}).eq("id",e);f&&console.error("Error updating car coordinates:",f)}const{data:c,error:y}=await q.from("cars").select(`
          *,
          profiles:owner_id (
            full_name,
            avatar_url
          )
        `).eq("id",e).maybeSingle();if(y)throw console.error("Error fetching car:",y),y;return console.log("Car details fetched:",c),i&&(console.log("Current user ID:",i.id),console.log("Car owner ID:",c.owner_id),console.log("Is owner check:",i.id===c.owner_id)),c}});if(o)return t.jsxs("div",{className:"min-h-screen bg-background dark:bg-gray-900",children:[t.jsxs("div",{className:"container mx-auto",children:[t.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[200px] w-full p-4",children:[t.jsx("p",{className:"text-sm text-muted-foreground dark:text-gray-400 mb-3",children:"Loading vehicle details..."}),t.jsx(Ot,{color:"#7c3aed",width:100})]}),t.jsxs("div",{className:"space-y-4 p-4 mt-4",children:[t.jsx(ae,{className:"h-64 w-full bg-gray-200 dark:bg-gray-700"}),t.jsx(ae,{className:"h-8 w-3/4 bg-gray-200 dark:bg-gray-700"}),t.jsx(ae,{className:"h-4 w-1/2 bg-gray-200 dark:bg-gray-700"}),t.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[t.jsx(ae,{className:"h-20 bg-gray-200 dark:bg-gray-700"}),t.jsx(ae,{className:"h-20 bg-gray-200 dark:bg-gray-700"}),t.jsx(ae,{className:"h-20 bg-gray-200 dark:bg-gray-700"})]})]})]}),t.jsx(Oe,{})]});if(s||!r)return t.jsxs("div",{className:"min-h-screen bg-background dark:bg-gray-900",children:[t.jsx("div",{className:"container mx-auto",children:t.jsxs("div",{className:"p-4 text-center space-y-4",children:[t.jsx(Dt,{className:"h-12 w-12 text-red-500 mx-auto"}),t.jsx("h2",{className:"text-xl font-semibold text-red-500",children:"Error loading vehicle details"}),t.jsx("p",{className:"text-muted-foreground dark:text-gray-400",children:"Please try again later"})]})}),t.jsx(Oe,{})]});const a=(u=r.profiles)!=null&&u.avatar_url?q.storage.from("avatars").getPublicUrl(r.profiles.avatar_url).data.publicUrl:"/placeholder.svg";return t.jsxs("div",{className:"min-h-screen bg-background dark:bg-gray-900 pb-20",children:[t.jsx("div",{className:"container mx-auto",children:t.jsxs("div",{className:"space-y-4 p-4",children:[t.jsx(os,{carId:r.id,mainImageUrl:r.image_url}),t.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[t.jsx(kn,{brand:r.brand,model:r.model,year:r.year,location:r.location,pricePerDay:r.price_per_day}),t.jsx(Sn,{pricePerDay:r.price_per_day,transmission:r.transmission,seats:r.seats,features:r.features}),r.description&&t.jsx(Yt,{description:r.description}),t.jsx(is,{latitude:r.latitude,longitude:r.longitude,location:r.location,mapStyle:n==="dark"?"mapbox://styles/mapbox/dark-v11":"mapbox://styles/mapbox/light-v11"}),t.jsx(Xt,{ownerName:((l=r.profiles)==null?void 0:l.full_name)||"Car Owner",avatarUrl:a,ownerId:r.owner_id,carId:r.id}),t.jsx(as,{car:r})]}),t.jsx(vn,{car:r})]})}),t.jsx(Oe,{})]})};export{Qs as default};
