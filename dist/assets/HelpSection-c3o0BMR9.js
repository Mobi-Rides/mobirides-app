import{u as j,j as e}from"./query-vendor-C7aRRP05.js";import{s as g,B as l,y as N,v as y}from"./index-CV3rVyoS.js";import{C as h,d as p}from"./card-BYz0HUlZ.js";import{u as v,k as b,r as C}from"./react-vendor-mnpoGfEl.js";import{L as k}from"./loader-circle-DyIJ3h3k.js";import{C as w}from"./clock-DmPI1L3z.js";import{C as S}from"./circle-check-e9rqyLfA.js";import"./supabase-vendor-BOn0LdFJ.js";import"./mapbox-vendor-fnXFVHMy.js";import"./date-vendor-Dhms5dOu.js";const L=(o,r)=>j({queryKey:["guide-content",o,r],queryFn:async()=>{const{data:i,error:a}=await g.from("guides").select("title, description, read_time, content").eq("role",o).eq("section",r).single();if(a){if(a.code==="PGRST116")return null;throw console.error("Error fetching guide content:",a),a}const t=i.content.steps||[];return{title:i.title,description:i.description||"",read_time:i.read_time||"5 min",steps:t.map(c=>({title:c.title||"",content:c.content||"",...c.action&&{action:c.action}}))}},staleTime:5*60*1e3,gcTime:10*60*1e3}),H=()=>{var x;const o=v(),{role:r,section:i}=b(),[a,m]=C.useState([]),{data:t,isLoading:c,error:d}=L(r,i||""),u=s=>{m(n=>n.includes(s)?n.filter(f=>f!==s):[...n,s])};return c?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx(k,{className:"h-8 w-8 animate-spin mx-auto"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading help content..."})]})}):d||!t?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("h1",{className:"text-2xl font-bold",children:d?"Error loading content":"Section not found"}),e.jsx("p",{className:"text-muted-foreground",children:d?"Failed to load help content. Please try again.":"The help section you're looking for doesn't exist."}),e.jsx(l,{onClick:()=>o(`/help/${r}`),children:"Back to Help Center"})]})}):e.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[e.jsx("header",{className:"bg-card p-4 sticky top-0 z-10 shadow-sm border-b",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>o(`/help/${r}`),className:"p-2",children:e.jsx(N,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-lg font-semibold",children:t.title}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(w,{className:"h-3 w-3"}),e.jsx("span",{children:t.read_time})]})]})]})}),e.jsxs("main",{className:"p-4 space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-muted-foreground",children:t.description}),t.steps&&e.jsx("div",{className:"flex items-center gap-2 text-sm",children:e.jsxs(y,{variant:"secondary",children:[a.length," of ",t.steps.length," completed"]})})]}),e.jsx("div",{className:"space-y-4",children:(x=t.steps)==null?void 0:x.map((s,n)=>e.jsx(h,{className:"overflow-hidden",children:e.jsx(p,{className:"p-0",children:e.jsxs("div",{className:"flex items-start gap-3 p-4",children:[e.jsx("button",{onClick:()=>u(n),className:"mt-1 text-primary hover:text-primary/80 transition-colors",children:e.jsx(S,{className:`h-5 w-5 ${a.includes(n)?"fill-current":"fill-none"}`})}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("h3",{className:"font-semibold",children:s.title}),e.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:s.content}),s.action&&e.jsx(l,{size:"sm",variant:"outline",className:"mt-3",children:typeof s.action=="object"?s.action.label:s.action})]})]})})},n))}),e.jsx("div",{className:"pt-6",children:e.jsx(h,{className:"bg-muted/50",children:e.jsxs(p,{className:"p-4 text-center",children:[e.jsx("h3",{className:"font-medium mb-2",children:"Need more help?"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Can't find what you're looking for? Our support team is here to help."}),e.jsx(l,{variant:"outline",size:"sm",children:"Contact Support"})]})})})]})]})};export{H as default};
