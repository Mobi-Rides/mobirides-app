import{j as e}from"./query-vendor-C7aRRP05.js";import{r as c}from"./react-vendor-mnpoGfEl.js";import{P as b,a as y,b as S,C}from"./popover-BK9ujFOl.js";import{J as h,af as N,E as D,f as t,I as i,B as o,S as x,g as p,h as v,i as u,k as n}from"./index-DJr5SZzu.js";import{L as w}from"./LocationSearchInput-DI27tYf8.js";import{C as F}from"./calendar-DXV6iOkH.js";import{A as B}from"./arrow-up-down-CTAHKhNN.js";import{a as j}from"./date-vendor-Dhms5dOu.js";const V=({onFiltersChange:d})=>{const[r,m]=c.useState({startDate:void 0,endDate:void 0,vehicleType:void 0,location:"",locationCoordinates:void 0,sortBy:"distance",sortOrder:"asc",model:void 0,year:void 0,minPrice:void 0,maxPrice:void 0,searchQuery:""}),s=(a,l)=>{console.log(`Updating filter ${a} with value:`,l),m(P=>({...P,[a]:l}))},f=c.useCallback(a=>{m(l=>({...l,location:a.name,locationCoordinates:a.coordinates})),console.log("Location selected:",a)},[]),g=c.useCallback(()=>{if(console.log("Applying filters:",r),r.minPrice&&r.maxPrice&&r.minPrice>r.maxPrice){h.error("Minimum price cannot be greater than maximum price");return}d(r),h.success("Filters applied successfully")},[r,d]);return e.jsx(N,{children:e.jsxs("div",{className:"w-full rounded-lg border bg-card shadow-sm my-5 relative",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-6 bg-gradient-to-b from-background to-transparent z-10"}),e.jsx(D,{className:"h-[calc(100vh-200px)]",children:e.jsxs("div",{className:"flex flex-col gap-4 p-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(t,{htmlFor:"model",children:"Model"}),e.jsx(i,{id:"model",placeholder:"Search by model...",value:r.model||"",onChange:a=>s("model",a.target.value)})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"year",children:"Year"}),e.jsx(i,{id:"year",type:"number",placeholder:"Search by year...",value:r.year||"",onChange:a=>s("year",a.target.value?parseInt(a.target.value):void 0)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx(t,{htmlFor:"minPrice",children:"Min Price (BWP)"}),e.jsx(i,{id:"minPrice",type:"number",placeholder:"Min price...",value:r.minPrice||"",onChange:a=>s("minPrice",a.target.value?parseInt(a.target.value):void 0)})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"maxPrice",children:"Max Price (BWP)"}),e.jsx(i,{id:"maxPrice",type:"number",placeholder:"Max price...",value:r.maxPrice||"",onChange:a=>s("maxPrice",a.target.value?parseInt(a.target.value):void 0)})]})]})]}),e.jsxs(b,{children:[e.jsx(y,{asChild:!0,children:e.jsxs(o,{variant:"outline",className:"w-full",children:[e.jsx(F,{className:"mr-2 h-4 w-4"}),r.startDate&&r.endDate?`${j(r.startDate,"PP")} - ${j(r.endDate,"PP")}`:"Select dates"]})}),e.jsx(S,{className:"w-auto p-0",align:"start",children:e.jsx(C,{mode:"range",selected:{from:r.startDate,to:r.endDate},onSelect:a=>{s("startDate",a==null?void 0:a.from),s("endDate",a==null?void 0:a.to)},numberOfMonths:2})})]}),e.jsxs(x,{value:r.vehicleType,onValueChange:a=>s("vehicleType",a),children:[e.jsx(p,{children:e.jsx(v,{placeholder:"Vehicle type"})}),e.jsx(u,{children:["Basic","Standard","Executive","4x4","SUV","Electric","Exotic"].map(a=>e.jsx(n,{value:a,children:a},a))})]}),e.jsx("div",{className:"relative",children:e.jsx(w,{placeholder:"Enter pickup location",onLocationSelect:f,value:r.location,className:"w-full"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(x,{value:r.sortBy,onValueChange:a=>s("sortBy",a),children:[e.jsx(p,{className:"flex-1",children:e.jsx(v,{placeholder:"Sort by"})}),e.jsxs(u,{children:[e.jsx(n,{value:"distance",children:"Distance"}),e.jsx(n,{value:"price",children:"Price"})]})]}),e.jsx(o,{variant:"ghost",size:"icon",onClick:()=>s("sortOrder",r.sortOrder==="asc"?"desc":"asc"),children:e.jsx(B,{className:`h-4 w-4 ${r.sortOrder==="desc"?"rotate-180":""}`})})]}),e.jsx(o,{className:"w-full mt-2",onClick:g,children:"Apply Filters"})]})}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-6 bg-gradient-to-b from-transparent to-background z-10"})]})})};export{V as S};
