import{a as Et,j as t,u as Fe}from"./query-vendor-BOSMW7hd.js";import{c as O,s as se,B as ie,J as _,Z as It,U as At,_ as je,q as Pt,l as Tt,F as Dt,u as Ot,W as Ft,T as zt}from"./index-ahmQo-Zq.js";import{S as ae}from"./skeleton-DFMY7FuM.js";import{N as Pe}from"./Navigation-DgaHbxsQ.js";import{r as k,u as Vt,k as lt,L as et}from"./react-vendor-DmU5vXC9.js";import{H as Bt,B as Rt,i as _t,u as qt,s as Ht,C as $t}from"./savedCarService-DiYcklUS.js";import{V as Kt}from"./VerificationRequiredDialog-DSKmhISw.js";import{u as Gt}from"./useVerificationStatus-5lh3U-on.js";import{C as ut}from"./calendar-CpXOYIBo.js";import{P as Ut,a as Qt,b as Zt}from"./popover-D6QS4X_r.js";import{M as dt}from"./map-pin-BTmNqwoj.js";import{C as ze,a as Ve,b as Be,d as Re}from"./card-D4VTtfVn.js";import{C as Jt}from"./car-DSCKC0BN.js";import{G as tt}from"./gauge-BgTb2tP1.js";import{C as nt}from"./camera-D85mMN_S.js";import{S as Yt}from"./shield-DYICiwOR.js";import{K as Xt,C as Wt,a as en}from"./CarDescription-wjhxBLle.js";import{A as tn}from"./arrow-right-B6hAkUh0.js";import{S as nn}from"./star-Cl6daLIe.js";import{a as sn}from"./date-vendor-Dhms5dOu.js";import{m as Te}from"./mapbox-vendor-ueN8uhVJ.js";/* empty css                  */import{d as rn}from"./index-Bad3wlzf.js";import"./supabase-vendor-B3A6ooRR.js";import"./bell-D3eElkfC.js";import"./user-7MMf2PMh.js";import"./calendar-D_cFmEe6.js";import"./chevron-left-Dh8Ads5x.js";import"./availabilityService-D7WpCdEl.js";import"./LocationSearchInput-CT6ABk2G.js";import"./clock-gtBamCUv.js";import"./circle-alert-C0uJq2nf.js";import"./file-text-Cdr2LMFF.js";import"./circle-check-big-uJiWdFVJ.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const on=O("AirVent",[["path",{d:"M6 12H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"larmp2"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"M18.3 17.7a2.5 2.5 0 0 1-3.16 3.83 2.53 2.53 0 0 1-1.14-2V12",key:"1bo8pg"}],["path",{d:"M6.6 15.6A2 2 0 1 0 10 17v-5",key:"t9h90c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const an=O("Baby",[["path",{d:"M9 12h.01",key:"157uk2"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"5yv0yz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cn=O("Bluetooth",[["path",{d:"m7 7 10 10-5 5V2l5 5L7 17",key:"1q5490"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ln=O("CalendarCheck",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const un=O("Compass",[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dn=O("FolderTree",[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fn=O("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mn=O("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hn=O("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xn=O("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=O("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rt=O("Sofa",[["path",{d:"M20 9V6a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v3",key:"1dgpiv"}],["path",{d:"M2 16a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a2 2 0 0 0-4 0v1.5a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5V11a2 2 0 0 0-4 0z",key:"xacw8m"}],["path",{d:"M4 18v2",key:"jwo5n2"}],["path",{d:"M20 18v2",key:"1ar1qi"}],["path",{d:"M12 4v9",key:"oqhhn3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pn=O("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gn=O("Thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yn=O("Umbrella",[["path",{d:"M22 12a10.06 10.06 1 0 0-20 0Z",key:"1teyop"}],["path",{d:"M12 12v8a2 2 0 0 0 4 0",key:"ulpmoc"}],["path",{d:"M12 2v1",key:"11qlp1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bn=O("Webcam",[["circle",{cx:"12",cy:"10",r:"8",key:"1gshiw"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 22h10",key:"10w4w3"}],["path",{d:"M12 22v-4",key:"1utk9m"}]]),jn=({car:e})=>{const[n,o]=k.useState(!1),[s,c]=k.useState(!1),[r,a]=k.useState(!1),[l,u]=k.useState(!1),[i,x]=k.useState(!1),[f,p]=k.useState(!1),{isVerified:b,isLoading:d}=Gt(),h=Vt(),g=Et();k.useEffect(()=>{(async()=>{var v;const{data:L}=await se.auth.getSession(),S=!!L.session;if(x(S),S&&((v=L.session)!=null&&v.user)){const C=L.session.user.id;p(C===e.owner_id)}})();const{data:{subscription:N}}=se.auth.onAuthStateChange((L,S)=>{const v=!!S;if(x(v),v&&S){const C=S.user.id;p(C===e.owner_id)}else p(!1)});return()=>N.unsubscribe()},[e.owner_id]),k.useEffect(()=>{(async()=>{if(i)try{const N=await _t(e.id);a(N)}catch(N){console.error("Failed to check if car is saved:",N)}})()},[e.id,i]);const m=()=>{if(!i){h("/login");return}if(f){_.error("You cannot book your own vehicle");return}if(!b&&!d){c(!0);return}o(!0)},y=async()=>{if(!i){h("/login");return}if(!l){u(!0);try{r?await qt(e.id)&&(a(!1),_.success("Vehicle removed from saved list"),g.invalidateQueries({queryKey:["saved-cars-full"]}),g.invalidateQueries({queryKey:["saved-car-ids"]})):await Ht(e.id)&&(a(!0),_.success("Vehicle added to saved list"),g.invalidateQueries({queryKey:["saved-cars-full"]}),g.invalidateQueries({queryKey:["saved-car-ids"]}))}catch{_.error("An error occurred. Please try again.")}finally{u(!1)}}};return t.jsxs("div",{className:"sticky bottom-[72px] bg-background dark:bg-gray-800 p-4 rounded-t-lg border-t border-gray-200 dark:border-gray-700 shadow-lg",children:[f?t.jsxs("div",{className:"flex items-center justify-center p-2 bg-muted rounded-lg",children:[t.jsx(xn,{className:"h-5 w-5 mr-2 text-amber-500"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"You own this vehicle"})]}):t.jsxs("div",{className:"flex gap-2",children:[t.jsx(ie,{variant:"outline",className:"w-12 flex-shrink-0",onClick:y,disabled:l,children:t.jsx(Bt,{className:`${r?"fill-red-500 text-red-500":"text-gray-600 dark:text-gray-400"}`})}),t.jsxs(ie,{className:"flex-1 flex items-center justify-center gap-2",onClick:m,children:[t.jsx(ut,{className:"w-5 h-5"}),"Book Now"]})]}),t.jsx(Rt,{car:e,isOpen:n,onClose:()=>o(!1)}),t.jsx(Kt,{isOpen:s,onClose:()=>c(!1),action:"booking",carData:e})]})},wn=({brand:e,model:n,year:o,location:s,pricePerDay:c})=>{const{id:r}=lt(),[a,l]=k.useState(!1),[u,i]=k.useState(!0),[x,f]=k.useState(!1);k.useEffect(()=>{(async()=>{var d,h;try{i(!0);const{data:g}=await se.auth.getSession(),m=(h=(d=g==null?void 0:g.session)==null?void 0:d.user)==null?void 0:h.id;if(!m||!r){l(!1);return}const{data:y}=await se.from("cars").select("owner_id").eq("id",r).single();l((y==null?void 0:y.owner_id)===m)}catch(g){console.error("Error checking car ownership:",g),l(!1)}finally{i(!1)}})()},[r]);const p=async()=>{if(!r)return;const b=`${window.location.origin}/cars/${r}`;try{navigator.share?(await navigator.share({title:`${e} ${n} (${o})`,text:`Let's rent this ${e} ${n} on Mobi Rides`,url:b}),_.success("Shared successfully")):(await navigator.clipboard.writeText(b),f(!0),_.success("Link copied to clipboard"),setTimeout(()=>{f(!1)},2e3))}catch(d){console.error("Error sharing:",d),_.error("Failed to share. Please try again.")}};return t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700 p-4",children:t.jsxs("div",{className:"flex flex-col md:flex-row justify-between md:items-start",children:[t.jsxs("div",{children:[t.jsxs("h1",{className:"text-2xl md:text-3xl text-left text-gray-700 dark:text-white font-bold",children:[e," ",n]}),t.jsxs("div",{className:"flex items-center gap-1 mt-1 text-sm md:text-base text-muted-foreground dark:text-white",children:[t.jsx(ln,{size:16,className:"h-4 w-4 mr-1 text-blue-500"}),t.jsx("span",{className:"text-sm md:text-base text-muted-foreground",children:o})]}),t.jsxs("div",{className:"flex items-center gap-1 mt-1 ",children:[t.jsx(dt,{size:16,className:"h-4 w-4 mr-1 text-red-500"}),t.jsx("span",{className:"text-sm md:text-base text-muted-foreground",children:s})]}),t.jsxs("div",{className:"mt-8 flex items-center gap-1",children:[t.jsxs("h2",{className:"font-bold text-lg md:text-xl  text-primary",children:["BWP ",c]}),t.jsx("p",{className:"text-xs md:text-sm text-muted-foreground dark:text-white",children:"/day"})]})]}),t.jsxs("div",{className:"flex gap-2 mt-4 md:mt-0",children:[a&&t.jsx(ie,{variant:"outline",size:"icon",className:"rounded-2xl md:size-auto md:px-4 md:py-2 md:flex md:items-center md:gap-2",asChild:!0,children:t.jsxs(et,{to:`/edit-car/${r}`,children:[t.jsx(It,{className:"h-4 w-4 text-[#581CFA] dark:text-white"}),t.jsx("span",{className:"hidden md:inline-block",children:t.jsx("p",{className:"text-[#581CFA] dark:text-white text-xs md:text-sm lg:text-base font-semibold",children:"Edit Car"})})]})}),t.jsxs(Ut,{open:x,onOpenChange:f,children:[t.jsx(Qt,{asChild:!0,children:t.jsxs(ie,{variant:"outline",size:"icon",className:"rounded-2xl md:size-auto md:px-4 md:py-2 md:flex md:items-center md:gap-2",onClick:p,children:[t.jsx(hn,{className:"h-4 w-4 text-[#581CFA] dark:text-white"}),t.jsx("span",{className:"hidden md:inline-block",children:t.jsx("p",{className:"text-[#581CFA] dark:text-white text-xs md:text-sm lg:text-base font-semibold",children:"Share"})})]})}),t.jsx(Zt,{className:"w-auto p-2 text-sm",children:"Link copied!"})]}),t.jsx(ie,{variant:"outline",size:"icon",className:"rounded-2xl md:size-auto md:px-4 md:py-2 md:flex md:items-center md:gap-2",asChild:!0,children:t.jsxs(et,{to:"/bookings",children:[t.jsx(ut,{className:"h-4 w-4 text-[#581CFA] dark:text-white"}),t.jsx("span",{className:"hidden md:inline-block",children:t.jsx("p",{className:"text-[#581CFA] dark:text-white text-xs md:text-sm lg:text-base font-semibold",children:"Bookings"})})]})})]})]})})},kn=({transmission:e,fuel:n,seats:o,pricePerDay:s,features:c=[],variant:r="card"})=>{const a=l=>{switch(l){case"Air Conditioning":return t.jsx(on,{className:"h-4 w-4"});case"Bluetooth":return t.jsx(cn,{className:"h-4 w-4"});case"Cruise Control":return t.jsx(tt,{className:"h-4 w-4"});case"Navigation System":return t.jsx(un,{className:"h-4 w-4"});case"Leather Seats":return t.jsx(rt,{className:"h-4 w-4"});case"Sunroof":return t.jsx(yn,{className:"h-4 w-4"});case"Backup Camera":return t.jsx(nt,{className:"h-4 w-4"});case"Parking Sensors":return t.jsx(bn,{className:"h-4 w-4"});case"Keyless Entry":return t.jsx(Xt,{className:"h-4 w-4"});case"Push Start":return t.jsx(fn,{className:"h-4 w-4"});case"Heated Seats":return t.jsx(gn,{className:"h-4 w-4"});case"Premium Sound":return t.jsx(mn,{className:"h-4 w-4"});case"Third Row Seating":return t.jsx(rt,{className:"h-4 w-4"});case"Blind Spot Monitor":return t.jsx(Yt,{className:"h-4 w-4"});case"360 Degree Camera":return t.jsx(nt,{className:"h-4 w-4"});case"Apple CarPlay":return t.jsx(st,{className:"h-4 w-4"});case"Android Auto":return t.jsx(st,{className:"h-4 w-4"});case"Roof Rack":return t.jsx(dn,{className:"h-4 w-4"});case"Child Seat Anchor":return t.jsx(an,{className:"h-4 w-4"});case"Autonomous Driving":return t.jsx(tt,{className:"h-4 w-4"});default:return t.jsx(pn,{className:"h-4 w-4"})}};return r==="grid"?t.jsxs("div",{className:"grid grid-cols-3 gap-2 text-sm text-gray-600",children:[t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(Jt,{className:"w-4 h-4"}),e]}),t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx("i",{className:"w-4 h-4",children:"â›½"}),n]}),t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx("i",{className:"w-4 h-4",children:"ðŸ‘¥"}),o," Seats"]})]}):t.jsxs(ze,{className:"dark:bg-gray-800 dark:border-gray-700",children:[t.jsx(Ve,{className:"pb-2",children:t.jsx(Be,{className:"text-base text-left text-muted-foreground dark:text-white font-medium",children:"Car Specifications"})}),t.jsxs(Re,{children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm mb-6",children:[t.jsxs("div",{className:"p-4 bg-muted rounded-lg text-left w-full",children:[t.jsx($t,{className:"w-4 h-4 text-primary dark:text-primary-foreground"}),t.jsx("p",{className:"text-base md:text-xl text-left text-gray-700 dark:text-white font-medium mt-4",children:e}),t.jsx("p",{className:"text-xs md:text-sm text-muted-foreground",children:"Car Fuel"})]}),t.jsxs("div",{className:"p-4 bg-muted rounded-lg text-left",children:[t.jsx(At,{className:"w-4 h-4 text-primary dark:text-primary-foreground"}),t.jsx("p",{className:"text-base md:text-xl text-left text-gray-700 dark:text-white font-medium mt-4",children:o}),t.jsx("p",{className:"text-xs md:text-sm text-muted-foreground",children:"Passenger Seats"})]})]}),c&&c.length>0&&t.jsxs(t.Fragment,{children:[t.jsx("h3",{className:"mb-3 text-base text-left text-muted-foreground dark:text-white font-medium",children:"Car Features"}),t.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-2",children:c.map(l=>t.jsxs("div",{className:"flex items-center space-x-2 p-2 rounded-md border bg-muted/30",children:[t.jsx("span",{className:"text-primary",children:a(l)}),t.jsx("span",{className:"text-xs md:text-sm text-muted-foreground",children:l})]},l))})]})]})]})},vn=({pricePerDay:e,transmission:n,seats:o,features:s=[]})=>t.jsx(kn,{transmission:n,fuel:"Petrol",seats:o,pricePerDay:e,features:s,variant:"card"});function Nn(e){return Object.prototype.toString.call(e)==="[object Object]"}function ot(e){return Nn(e)||Array.isArray(e)}function Sn(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function _e(e,n){const o=Object.keys(e),s=Object.keys(n);if(o.length!==s.length)return!1;const c=JSON.stringify(Object.keys(e.breakpoints||{})),r=JSON.stringify(Object.keys(n.breakpoints||{}));return c!==r?!1:o.every(a=>{const l=e[a],u=n[a];return typeof l=="function"?`${l}`==`${u}`:!ot(l)||!ot(u)?l===u:_e(l,u)})}function at(e){return e.concat().sort((n,o)=>n.name>o.name?1:-1).map(n=>n.options)}function Cn(e,n){if(e.length!==n.length)return!1;const o=at(e),s=at(n);return o.every((c,r)=>{const a=s[r];return _e(c,a)})}function qe(e){return typeof e=="number"}function De(e){return typeof e=="string"}function Ne(e){return typeof e=="boolean"}function it(e){return Object.prototype.toString.call(e)==="[object Object]"}function P(e){return Math.abs(e)}function He(e){return Math.sign(e)}function pe(e,n){return P(e-n)}function Mn(e,n){if(e===0||n===0||P(e)<=P(n))return 0;const o=pe(P(e),P(n));return P(o/e)}function ge(e){return ye(e).map(Number)}function q(e){return e[we(e)]}function we(e){return Math.max(0,e.length-1)}function $e(e,n){return n===we(e)}function ct(e,n=0){return Array.from(Array(e),(o,s)=>n+s)}function ye(e){return Object.keys(e)}function ft(e,n){return[e,n].reduce((o,s)=>(ye(s).forEach(c=>{const r=o[c],a=s[c],l=it(r)&&it(a);o[c]=l?ft(r,a):a}),o),{})}function Oe(e,n){return typeof n.MouseEvent<"u"&&e instanceof n.MouseEvent}function Ln(e,n){const o={start:s,center:c,end:r};function s(){return 0}function c(u){return r(u)/2}function r(u){return n-u}function a(u,i){return De(e)?o[e](u):e(n,u,i)}return{measure:a}}function be(){let e=[];function n(c,r,a,l={passive:!0}){let u;if("addEventListener"in c)c.addEventListener(r,a,l),u=()=>c.removeEventListener(r,a,l);else{const i=c;i.addListener(a),u=()=>i.removeListener(a)}return e.push(u),s}function o(){e=e.filter(c=>c())}const s={add:n,clear:o};return s}function En(e,n,o,s){const c=be(),r=1e3/60;let a=null,l=0,u=0;function i(){c.add(e,"visibilitychange",()=>{e.hidden&&d()})}function x(){b(),c.clear()}function f(g){if(!u)return;a||(a=g);const m=g-a;for(a=g,l+=m;l>=r;)o(r),l-=r;const y=l/r;s(y),u&&n.requestAnimationFrame(f)}function p(){u||(u=n.requestAnimationFrame(f))}function b(){n.cancelAnimationFrame(u),a=null,l=0,u=0}function d(){a=null,l=0}return{init:i,destroy:x,start:p,stop:b,update:()=>o(r),render:s}}function In(e,n){const o=n==="rtl",s=e==="y",c=s?"y":"x",r=s?"x":"y",a=!s&&o?-1:1,l=x(),u=f();function i(d){const{height:h,width:g}=d;return s?h:g}function x(){return s?"top":o?"right":"left"}function f(){return s?"bottom":o?"left":"right"}function p(d){return d*a}return{scroll:c,cross:r,startEdge:l,endEdge:u,measureSize:i,direction:p}}function ce(e=0,n=0){const o=P(e-n);function s(i){return i<e}function c(i){return i>n}function r(i){return s(i)||c(i)}function a(i){return r(i)?s(i)?e:n:i}function l(i){return o?i-o*Math.ceil((i-n)/o):i}return{length:o,max:n,min:e,constrain:a,reachedAny:r,reachedMax:c,reachedMin:s,removeOffset:l}}function mt(e,n,o){const{constrain:s}=ce(0,e),c=e+1;let r=a(n);function a(p){return o?P((c+p)%c):s(p)}function l(){return r}function u(p){return r=a(p),f}function i(p){return x().set(l()+p)}function x(){return mt(e,l(),o)}const f={get:l,set:u,add:i,clone:x};return f}function An(e,n,o,s,c,r,a,l,u,i,x,f,p,b,d,h,g,m,y){const{cross:j,direction:N}=e,L=["INPUT","SELECT","TEXTAREA"],S={passive:!1},v=be(),C=be(),M=ce(50,225).constrain(b.measure(20)),T={mouse:300,touch:400},E={mouse:500,touch:600},V=d?43:25;let H=!1,$=0,K=0,re=!1,W=!1,Q=!1,Z=!1;function de(w){if(!y)return;function I(z){(Ne(y)||y(w,z))&&me(z)}const D=n;v.add(D,"dragstart",z=>z.preventDefault(),S).add(D,"touchmove",()=>{},S).add(D,"touchend",()=>{}).add(D,"touchstart",I).add(D,"mousedown",I).add(D,"touchcancel",F).add(D,"contextmenu",F).add(D,"click",Y,!0)}function G(){v.clear(),C.clear()}function le(){const w=Z?o:n;C.add(w,"touchmove",B,S).add(w,"touchend",F).add(w,"mousemove",B,S).add(w,"mouseup",F)}function ue(w){const I=w.nodeName||"";return L.includes(I)}function J(){return(d?E:T)[Z?"mouse":"touch"]}function fe(w,I){const D=f.add(He(w)*-1),z=x.byDistance(w,!d).distance;return d||P(w)<M?z:g&&I?z*.5:x.byIndex(D.get(),0).distance}function me(w){const I=Oe(w,s);Z=I,Q=d&&I&&!w.buttons&&H,H=pe(c.get(),a.get())>=2,!(I&&w.button!==0)&&(ue(w.target)||(re=!0,r.pointerDown(w),i.useFriction(0).useDuration(0),c.set(a),le(),$=r.readPoint(w),K=r.readPoint(w,j),p.emit("pointerDown")))}function B(w){if(!Oe(w,s)&&w.touches.length>=2)return F(w);const D=r.readPoint(w),z=r.readPoint(w,j),U=pe(D,$),X=pe(z,K);if(!W&&!Z&&(!w.cancelable||(W=U>X,!W)))return F(w);const ee=r.pointerMove(w);U>h&&(Q=!0),i.useFriction(.3).useDuration(.75),l.start(),c.add(N(ee)),w.preventDefault()}function F(w){const D=x.byDistance(0,!1).index!==f.get(),z=r.pointerUp(w)*J(),U=fe(N(z),D),X=Mn(z,U),ee=V-10*X,te=m+X/50;W=!1,re=!1,C.clear(),i.useDuration(ee).useFriction(te),u.distance(U,!d),Z=!1,p.emit("pointerUp")}function Y(w){Q&&(w.stopPropagation(),w.preventDefault(),Q=!1)}function R(){return re}return{init:de,destroy:G,pointerDown:R}}function Pn(e,n){let s,c;function r(f){return f.timeStamp}function a(f,p){const d=`client${(p||e.scroll)==="x"?"X":"Y"}`;return(Oe(f,n)?f:f.touches[0])[d]}function l(f){return s=f,c=f,a(f)}function u(f){const p=a(f)-a(c),b=r(f)-r(s)>170;return c=f,b&&(s=f),p}function i(f){if(!s||!c)return 0;const p=a(c)-a(s),b=r(f)-r(s),d=r(f)-r(c)>170,h=p/b;return b&&!d&&P(h)>.1?h:0}return{pointerDown:l,pointerMove:u,pointerUp:i,readPoint:a}}function Tn(){function e(o){const{offsetTop:s,offsetLeft:c,offsetWidth:r,offsetHeight:a}=o;return{top:s,right:c+r,bottom:s+a,left:c,width:r,height:a}}return{measure:e}}function Dn(e){function n(s){return e*(s/100)}return{measure:n}}function On(e,n,o,s,c,r,a){const l=[e].concat(s);let u,i,x=[],f=!1;function p(g){return c.measureSize(a.measure(g))}function b(g){if(!r)return;i=p(e),x=s.map(p);function m(y){for(const j of y){if(f)return;const N=j.target===e,L=s.indexOf(j.target),S=N?i:x[L],v=p(N?e:s[L]);if(P(v-S)>=.5){g.reInit(),n.emit("resize");break}}}u=new ResizeObserver(y=>{(Ne(r)||r(g,y))&&m(y)}),o.requestAnimationFrame(()=>{l.forEach(y=>u.observe(y))})}function d(){f=!0,u&&u.disconnect()}return{init:b,destroy:d}}function Fn(e,n,o,s,c,r){let a=0,l=0,u=c,i=r,x=e.get(),f=0;function p(S){const v=S/1e3,C=u*v,M=s.get()-e.get(),T=!u;let E=0;return T?(a=0,o.set(s),e.set(s),E=M):(o.set(e),a+=M/C,a*=i,x+=a,e.add(a*v),E=x-f),l=He(E),f=x,L}function b(){const S=s.get()-n.get();return P(S)<.001}function d(){return u}function h(){return l}function g(){return a}function m(){return j(c)}function y(){return N(r)}function j(S){return u=S,L}function N(S){return i=S,L}const L={direction:h,duration:d,velocity:g,seek:p,settled:b,useBaseFriction:y,useBaseDuration:m,useFriction:N,useDuration:j};return L}function zn(e,n,o,s,c){const r=c.measure(10),a=c.measure(50),l=ce(.1,.99);let u=!1;function i(){return!(u||!e.reachedAny(o.get())||!e.reachedAny(n.get()))}function x(b){if(!i())return;const d=e.reachedMin(n.get())?"min":"max",h=P(e[d]-n.get()),g=o.get()-n.get(),m=l.constrain(h/a);o.subtract(g*m),!b&&P(g)<r&&(o.set(e.constrain(o.get())),s.useDuration(25).useBaseFriction())}function f(b){u=!b}return{shouldConstrain:i,constrain:x,toggleActive:f}}function Vn(e,n,o,s,c){const r=ce(-n+e,0),a=f(),l=x(),u=p();function i(d,h){return pe(d,h)<1}function x(){const d=a[0],h=q(a),g=a.lastIndexOf(d),m=a.indexOf(h)+1;return ce(g,m)}function f(){return o.map((d,h)=>{const{min:g,max:m}=r,y=r.constrain(d),j=!h,N=$e(o,h);return j?m:N||i(g,y)?g:i(m,y)?m:y}).map(d=>parseFloat(d.toFixed(3)))}function p(){if(n<=e+c)return[r.max];if(s==="keepSnaps")return a;const{min:d,max:h}=l;return a.slice(d,h)}return{snapsContained:u,scrollContainLimit:l}}function Bn(e,n,o){const s=n[0],c=o?s-e:q(n);return{limit:ce(c,s)}}function Rn(e,n,o,s){const r=n.min+.1,a=n.max+.1,{reachedMin:l,reachedMax:u}=ce(r,a);function i(p){return p===1?u(o.get()):p===-1?l(o.get()):!1}function x(p){if(!i(p))return;const b=e*(p*-1);s.forEach(d=>d.add(b))}return{loop:x}}function _n(e){const{max:n,length:o}=e;function s(r){const a=r-n;return o?a/-o:0}return{get:s}}function qn(e,n,o,s,c){const{startEdge:r,endEdge:a}=e,{groupSlides:l}=c,u=f().map(n.measure),i=p(),x=b();function f(){return l(s).map(h=>q(h)[a]-h[0][r]).map(P)}function p(){return s.map(h=>o[r]-h[r]).map(h=>-P(h))}function b(){return l(i).map(h=>h[0]).map((h,g)=>h+u[g])}return{snaps:i,snapsAligned:x}}function Hn(e,n,o,s,c,r){const{groupSlides:a}=c,{min:l,max:u}=s,i=x();function x(){const p=a(r),b=!e||n==="keepSnaps";return o.length===1?[r]:b?p:p.slice(l,u).map((d,h,g)=>{const m=!h,y=$e(g,h);if(m){const j=q(g[0])+1;return ct(j)}if(y){const j=we(r)-q(g)[0]+1;return ct(j,q(g)[0])}return d})}return{slideRegistry:i}}function $n(e,n,o,s,c){const{reachedAny:r,removeOffset:a,constrain:l}=s;function u(d){return d.concat().sort((h,g)=>P(h)-P(g))[0]}function i(d){const h=e?a(d):l(d),g=n.map((y,j)=>({diff:x(y-h,0),index:j})).sort((y,j)=>P(y.diff)-P(j.diff)),{index:m}=g[0];return{index:m,distance:h}}function x(d,h){const g=[d,d+o,d-o];if(!e)return d;if(!h)return u(g);const m=g.filter(y=>He(y)===h);return m.length?u(m):q(g)-o}function f(d,h){const g=n[d]-c.get(),m=x(g,h);return{index:d,distance:m}}function p(d,h){const g=c.get()+d,{index:m,distance:y}=i(g),j=!e&&r(g);if(!h||j)return{index:m,distance:d};const N=n[m]-y,L=d+x(N,0);return{index:m,distance:L}}return{byDistance:p,byIndex:f,shortcut:x}}function Kn(e,n,o,s,c,r,a){function l(f){const p=f.distance,b=f.index!==n.get();r.add(p),p&&(s.duration()?e.start():(e.update(),e.render(1),e.update())),b&&(o.set(n.get()),n.set(f.index),a.emit("select"))}function u(f,p){const b=c.byDistance(f,p);l(b)}function i(f,p){const b=n.clone().set(f),d=c.byIndex(b.get(),p);l(d)}return{distance:u,index:i}}function Gn(e,n,o,s,c,r,a,l){const u={passive:!0,capture:!0};let i=0;function x(b){if(!l)return;function d(h){if(new Date().getTime()-i>10)return;a.emit("slideFocusStart"),e.scrollLeft=0;const y=o.findIndex(j=>j.includes(h));qe(y)&&(c.useDuration(0),s.index(y,0),a.emit("slideFocus"))}r.add(document,"keydown",f,!1),n.forEach((h,g)=>{r.add(h,"focus",m=>{(Ne(l)||l(b,m))&&d(g)},u)})}function f(b){b.code==="Tab"&&(i=new Date().getTime())}return{init:x}}function xe(e){let n=e;function o(){return n}function s(u){n=a(u)}function c(u){n+=a(u)}function r(u){n-=a(u)}function a(u){return qe(u)?u:u.get()}return{get:o,set:s,add:c,subtract:r}}function ht(e,n){const o=e.scroll==="x"?r:a,s=n.style;let c=!1;function r(f){return`translate3d(${f}px,0px,0px)`}function a(f){return`translate3d(0px,${f}px,0px)`}function l(f){c||(s.transform=o(e.direction(f)))}function u(f){c=!f}function i(){c||(s.transform="",n.getAttribute("style")||n.removeAttribute("style"))}return{clear:i,to:l,toggleActive:u}}function Un(e,n,o,s,c,r,a,l,u){const x=ge(c),f=ge(c).reverse(),p=m().concat(y());function b(v,C){return v.reduce((M,T)=>M-c[T],C)}function d(v,C){return v.reduce((M,T)=>b(M,C)>0?M.concat([T]):M,[])}function h(v){return r.map((C,M)=>({start:C-s[M]+.5+v,end:C+n-.5+v}))}function g(v,C,M){const T=h(C);return v.map(E=>{const V=M?0:-o,H=M?o:0,$=M?"end":"start",K=T[E][$];return{index:E,loopPoint:K,slideLocation:xe(-1),translate:ht(e,u[E]),target:()=>l.get()>K?V:H}})}function m(){const v=a[0],C=d(f,v);return g(C,o,!1)}function y(){const v=n-a[0]-1,C=d(x,v);return g(C,-o,!0)}function j(){return p.every(({index:v})=>{const C=x.filter(M=>M!==v);return b(C,n)<=.1})}function N(){p.forEach(v=>{const{target:C,translate:M,slideLocation:T}=v,E=C();E!==T.get()&&(M.to(E),T.set(E))})}function L(){p.forEach(v=>v.translate.clear())}return{canLoop:j,clear:L,loop:N,loopPoints:p}}function Qn(e,n,o){let s,c=!1;function r(u){if(!o)return;function i(x){for(const f of x)if(f.type==="childList"){u.reInit(),n.emit("slidesChanged");break}}s=new MutationObserver(x=>{c||(Ne(o)||o(u,x))&&i(x)}),s.observe(e,{childList:!0})}function a(){s&&s.disconnect(),c=!0}return{init:r,destroy:a}}function Zn(e,n,o,s){const c={};let r=null,a=null,l,u=!1;function i(){l=new IntersectionObserver(d=>{u||(d.forEach(h=>{const g=n.indexOf(h.target);c[g]=h}),r=null,a=null,o.emit("slidesInView"))},{root:e.parentElement,threshold:s}),n.forEach(d=>l.observe(d))}function x(){l&&l.disconnect(),u=!0}function f(d){return ye(c).reduce((h,g)=>{const m=parseInt(g),{isIntersecting:y}=c[m];return(d&&y||!d&&!y)&&h.push(m),h},[])}function p(d=!0){if(d&&r)return r;if(!d&&a)return a;const h=f(d);return d&&(r=h),d||(a=h),h}return{init:i,destroy:x,get:p}}function Jn(e,n,o,s,c,r){const{measureSize:a,startEdge:l,endEdge:u}=e,i=o[0]&&c,x=d(),f=h(),p=o.map(a),b=g();function d(){if(!i)return 0;const y=o[0];return P(n[l]-y[l])}function h(){if(!i)return 0;const y=r.getComputedStyle(q(s));return parseFloat(y.getPropertyValue(`margin-${u}`))}function g(){return o.map((y,j,N)=>{const L=!j,S=$e(N,j);return L?p[j]+x:S?p[j]+f:N[j+1][l]-y[l]}).map(P)}return{slideSizes:p,slideSizesWithGaps:b,startGap:x,endGap:f}}function Yn(e,n,o,s,c,r,a,l,u){const{startEdge:i,endEdge:x,direction:f}=e,p=qe(o);function b(m,y){return ge(m).filter(j=>j%y===0).map(j=>m.slice(j,j+y))}function d(m){return m.length?ge(m).reduce((y,j,N)=>{const L=q(y)||0,S=L===0,v=j===we(m),C=c[i]-r[L][i],M=c[i]-r[j][x],T=!s&&S?f(a):0,E=!s&&v?f(l):0,V=P(M-E-(C+T));return N&&V>n+u&&y.push(j),v&&y.push(m.length),y},[]).map((y,j,N)=>{const L=Math.max(N[j-1]||0);return m.slice(L,y)}):[]}function h(m){return p?b(m,o):d(m)}return{groupSlides:h}}function Xn(e,n,o,s,c,r,a){const{align:l,axis:u,direction:i,startIndex:x,loop:f,duration:p,dragFree:b,dragThreshold:d,inViewThreshold:h,slidesToScroll:g,skipSnaps:m,containScroll:y,watchResize:j,watchSlides:N,watchDrag:L,watchFocus:S}=r,v=2,C=Tn(),M=C.measure(n),T=o.map(C.measure),E=In(u,i),V=E.measureSize(M),H=Dn(V),$=Ln(l,V),K=!f&&!!y,re=f||!!y,{slideSizes:W,slideSizesWithGaps:Q,startGap:Z,endGap:de}=Jn(E,M,T,o,re,c),G=Yn(E,V,g,f,M,T,Z,de,v),{snaps:le,snapsAligned:ue}=qn(E,$,M,T,G),J=-q(le)+q(Q),{snapsContained:fe,scrollContainLimit:me}=Vn(V,J,ue,y,v),B=K?fe:ue,{limit:F}=Bn(J,B,f),Y=mt(we(B),x,f),R=Y.clone(),A=ge(o),w=({dragHandler:ne,scrollBody:Ee,scrollBounds:Ie,options:{loop:ke}},Ae)=>{ke||Ie.constrain(ne.pointerDown()),Ee.seek(Ae)},I=({scrollBody:ne,translate:Ee,location:Ie,offsetLocation:ke,scrollLooper:Ae,slideLooper:vt,dragHandler:Nt,animation:St,eventHandler:Ze,scrollBounds:Ct,options:{loop:Je}},Ye)=>{const Xe=ne.settled(),Mt=!Ct.shouldConstrain(),We=Je?Xe:Xe&&Mt;We&&!Nt.pointerDown()&&(St.stop(),Ze.emit("settle")),We||Ze.emit("scroll");const Lt=Ie.get()*Ye+ee.get()*(1-Ye);ke.set(Lt),Je&&(Ae.loop(ne.direction()),vt.loop()),Ee.to(ke.get())},D=En(s,c,ne=>w(Le,ne),ne=>I(Le,ne)),z=.68,U=B[Y.get()],X=xe(U),ee=xe(U),te=xe(U),oe=xe(U),he=Fn(X,te,ee,oe,p,z),Ce=$n(f,B,J,F,oe),Me=Kn(D,Y,R,he,Ce,oe,a),Ge=_n(F),Ue=be(),wt=Zn(n,o,a,h),{slideRegistry:Qe}=Hn(K,y,B,me,G,A),kt=Gn(e,o,Qe,Me,he,Ue,a,S),Le={ownerDocument:s,ownerWindow:c,eventHandler:a,containerRect:M,slideRects:T,animation:D,axis:E,dragHandler:An(E,e,s,c,oe,Pn(E,c),X,D,Me,he,Ce,Y,a,H,b,d,m,z,L),eventStore:Ue,percentOfView:H,index:Y,indexPrevious:R,limit:F,location:X,offsetLocation:te,previousLocation:ee,options:r,resizeHandler:On(n,a,c,o,E,j,C),scrollBody:he,scrollBounds:zn(F,te,oe,he,H),scrollLooper:Rn(J,F,te,[X,te,ee,oe]),scrollProgress:Ge,scrollSnapList:B.map(Ge.get),scrollSnaps:B,scrollTarget:Ce,scrollTo:Me,slideLooper:Un(E,V,J,W,Q,le,B,te,o),slideFocus:kt,slidesHandler:Qn(n,a,N),slidesInView:wt,slideIndexes:A,slideRegistry:Qe,slidesToScroll:G,target:oe,translate:ht(E,n)};return Le}function Wn(){let e={},n;function o(i){n=i}function s(i){return e[i]||[]}function c(i){return s(i).forEach(x=>x(n,i)),u}function r(i,x){return e[i]=s(i).concat([x]),u}function a(i,x){return e[i]=s(i).filter(f=>f!==x),u}function l(){e={}}const u={init:o,emit:c,off:a,on:r,clear:l};return u}const es={align:"center",axis:"x",container:null,slides:null,containScroll:"trimSnaps",direction:"ltr",slidesToScroll:1,inViewThreshold:0,breakpoints:{},dragFree:!1,dragThreshold:10,loop:!1,skipSnaps:!1,duration:25,startIndex:0,active:!0,watchDrag:!0,watchResize:!0,watchSlides:!0,watchFocus:!0};function ts(e){function n(r,a){return ft(r,a||{})}function o(r){const a=r.breakpoints||{},l=ye(a).filter(u=>e.matchMedia(u).matches).map(u=>a[u]).reduce((u,i)=>n(u,i),{});return n(r,l)}function s(r){return r.map(a=>ye(a.breakpoints||{})).reduce((a,l)=>a.concat(l),[]).map(e.matchMedia)}return{mergeOptions:n,optionsAtMedia:o,optionsMediaQueries:s}}function ns(e){let n=[];function o(r,a){return n=a.filter(({options:l})=>e.optionsAtMedia(l).active!==!1),n.forEach(l=>l.init(r,e)),a.reduce((l,u)=>Object.assign(l,{[u.name]:u}),{})}function s(){n=n.filter(r=>r.destroy())}return{init:o,destroy:s}}function ve(e,n,o){const s=e.ownerDocument,c=s.defaultView,r=ts(c),a=ns(r),l=be(),u=Wn(),{mergeOptions:i,optionsAtMedia:x,optionsMediaQueries:f}=r,{on:p,off:b,emit:d}=u,h=E;let g=!1,m,y=i(es,ve.globalOptions),j=i(y),N=[],L,S,v;function C(){const{container:A,slides:w}=j;S=(De(A)?e.querySelector(A):A)||e.children[0];const D=De(w)?S.querySelectorAll(w):w;v=[].slice.call(D||S.children)}function M(A){const w=Xn(e,S,v,s,c,A,u);if(A.loop&&!w.slideLooper.canLoop()){const I=Object.assign({},A,{loop:!1});return M(I)}return w}function T(A,w){g||(y=i(y,A),j=x(y),N=w||N,C(),m=M(j),f([y,...N.map(({options:I})=>I)]).forEach(I=>l.add(I,"change",E)),j.active&&(m.translate.to(m.location.get()),m.animation.init(),m.slidesInView.init(),m.slideFocus.init(R),m.eventHandler.init(R),m.resizeHandler.init(R),m.slidesHandler.init(R),m.options.loop&&m.slideLooper.loop(),S.offsetParent&&v.length&&m.dragHandler.init(R),L=a.init(R,N)))}function E(A,w){const I=G();V(),T(i({startIndex:I},A),w),u.emit("reInit")}function V(){m.dragHandler.destroy(),m.eventStore.clear(),m.translate.clear(),m.slideLooper.clear(),m.resizeHandler.destroy(),m.slidesHandler.destroy(),m.slidesInView.destroy(),m.animation.destroy(),a.destroy(),l.clear()}function H(){g||(g=!0,l.clear(),V(),u.emit("destroy"),u.clear())}function $(A,w,I){!j.active||g||(m.scrollBody.useBaseFriction().useDuration(w===!0?0:j.duration),m.scrollTo.index(A,I||0))}function K(A){const w=m.index.add(1).get();$(w,A,-1)}function re(A){const w=m.index.add(-1).get();$(w,A,1)}function W(){return m.index.add(1).get()!==G()}function Q(){return m.index.add(-1).get()!==G()}function Z(){return m.scrollSnapList}function de(){return m.scrollProgress.get(m.location.get())}function G(){return m.index.get()}function le(){return m.indexPrevious.get()}function ue(){return m.slidesInView.get()}function J(){return m.slidesInView.get(!1)}function fe(){return L}function me(){return m}function B(){return e}function F(){return S}function Y(){return v}const R={canScrollNext:W,canScrollPrev:Q,containerNode:F,internalEngine:me,destroy:H,off:b,on:p,emit:d,plugins:fe,previousScrollSnap:le,reInit:h,rootNode:B,scrollNext:K,scrollPrev:re,scrollProgress:de,scrollSnapList:Z,scrollTo:$,selectedScrollSnap:G,slideNodes:Y,slidesInView:ue,slidesNotInView:J};return T(n,o),setTimeout(()=>u.emit("init"),0),R}ve.globalOptions=void 0;function Ke(e={},n=[]){const o=k.useRef(e),s=k.useRef(n),[c,r]=k.useState(),[a,l]=k.useState(),u=k.useCallback(()=>{c&&c.reInit(o.current,s.current)},[c]);return k.useEffect(()=>{_e(o.current,e)||(o.current=e,u())},[e,u]),k.useEffect(()=>{Cn(s.current,n)||(s.current=n,u())},[n,u]),k.useEffect(()=>{if(Sn()&&a){ve.globalOptions=Ke.globalOptions;const i=ve(a,o.current,s.current);return r(i),()=>i.destroy()}else r(void 0)},[a,r]),[l,c]}Ke.globalOptions=void 0;const xt=k.createContext(null);function Se(){const e=k.useContext(xt);if(!e)throw new Error("useCarousel must be used within a <Carousel />");return e}const pt=k.forwardRef(({orientation:e="horizontal",opts:n,setApi:o,plugins:s,className:c,children:r,...a},l)=>{const[u,i]=Ke({...n,axis:e==="horizontal"?"x":"y"},s),[x,f]=k.useState(!1),[p,b]=k.useState(!1),d=k.useCallback(y=>{y&&(f(y.canScrollPrev()),b(y.canScrollNext()))},[]),h=k.useCallback(()=>{i==null||i.scrollPrev()},[i]),g=k.useCallback(()=>{i==null||i.scrollNext()},[i]),m=k.useCallback(y=>{y.key==="ArrowLeft"?(y.preventDefault(),h()):y.key==="ArrowRight"&&(y.preventDefault(),g())},[h,g]);return k.useEffect(()=>{!i||!o||o(i)},[i,o]),k.useEffect(()=>{if(i)return d(i),i.on("reInit",d),i.on("select",d),()=>{i==null||i.off("select",d)}},[i,d]),t.jsx(xt.Provider,{value:{carouselRef:u,api:i,opts:n,orientation:e||((n==null?void 0:n.axis)==="y"?"vertical":"horizontal"),scrollPrev:h,scrollNext:g,canScrollPrev:x,canScrollNext:p},children:t.jsx("div",{ref:l,onKeyDownCapture:m,className:je("relative",c),role:"region","aria-roledescription":"carousel",...a,children:r})})});pt.displayName="Carousel";const gt=k.forwardRef(({className:e,...n},o)=>{const{carouselRef:s,orientation:c}=Se();return t.jsx("div",{ref:s,className:"overflow-hidden",children:t.jsx("div",{ref:o,className:je("flex",c==="horizontal"?"-ml-4":"-mt-4 flex-col",e),...n})})});gt.displayName="CarouselContent";const yt=k.forwardRef(({className:e,...n},o)=>{const{orientation:s}=Se();return t.jsx("div",{ref:o,role:"group","aria-roledescription":"slide",className:je("min-w-0 shrink-0 grow-0 basis-full",s==="horizontal"?"pl-4":"pt-4",e),...n})});yt.displayName="CarouselItem";const bt=k.forwardRef(({className:e,variant:n="outline",size:o="icon",...s},c)=>{const{orientation:r,scrollPrev:a,canScrollPrev:l}=Se();return t.jsxs(ie,{ref:c,variant:n,size:o,className:je("absolute  h-8 w-8 rounded-full",r==="horizontal"?"-left-12 top-1/2 -translate-y-1/2":"-top-12 left-1/2 -translate-x-1/2 rotate-90",e),disabled:!l,onClick:a,...s,children:[t.jsx(Pt,{className:"h-4 w-4"}),t.jsx("span",{className:"sr-only",children:"Previous slide"})]})});bt.displayName="CarouselPrevious";const jt=k.forwardRef(({className:e,variant:n="outline",size:o="icon",...s},c)=>{const{orientation:r,scrollNext:a,canScrollNext:l}=Se();return t.jsxs(ie,{ref:c,variant:n,size:o,className:je("absolute h-8 w-8 rounded-full",r==="horizontal"?"-right-12 top-1/2 -translate-y-1/2":"-bottom-12 left-1/2 -translate-x-1/2 rotate-90",e),disabled:!l,onClick:a,...s,children:[t.jsx(tn,{className:"h-4 w-4"}),t.jsx("span",{className:"sr-only",children:"Next slide"})]})});jt.displayName="CarouselNext";const ss=({carId:e,mainImageUrl:n})=>{const{data:o,isLoading:s}=Fe({queryKey:["car-images",e],queryFn:async()=>{console.log("Fetching images for car:",e);const{data:c,error:r}=await se.from("car_images").select("*").eq("car_id",e);if(r)throw console.error("Error fetching car images:",r),r;const a=n?[{id:"main",image_url:n},...c||[]]:c||[];return console.log("Retrieved images:",a),a}});return s?t.jsx(ae,{className:"w-full h-64 rounded-lg"}):o!=null&&o.length?t.jsxs(pt,{className:"w-full",children:[t.jsx(gt,{children:o.map(c=>t.jsx(yt,{children:t.jsx("img",{src:c.image_url,alt:"Car",className:"w-full h-64 object-cover rounded-lg"})},c.id))}),t.jsx(bt,{className:"left-2"}),t.jsx(jt,{className:"right-2"})]}):t.jsx("div",{className:"w-full h-64 bg-muted rounded-lg flex items-center justify-center",children:t.jsx("p",{className:"text-muted-foreground",children:"No images available"})})},rs=({car:e})=>{const[n,o]=k.useState(!1),[s,c]=k.useState(0),[r,a]=k.useState("");Tt();const{data:l,isLoading:u}=Fe({queryKey:["car-reviews",e.id],queryFn:async()=>{console.log("Fetching reviews for car:",e.id);const{data:i,error:x}=await se.from("reviews").select(`
          *,
          reviewer:profiles!reviewer_id (
            full_name,
            avatar_url
          )
        `).eq("car_id",e.id).eq("review_type","car").order("created_at",{ascending:!1});if(x)throw console.error("Error fetching reviews:",x),x;return console.log("Retrieved reviews:",i),i}});return t.jsxs(ze,{className:"dark:bg-gray-800 dark:border-gray-700",children:[t.jsx(Ve,{className:"pb-2",children:t.jsxs(Be,{className:"text-lg flex items-center justify-between dark:text-white",children:[t.jsx("div",{className:"flex items-center gap-2",children:t.jsx("span",{className:"text-base text-left text-muted-foreground dark:text-white font-medium",children:"Reviews"})}),t.jsxs("span",{className:"text-sm font-normal text-muted-foreground",children:[(l==null?void 0:l.length)||0," ",(l==null?void 0:l.length)===1?"review":"reviews"]})]})}),t.jsx(Re,{children:t.jsxs("div",{className:"space-y-4",children:[(l==null?void 0:l.length)===0&&t.jsx("div",{className:"text-center py-6",children:t.jsx("span",{className:"text-xs md:text-sm text-muted-foreground",children:"No reviews yet"})}),l==null?void 0:l.map(i=>t.jsxs("div",{className:"border rounded-lg p-4 dark:border-gray-700",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("img",{src:i.reviewer.avatar_url?se.storage.from("avatars").getPublicUrl(i.reviewer.avatar_url).data.publicUrl:"/placeholder.svg",alt:i.reviewer.full_name,className:"w-8 h-8 rounded-full object-cover"}),t.jsx("span",{className:"font-medium",children:i.reviewer.full_name})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex gap-0.5 mr-2",children:Array.from({length:i.rating}).map((x,f)=>t.jsx(nn,{className:"h-4 w-4 text-yellow-500",fill:"currentColor"},f))}),t.jsx("span",{className:"text-xs text-muted-foreground",children:i.created_at?sn(new Date(i.created_at),"MMM d, yyyy"):""})]})]}),i.comment&&t.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:i.comment})]},i.id))]})})]})},os=({latitude:e,longitude:n,location:o,mapStyle:s="mapbox://styles/mapbox/streets-v12"})=>{const c=k.useRef(null),r=k.useRef(null),a=k.useRef(null),l=k.useRef(!1),[u,i]=k.useState(null),[x,f]=k.useState(!0),p="mapbox://styles/mapbox/light-v11";return k.useEffect(()=>{(async()=>{try{const d=await Dt();if(!d){_.error("Failed to get the map token");return}i(d),f(!1)}catch(d){console.error("Error getting Mapbox token:",d),_.error("Failed to load map configuration")}})()},[]),k.useEffect(()=>{if(x||!c.current)return;const b=c.current;if(b.offsetWidth===0||b.offsetHeight===0){console.error("Map container has zero width or height");return}if(console.log("Initializing map with coordinates:",{longitude:n,latitude:e}),u)Te.accessToken=u;else{console.error("No Mapbox token available");return}try{r.current=new Te.Map({container:c.current,style:s||p,center:[n,e],zoom:13,interactive:!1}),r.current.on("load",()=>{console.log("Map loaded successfully"),a.current=new Te.Marker({color:"#7C3AED"}).setLngLat([n,e]).addTo(r.current),l.current=!0}),r.current.on("style.load",()=>{console.log("Map style loaded successfully")}),r.current.on("error",d=>{var h;console.error("Map error:",d),_.error("Error loading location map"),d.error&&d.error.message.includes("style")&&s!==p&&(console.log("Attempting to load fallback style"),(h=r.current)==null||h.setStyle(p))})}catch(d){console.error("Error initializing map:",d),_.error("Could not initialize location map")}return()=>{r.current&&(r.current.remove(),r.current=null,a.current=null,l.current=!1)}},[e,n,u,s,x]),k.useEffect(()=>{r.current&&l.current&&a.current&&(r.current.setCenter([n,e]),a.current.setLngLat([n,e]))},[e,n]),k.useEffect(()=>{r.current&&l.current&&r.current.setStyle(s||p)},[s]),t.jsxs(ze,{className:"dark:bg-gray-800 dark:border-gray-700",children:[t.jsx(Ve,{className:"pb-2",children:t.jsx(Be,{className:"text-base text-left text-muted-foreground dark:text-white font-medium",children:"Location"})}),t.jsxs(Re,{children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx(dt,{size:16,className:"text-red-500 "}),t.jsx("p",{className:"text-xs md:text-sm text-left text-muted-foreground dark:text-gray-300",children:o})]}),t.jsx("div",{ref:c,className:"w-full h-40 rounded-md overflow-hidden border border-muted dark:border-gray-700"})]})]})},Rs=()=>{var l,u;const{carId:e}=lt(),{theme:n}=Ot(),o=rn.useUser(),{data:s,isLoading:c,error:r}=Fe({queryKey:["car",e],queryFn:async()=>{console.log("Fetching car details for ID:",e);const{data:i,error:x}=await se.from("cars").select(`
          *,
          profiles:owner_id (
            full_name,
            avatar_url
          )
        `).eq("id",e).maybeSingle();if(x)throw console.error("Error fetching car:",x),x;return console.log("Car details fetched:",i),o&&(console.log("Current user ID:",o.id),console.log("Car owner ID:",i.owner_id),console.log("Is owner check:",o.id===i.owner_id)),i}});if(c)return t.jsxs("div",{className:"min-h-screen bg-background dark:bg-gray-900",children:[t.jsxs("div",{className:"container mx-auto",children:[t.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[200px] w-full p-4",children:[t.jsx("p",{className:"text-sm text-muted-foreground dark:text-gray-400 mb-3",children:"Loading vehicle details..."}),t.jsx(Ft,{color:"#7c3aed",width:100})]}),t.jsxs("div",{className:"space-y-4 p-4 mt-4",children:[t.jsx(ae,{className:"h-64 w-full bg-gray-200 dark:bg-gray-700"}),t.jsx(ae,{className:"h-8 w-3/4 bg-gray-200 dark:bg-gray-700"}),t.jsx(ae,{className:"h-4 w-1/2 bg-gray-200 dark:bg-gray-700"}),t.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[t.jsx(ae,{className:"h-20 bg-gray-200 dark:bg-gray-700"}),t.jsx(ae,{className:"h-20 bg-gray-200 dark:bg-gray-700"}),t.jsx(ae,{className:"h-20 bg-gray-200 dark:bg-gray-700"})]})]})]}),t.jsx(Pe,{})]});if(r||!s)return t.jsxs("div",{className:"min-h-screen bg-background dark:bg-gray-900",children:[t.jsx("div",{className:"container mx-auto",children:t.jsxs("div",{className:"p-4 text-center space-y-4",children:[t.jsx(zt,{className:"h-12 w-12 text-red-500 mx-auto"}),t.jsx("h2",{className:"text-xl font-semibold text-red-500",children:"Error loading vehicle details"}),t.jsx("p",{className:"text-muted-foreground dark:text-gray-400",children:"Please try again later"})]})}),t.jsx(Pe,{})]});const a=((l=s.profiles)==null?void 0:l.avatar_url)||null;return t.jsxs("div",{className:"min-h-screen bg-background dark:bg-gray-900 pb-20",children:[t.jsx("div",{className:"container mx-auto",children:t.jsxs("div",{className:"space-y-4 p-4",children:[t.jsx(ss,{carId:s.id,mainImageUrl:s.image_url}),t.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[t.jsx(wn,{brand:s.brand,model:s.model,year:s.year,location:s.location,pricePerDay:s.price_per_day}),t.jsx(vn,{pricePerDay:s.price_per_day,transmission:s.transmission,seats:s.seats,features:s.features}),s.description&&t.jsx(Wt,{description:s.description}),t.jsx(os,{latitude:s.latitude,longitude:s.longitude,location:s.location,mapStyle:n==="dark"?"mapbox://styles/mapbox/dark-v11":"mapbox://styles/mapbox/light-v11"}),t.jsx(en,{ownerName:((u=s.profiles)==null?void 0:u.full_name)||"Car Owner",avatarUrl:a,ownerId:s.owner_id}),t.jsx(rs,{car:s})]}),t.jsx(jn,{car:s})]})}),t.jsx(Pe,{})]})};export{Rs as default};
