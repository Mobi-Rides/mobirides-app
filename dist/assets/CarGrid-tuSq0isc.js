import{a as j,j as e}from"./query-vendor-C7aRRP05.js";import{r as g,u as v}from"./react-vendor-mnpoGfEl.js";import{C as N}from"./card-BUcHLe5F.js";import{H as k,C as b,u as w,s as C}from"./savedCarService-zjKfyRWj.js";import{S}from"./separator-D8Khi2T_.js";import{c as F,U as q}from"./index-6IS4AKTX.js";import{S as x}from"./star-CtuliYYI.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=F("Fuel",[["line",{x1:"3",x2:"15",y1:"22",y2:"22",key:"xegly4"}],["line",{x1:"4",x2:"14",y1:"9",y2:"9",key:"xcnuvu"}],["path",{d:"M14 22V4a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v18",key:"16j0yd"}],["path",{d:"M14 13h2a2 2 0 0 1 2 2v2a2 2 0 0 0 2 2a2 2 0 0 0 2-2V9.83a2 2 0 0 0-.59-1.42L18 5",key:"7cu91f"}]]),L=({car:s})=>{const[m,n]=g.useState(s.isSaved??!1),[r,d]=g.useState(!1),o=v(),l=j(),u=()=>{o(`/cars/${s.id}`)},c=async t=>{if(t.stopPropagation(),!r){d(!0);try{m?await w(s.id)&&(n(!1),l.invalidateQueries({queryKey:["saved-cars-full"]}),l.invalidateQueries({queryKey:["saved-car-ids"]})):await C(s.id)&&(n(!0),l.invalidateQueries({queryKey:["saved-cars-full"]}),l.invalidateQueries({queryKey:["saved-car-ids"]}))}finally{d(!1)}}},h=t=>t<=2?"Sports":t<=5?"Sedan":t<=7?"SUV":"Van",y=t=>{const i=[],f=Math.floor(t),p=t%1!==0;for(let a=0;a<5;a++)a<f?i.push(e.jsx(x,{className:"w-3 h-3 fill-yellow-400 text-yellow-400"},a)):a===f&&p?i.push(e.jsx(x,{className:"w-3 h-3 fill-yellow-400/50 text-yellow-400"},a)):i.push(e.jsx(x,{className:"w-3 h-3 text-gray-300 dark:text-gray-600"},a));return i};return e.jsxs(N,{className:"overflow-hidden cursor-pointer transition-transform hover:scale-[1.02] h-auto min-h-[20rem] sm:h-[24rem] dark:bg-gray-800 dark:border-gray-700",onClick:u,children:[e.jsxs("div",{className:"relative h-40 sm:h-48",children:[e.jsx("img",{src:s.image_url,alt:`${s.brand} ${s.model}`,className:"w-full h-full object-cover",onError:t=>{t.target.src="/placeholder-car.jpg"}}),e.jsx("button",{onClick:c,className:"absolute top-2 right-2 p-2 bg-white dark:bg-gray-800 rounded-full shadow-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",disabled:r,children:e.jsx(k,{className:`w-5 h-5 ${r?"text-gray-400":m?"fill-red-500 text-red-500":"text-gray-600"}`})})]}),e.jsxs("div",{className:"p-3 sm:p-4 flex flex-col flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"px-3 py-1 rounded-md text-xs md:text-sm bg-[#F1F0FB] dark:bg-[#352a63] text-[#7C3AED] dark:text-[#a87df8] w-fit",children:h(s.seats)}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"flex items-center",children:y(s.rating||0)}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:(s.rating||0).toFixed(1)})]})]}),e.jsxs("div",{className:"flex justify-between items-start mb-2 min-h-[3rem]",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("h3",{className:"font-semibold text-left break-words line-clamp-2 text-sm md:text-base dark:text-white",children:[s.brand," ",s.model]})}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-bold text-lg text-primary dark:text-primary-foreground",children:["P",s.price_per_day]}),e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:"/day"})]})]}),e.jsx(S,{className:"w-full my-2 sm:my-3 dark:bg-gray-700"}),e.jsxs("div",{className:"grid grid-cols-3 gap-1 sm:gap-2 mb-3 sm:mb-4 text-[0.7rem] sm:text-sm",children:[e.jsxs("div",{className:"flex items-center justify-left gap-1 text-sm text-gray-400 dark:text-gray-300",children:[e.jsx(b,{className:"w-4 h-4 text-primary dark:text-primary-foreground"}),s.transmission]}),e.jsxs("div",{className:"flex items-center justify-left gap-1 text-sm text-gray-400 dark:text-gray-300",children:[e.jsx(E,{className:"w-4 h-4 text-primary dark:text-primary-foreground"}),s.fuel]}),e.jsxs("div",{className:"flex items-center justify-left gap-1 text-sm text-gray-400 dark:text-gray-300",children:[e.jsx(q,{className:"w-4 h-4 text-primary dark:text-primary-foreground"}),s.seats," Seats"]})]})]})]})},U=({cars:s,hasMoreItems:m,isLoading:n,error:r,loadMoreRef:d,onLoadMore:o,isFetchingNextPage:l,isAuthenticated:u})=>n?e.jsx("div",{className:"text-center mt-8",children:e.jsx("p",{className:"text-muted-foreground",children:"Loading cars..."})}):r?e.jsx("div",{className:"text-center mt-8",children:e.jsxs("p",{className:"text-red-500",children:["Error loading cars: ",r.message]})}):s.length===0?e.jsx("div",{className:"text-center mt-8",children:e.jsx("p",{className:"text-muted-foreground",children:"No cars found"})}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[s.map(c=>e.jsx(L,{car:c},c.id)),d&&e.jsx("div",{ref:d,className:"col-span-full h-10 flex items-center justify-center",children:l&&e.jsx("p",{className:"text-muted-foreground",children:"Loading more..."})})]});export{U as C};
