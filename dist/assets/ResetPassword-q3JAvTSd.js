import{c as g,r as t,k,j as s,g as m,I as u,B as i,s as w,J as d}from"./index-B1v-fdDy.js";import{E as x}from"./eye-LbV3jpij.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f=g("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y=g("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),C=()=>{const[p,h]=t.useState(!1),[r,j]=t.useState(""),[l,N]=t.useState(""),[o,v]=t.useState(!1),[n,b]=t.useState(!1),c=k();t.useEffect(()=>{(async()=>{const{data:e}=await w.auth.getSession();e.session||(d.error("Invalid or expired reset link"),c("/login"))})()},[c]);const P=async a=>{if(a.preventDefault(),r!==l){d.error("Passwords do not match");return}try{h(!0);const{error:e}=await w.auth.updateUser({password:r});if(e)throw e;d.success("Password updated successfully"),c("/login")}catch(e){console.error("Error updating password:",e),d.error(e instanceof Error?e.message:"Failed to update password")}finally{h(!1)}};return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-md w-full space-y-8",children:[s.jsxs("div",{children:[s.jsx("img",{src:"/lovable-uploads/a065be26-80b7-4e50-b683-b6afb0add925.png",alt:"Mobirides Logo",className:"mx-auto h-48 w-48"}),s.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Reset your password"}),s.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Enter a new password for your account"})]}),s.jsxs("form",{onSubmit:P,className:"mt-8 space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(m,{htmlFor:"password",children:"New Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(y,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),s.jsx(u,{id:"password",type:o?"text":"password",placeholder:"Enter new password",value:r,onChange:a=>j(a.target.value),className:"pl-10 pr-10",required:!0}),s.jsxs(i,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full px-3 py-2 text-muted-foreground hover:text-foreground",onClick:()=>v(!o),children:[o?s.jsx(f,{className:"h-4 w-4"}):s.jsx(x,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:o?"Hide password":"Show password"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(m,{htmlFor:"confirmPassword",children:"Confirm New Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(y,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),s.jsx(u,{id:"confirmPassword",type:n?"text":"password",placeholder:"Confirm new password",value:l,onChange:a=>N(a.target.value),className:"pl-10 pr-10",required:!0}),s.jsxs(i,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full px-3 py-2 text-muted-foreground hover:text-foreground",onClick:()=>b(!n),children:[n?s.jsx(f,{className:"h-4 w-4"}):s.jsx(x,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:n?"Hide password":"Show password"})]})]})]})]}),s.jsx(i,{type:"submit",className:"w-full",disabled:p||!r||!l,children:p?"Updating...":"Reset Password"})]})]})})};export{C as default};
