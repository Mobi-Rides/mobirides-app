import{a as f,j as e}from"./query-vendor-Bsfdn-Hb.js";import{r as o,u as g}from"./react-vendor-mnpoGfEl.js";import{C as y}from"./card-CixI4yIN.js";import{H as h,C as p,u as j,s as v}from"./savedCarService-B13M8kY4.js";import{S as N}from"./separator-BvlX9Scn.js";import{c as k,U as b}from"./index-DIwI39m3.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=k("Fuel",[["line",{x1:"3",x2:"15",y1:"22",y2:"22",key:"xegly4"}],["line",{x1:"4",x2:"14",y1:"9",y2:"9",key:"xcnuvu"}],["path",{d:"M14 22V4a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v18",key:"16j0yd"}],["path",{d:"M14 13h2a2 2 0 0 1 2 2v2a2 2 0 0 0 2 2a2 2 0 0 0 2-2V9.83a2 2 0 0 0-.59-1.42L18 5",key:"7cu91f"}]]),w=({car:s})=>{const[n,l]=o.useState(s.isSaved??!1),[r,i]=o.useState(!1),c=g(),t=f(),m=()=>{c(`/cars/${s.id}`)},d=async a=>{if(a.stopPropagation(),!r){i(!0);try{n?await j(s.id)&&(l(!1),t.invalidateQueries({queryKey:["saved-cars-full"]}),t.invalidateQueries({queryKey:["saved-car-ids"]})):await v(s.id)&&(l(!0),t.invalidateQueries({queryKey:["saved-cars-full"]}),t.invalidateQueries({queryKey:["saved-car-ids"]}))}finally{i(!1)}}},x=a=>a<=2?"Sports":a<=5?"Sedan":a<=7?"SUV":"Van";return e.jsxs(y,{className:"overflow-hidden cursor-pointer transition-transform hover:scale-[1.02] h-auto min-h-[20rem] sm:h-[24rem] dark:bg-gray-800 dark:border-gray-700",onClick:m,children:[e.jsxs("div",{className:"relative h-40 sm:h-48",children:[e.jsx("img",{src:s.image_url,alt:`${s.brand} ${s.model}`,className:"w-full h-full object-cover",onError:a=>{a.target.src="/placeholder-car.jpg"}}),e.jsx("button",{onClick:d,className:"absolute top-2 right-2 p-2 bg-white dark:bg-gray-800 rounded-full shadow-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",disabled:r,children:e.jsx(h,{className:`w-5 h-5 ${r?"text-gray-400":n?"fill-red-500 text-red-500":"text-gray-600"}`})})]}),e.jsxs("div",{className:"p-3 sm:p-4 flex flex-col flex-1",children:[e.jsx("span",{className:"px-3 py-1 rounded-md text-xs md:text-sm bg-[#F1F0FB] dark:bg-[#352a63] text-[#7C3AED] dark:text-[#a87df8] w-fit mb-2",children:x(s.seats)}),e.jsxs("div",{className:"flex justify-between items-start mb-2 min-h-[3rem]",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("h3",{className:"font-semibold text-left break-words line-clamp-2 text-sm md:text-base dark:text-white",children:[s.brand," ",s.model]})}),e.jsx("div",{className:"text-right ml-2",children:e.jsxs("div",{className:"flex items-center gap-1 justify-end",children:[e.jsxs("p",{className:"font-semibold whitespace-nowrap text-primary dark:text-primary-foreground",children:["BWP ",s.price_per_day]}),e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:"/day"})]})})]}),e.jsx(N,{className:"w-full my-2 sm:my-3 dark:bg-gray-700"}),e.jsxs("div",{className:"grid grid-cols-3 gap-1 sm:gap-2 mb-3 sm:mb-4 text-[0.7rem] sm:text-sm",children:[e.jsxs("div",{className:"flex items-center justify-left gap-1 text-sm text-gray-400 dark:text-gray-300",children:[e.jsx(p,{className:"w-4 h-4 text-primary dark:text-primary-foreground"}),s.transmission]}),e.jsxs("div",{className:"flex items-center justify-left gap-1 text-sm text-gray-400 dark:text-gray-300",children:[e.jsx(C,{className:"w-4 h-4 text-primary dark:text-primary-foreground"}),s.fuel]}),e.jsxs("div",{className:"flex items-center justify-left gap-1 text-sm text-gray-400 dark:text-gray-300",children:[e.jsx(b,{className:"w-4 h-4 text-primary dark:text-primary-foreground"}),s.seats," Seats"]})]})]})]})},I=({cars:s,hasMoreItems:n,isLoading:l,error:r,loadMoreRef:i,onLoadMore:c,isFetchingNextPage:t,isAuthenticated:m})=>l?e.jsx("div",{className:"text-center mt-8",children:e.jsx("p",{className:"text-muted-foreground",children:"Loading cars..."})}):r?e.jsx("div",{className:"text-center mt-8",children:e.jsxs("p",{className:"text-red-500",children:["Error loading cars: ",r.message]})}):s.length===0?e.jsx("div",{className:"text-center mt-8",children:e.jsx("p",{className:"text-muted-foreground",children:"No cars found"})}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[s.map(d=>e.jsx(w,{car:d},d.id)),i&&e.jsx("div",{ref:i,className:"col-span-full h-10 flex items-center justify-center",children:t&&e.jsx("p",{className:"text-muted-foreground",children:"Loading more..."})})]});export{I as C};
