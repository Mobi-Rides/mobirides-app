import{u as y,j as e}from"./query-vendor-Bsfdn-Hb.js";import{a3 as w,L as k,B as j,n as v,s as C}from"./index-DIwI39m3.js";import{C as i,a as c,b as l,d as o}from"./card-CixI4yIN.js";import{k as _,N as f}from"./react-vendor-mnpoGfEl.js";import{C as B}from"./calendar-CTQ9n6gm.js";import{C as p}from"./clock-BiQSirFY.js";import{D}from"./dollar-sign-Cl-j6ONT.js";import{C as P}from"./car-C76bGp2A.js";import{M as I}from"./map-pin-CT3A4T4Q.js";import{U as L}from"./user-73y0UjJF.js";import{a as q}from"./date-vendor-Dhms5dOu.js";import"./supabase-vendor-BOn0LdFJ.js";import"./mapbox-vendor-fnXFVHMy.js";const z=()=>{var m,x;const{id:t}=_(),{user:a}=w(),{data:s,isLoading:u,error:N}=y({queryKey:["booking",t],queryFn:async()=>{if(!t)throw new Error("Booking ID is required");const{data:r,error:h}=await C.from("bookings").select(`
          *,
          cars (*),
          renter:profiles!bookings_renter_id_fkey (*),
          host:profiles!bookings_host_id_fkey (*)
        `).eq("id",t).single();if(h)throw h;return r},enabled:!!t});if(!t)return e.jsx(f,{to:"/bookings",replace:!0});if(u)return e.jsx(k,{});if(N||!s)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Booking Not Found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"The booking you're looking for doesn't exist or you don't have permission to view it."}),e.jsx(j,{onClick:()=>window.history.back(),children:"Go Back"})]})});const d=(a==null?void 0:a.id)===s.renter_id,g=(a==null?void 0:a.id)===((m=s.cars)==null?void 0:m.owner_id);if(!d&&!g)return e.jsx(f,{to:"/bookings",replace:!0});const b=r=>{switch(r){case"confirmed":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"cancelled":return"bg-red-100 text-red-800";case"completed":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},n=r=>q(new Date(r),"PPP p");return e.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-4xl",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx(j,{variant:"outline",onClick:()=>window.history.back(),className:"mb-4",children:"‚Üê Back"}),e.jsx("h1",{className:"text-3xl font-bold",children:"Booking Details"})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(i,{children:[e.jsx(c,{children:e.jsxs(l,{className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-5 w-5"}),"Booking Information"]})}),e.jsxs(o,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:"Status:"}),e.jsx(v,{className:b(s.status),children:s.status.charAt(0).toUpperCase()+s.status.slice(1)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:"Booking ID:"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["#",s.id]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(p,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:"Start:"}),e.jsx("span",{children:n(s.start_date)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(p,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:"End:"}),e.jsx("span",{children:n(s.end_date)})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"font-medium flex items-center gap-2",children:[e.jsx(D,{className:"h-4 w-4"}),"Total Amount:"]}),e.jsxs("span",{className:"font-bold text-lg",children:["P",s.total_price]})]})]})]}),s.cars&&e.jsxs(i,{children:[e.jsx(c,{children:e.jsxs(l,{className:"flex items-center gap-2",children:[e.jsx(P,{className:"h-5 w-5"}),"Vehicle Details"]})}),e.jsxs(o,{className:"space-y-4",children:[e.jsx("div",{children:e.jsxs("h3",{className:"font-semibold text-lg",children:[s.cars.year," ",s.cars.brand," ",s.cars.model]})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:"Daily Rate:"}),e.jsxs("span",{children:["P",s.cars.price_per_day,"/day"]})]}),((x=s.cars)==null?void 0:x.location)&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(I,{className:"h-4 w-4 mt-1"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Pickup Location:"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.cars.location})]})]})]})]}),e.jsxs(i,{children:[e.jsx(c,{children:e.jsxs(l,{className:"flex items-center gap-2",children:[e.jsx(L,{className:"h-5 w-5"}),d?"Host Information":"Renter Information"]})}),e.jsx(o,{className:"space-y-4",children:e.jsx("div",{className:"text-center text-muted-foreground",children:e.jsx("p",{children:"Contact information will be available once the booking is confirmed."})})})]}),e.jsxs(i,{children:[e.jsx(c,{children:e.jsx(l,{children:"Additional Information"})}),e.jsxs(o,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:"Created:"}),e.jsx("span",{className:"text-sm",children:n(s.created_at)})]}),s.updated_at&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:"Last Updated:"}),e.jsx("span",{className:"text-sm",children:n(s.updated_at)})]})]})]})]})]})};export{z as BookingDetails,z as default};
