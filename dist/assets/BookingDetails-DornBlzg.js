import{u as g,j as e}from"./query-vendor-Bsfdn-Hb.js";import{a3 as b,L as y,B as h,n as w,s as k}from"./index-CEKMvnhM.js";import{C as i,a as c,b as l,d}from"./card-DVWWM3IP.js";import{k as v,N as j}from"./react-vendor-mnpoGfEl.js";import{C as _}from"./calendar-BxEe8nw1.js";import{C as f}from"./clock-BYxaZ7Am.js";import{D as C}from"./dollar-sign-CUzFtw-3.js";import{C as B}from"./car-CVWSXvWw.js";import{M as P}from"./map-pin-DSx0xkt_.js";import{U as D}from"./user-C-qQU3Ry.js";import{a as I}from"./date-vendor-Dhms5dOu.js";import"./supabase-vendor-BOn0LdFJ.js";import"./mapbox-vendor-fnXFVHMy.js";const K=()=>{const{id:t}=v(),{user:a}=b(),{data:s,isLoading:p,error:u}=g({queryKey:["booking",t],queryFn:async()=>{if(!t)throw new Error("Booking ID is required");const{data:n,error:x}=await k.from("bookings").select(`
          *,
          cars (*),
          renter:profiles!bookings_renter_id_fkey (*),
          host:profiles!bookings_host_id_fkey (*)
        `).eq("id",t).single();if(x)throw x;return n},enabled:!!t});if(!t)return e.jsx(j,{to:"/bookings",replace:!0});if(p)return e.jsx(y,{});if(u||!s)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Booking Not Found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"The booking you're looking for doesn't exist or you don't have permission to view it."}),e.jsx(h,{onClick:()=>window.history.back(),children:"Go Back"})]})});const o=(a==null?void 0:a.id)===s.renter_id,m=(a==null?void 0:a.id)===s.host_id;if(!o&&!m)return e.jsx(j,{to:"/bookings",replace:!0});const N=n=>{switch(n){case"confirmed":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"cancelled":return"bg-red-100 text-red-800";case"completed":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},r=n=>I(new Date(n),"PPP p");return e.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-4xl",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx(h,{variant:"outline",onClick:()=>window.history.back(),className:"mb-4",children:"‚Üê Back"}),e.jsx("h1",{className:"text-3xl font-bold",children:"Booking Details"})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(i,{children:[e.jsx(c,{children:e.jsxs(l,{className:"flex items-center gap-2",children:[e.jsx(_,{className:"h-5 w-5"}),"Booking Information"]})}),e.jsxs(d,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:"Status:"}),e.jsx(w,{className:N(s.status),children:s.status.charAt(0).toUpperCase()+s.status.slice(1)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:"Booking ID:"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["#",s.id]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(f,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:"Start:"}),e.jsx("span",{children:r(s.start_date)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(f,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:"End:"}),e.jsx("span",{children:r(s.end_date)})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"font-medium flex items-center gap-2",children:[e.jsx(C,{className:"h-4 w-4"}),"Total Amount:"]}),e.jsxs("span",{className:"font-bold text-lg",children:["P",s.total_amount]})]})]})]}),s.cars&&e.jsxs(i,{children:[e.jsx(c,{children:e.jsxs(l,{className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-5 w-5"}),"Vehicle Details"]})}),e.jsxs(d,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-lg",children:[s.cars.year," ",s.cars.make," ",s.cars.model]}),e.jsx("p",{className:"text-muted-foreground",children:s.cars.color})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:"License Plate:"}),e.jsx("span",{className:"font-mono",children:s.cars.license_plate})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:"Daily Rate:"}),e.jsxs("span",{children:["P",s.cars.daily_rate,"/day"]})]}),s.pickup_location&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(P,{className:"h-4 w-4 mt-1"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Pickup Location:"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.pickup_location})]})]})]})]}),e.jsxs(i,{children:[e.jsx(c,{children:e.jsxs(l,{className:"flex items-center gap-2",children:[e.jsx(D,{className:"h-5 w-5"}),o?"Host Information":"Renter Information"]})}),e.jsxs(d,{className:"space-y-4",children:[o&&s.host&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:"Name:"}),e.jsx("span",{children:s.host.full_name})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:"Phone:"}),e.jsx("span",{children:s.host.phone_number||"Not provided"})]})]}),m&&s.renter&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:"Name:"}),e.jsx("span",{children:s.renter.full_name})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:"Phone:"}),e.jsx("span",{children:s.renter.phone_number||"Not provided"})]})]})]})]}),e.jsxs(i,{children:[e.jsx(c,{children:e.jsx(l,{children:"Additional Information"})}),e.jsxs(d,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:"Created:"}),e.jsx("span",{className:"text-sm",children:r(s.created_at)})]}),s.updated_at&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:"Last Updated:"}),e.jsx("span",{className:"text-sm",children:r(s.updated_at)})]}),s.notes&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Notes:"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:s.notes})]})]})]})]})]})};export{K as BookingDetails,K as default};
