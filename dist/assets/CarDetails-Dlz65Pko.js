import{c as O,r as v,u as Lt,K as It,s as Q,j as r,B as ie,J as q,M as lt,N as et,b as je,q as At,p as Pt,H as Tt}from"./index-BAM2AQzj.js";import{a as Fe}from"./useQuery-BBHzqejZ.js";import{S as ae}from"./skeleton-nH5YszIf.js";import{N as Pe}from"./Navigation-DcFnTla_.js";import{H as Dt,B as Ot,i as Ft,u as zt,s as Vt,C as Bt}from"./savedCarService-tYJGOOrr.js";import{V as _t}from"./VerificationRequiredDialog-s2VCs-lA.js";import{u as qt}from"./useVerificationStatus-B0uRCjL0.js";import{C as ut}from"./calendar-m5gla_Sa.js";import{P as Rt,a as Ht,b as Kt}from"./popover-CRuTd8jV.js";import{M as dt}from"./map-pin-CoQHT-KY.js";import{C as ze,a as Ve,b as Be,d as _e}from"./card-C82ETfr4.js";import{U as Ut}from"./users-Bgk7JC4M.js";import{C as tt}from"./camera-DYAoZQND.js";import{S as $t}from"./shield-CL09y3a_.js";import{K as Gt,C as Qt,a as Jt}from"./CarDescription-CbfPF1JW.js";import{A as Zt}from"./arrow-left-ZSxCSMqd.js";import{A as Yt}from"./arrow-right-CC1csBZ0.js";import{S as Xt}from"./star-gaaEOnOW.js";import{f as Wt}from"./format-BOBWS5Wu.js";import{m as Te,g as en,d as tn}from"./OnlineStatusToggle-D0TJLYj4.js";import"./CustomMapbox-DZ6yZBZD.js";import{T as nn}from"./triangle-alert-ey-Y21ny.js";import"./badge-La64XLSg.js";import"./calendar-D1EmOoAD.js";import"./addDays-Di48Ycau.js";import"./chevron-right-DpKt2Wag.js";import"./alert-7WYzCt2j.js";import"./scroll-area-C8WYL-tw.js";import"./circle-alert-CkQrh4MB.js";import"./file-text-CCBm04K0.js";import"./circle-check-big-CU0Wzt6B.js";import"./ChatDrawer-CTUee0kE.js";import"./avatar-A32ilikL.js";import"./textarea-D1hXqD0k.js";import"./send-CyKCJr7A.js";import"./tooltip-BIm-gO95.js";import"./message-circle-BHBqJZi2.js";import"./handoverService-DSRl_wMq.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rn=O("AirVent",[["path",{d:"M6 12H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"larmp2"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"M18.3 17.7a2.5 2.5 0 0 1-3.16 3.83 2.53 2.53 0 0 1-1.14-2V12",key:"1bo8pg"}],["path",{d:"M6.6 15.6A2 2 0 1 0 10 17v-5",key:"t9h90c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sn=O("Baby",[["path",{d:"M9 12h.01",key:"157uk2"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"5yv0yz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const on=O("Bluetooth",[["path",{d:"m7 7 10 10-5 5V2l5 5L7 17",key:"1q5490"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const an=O("CalendarCheck",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cn=O("Compass",[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ln=O("FolderTree",[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nt=O("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const un=O("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dn=O("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fn=O("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mn=O("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rt=O("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=O("Sofa",[["path",{d:"M20 9V6a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v3",key:"1dgpiv"}],["path",{d:"M2 16a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a2 2 0 0 0-4 0v1.5a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5V11a2 2 0 0 0-4 0z",key:"xacw8m"}],["path",{d:"M4 18v2",key:"jwo5n2"}],["path",{d:"M20 18v2",key:"1ar1qi"}],["path",{d:"M12 4v9",key:"oqhhn3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hn=O("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pn=O("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xn=O("Thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gn=O("Umbrella",[["path",{d:"M22 12a10.06 10.06 1 0 0-20 0Z",key:"1teyop"}],["path",{d:"M12 12v8a2 2 0 0 0 4 0",key:"ulpmoc"}],["path",{d:"M12 2v1",key:"11qlp1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yn=O("Webcam",[["circle",{cx:"12",cy:"10",r:"8",key:"1gshiw"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 22h10",key:"10w4w3"}],["path",{d:"M12 22v-4",key:"1utk9m"}]]),bn=({car:e})=>{const[t,o]=v.useState(!1),[n,i]=v.useState(!1),[s,a]=v.useState(!1),[u,l]=v.useState(!1),[c,y]=v.useState(!1),[f,p]=v.useState(!1),{isVerified:b,isLoading:d}=qt(),h=Lt(),x=It();v.useEffect(()=>{(async()=>{var w;const{data:E}=await Q.auth.getSession(),S=!!E.session;if(y(S),S&&((w=E.session)!=null&&w.user)){const C=E.session.user.id;p(C===e.owner_id)}})();const{data:{subscription:N}}=Q.auth.onAuthStateChange((E,S)=>{const w=!!S;if(y(w),w&&S){const C=S.user.id;p(C===e.owner_id)}else p(!1)});return()=>N.unsubscribe()},[e.owner_id]),v.useEffect(()=>{(async()=>{if(c)try{const N=await Ft(e.id);a(N)}catch(N){console.error("Failed to check if car is saved:",N)}})()},[e.id,c]);const m=()=>{if(!c){h("/login");return}if(f){q.error("You cannot book your own vehicle");return}if(!b&&!d){i(!0);return}o(!0)},g=async()=>{if(!c){h("/login");return}if(!u){l(!0);try{s?await zt(e.id)&&(a(!1),q.success("Vehicle removed from saved list"),x.invalidateQueries({queryKey:["saved-cars-full"]}),x.invalidateQueries({queryKey:["saved-car-ids"]})):await Vt(e.id)&&(a(!0),q.success("Vehicle added to saved list"),x.invalidateQueries({queryKey:["saved-cars-full"]}),x.invalidateQueries({queryKey:["saved-car-ids"]}))}catch{q.error("An error occurred. Please try again.")}finally{l(!1)}}};return r.jsxs("div",{className:"sticky bottom-[72px] bg-background dark:bg-gray-800 p-4 rounded-t-lg border-t border-gray-200 dark:border-gray-700 shadow-lg",children:[f?r.jsxs("div",{className:"flex items-center justify-center p-2 bg-muted rounded-lg",children:[r.jsx(mn,{className:"h-5 w-5 mr-2 text-amber-500"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"You own this vehicle"})]}):r.jsxs("div",{className:"flex gap-2",children:[r.jsx(ie,{variant:"outline",className:"w-12 flex-shrink-0",onClick:g,disabled:u,children:r.jsx(Dt,{className:`${s?"fill-red-500 text-red-500":"text-gray-600 dark:text-gray-400"}`})}),r.jsxs(ie,{className:"flex-1 flex items-center justify-center gap-2",onClick:m,children:[r.jsx(ut,{className:"w-5 h-5"}),"Book Now"]})]}),r.jsx(Ot,{car:e,isOpen:t,onClose:()=>o(!1)}),r.jsx(_t,{isOpen:n,onClose:()=>i(!1),action:"booking",carData:e})]})},jn=({brand:e,model:t,year:o,location:n,pricePerDay:i})=>{const{id:s}=lt(),[a,u]=v.useState(!1),[l,c]=v.useState(!0),[y,f]=v.useState(!1);v.useEffect(()=>{(async()=>{var d,h;try{c(!0);const{data:x}=await Q.auth.getSession(),m=(h=(d=x==null?void 0:x.session)==null?void 0:d.user)==null?void 0:h.id;if(!m||!s){u(!1);return}const{data:g}=await Q.from("cars").select("owner_id").eq("id",s).single();u((g==null?void 0:g.owner_id)===m)}catch(x){console.error("Error checking car ownership:",x),u(!1)}finally{c(!1)}})()},[s]);const p=async()=>{if(!s)return;const b=`${window.location.origin}/cars/${s}`;try{navigator.share?(await navigator.share({title:`${e} ${t} (${o})`,text:`Let's rent this ${e} ${t} on Mobi Rides`,url:b}),q.success("Shared successfully")):(await navigator.clipboard.writeText(b),f(!0),q.success("Link copied to clipboard"),setTimeout(()=>{f(!1)},2e3))}catch(d){console.error("Error sharing:",d),q.error("Failed to share. Please try again.")}};return r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700 p-4",children:r.jsxs("div",{className:"flex flex-col md:flex-row justify-between md:items-start",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-2xl md:text-3xl text-left text-gray-700 dark:text-white font-bold",children:[e," ",t]}),r.jsxs("div",{className:"flex items-center gap-1 mt-1 text-sm md:text-base text-muted-foreground dark:text-white",children:[r.jsx(an,{size:16,className:"h-4 w-4 mr-1 text-blue-500"}),r.jsx("span",{className:"text-sm md:text-base text-muted-foreground",children:o})]}),r.jsxs("div",{className:"flex items-center gap-1 mt-1 ",children:[r.jsx(dt,{size:16,className:"h-4 w-4 mr-1 text-red-500"}),r.jsx("span",{className:"text-sm md:text-base text-muted-foreground",children:n})]}),r.jsxs("div",{className:"mt-8 flex items-center gap-1",children:[r.jsxs("h2",{className:"font-bold text-lg md:text-xl  text-primary",children:["BWP ",i]}),r.jsx("p",{className:"text-xs md:text-sm text-muted-foreground dark:text-white",children:"/day"})]})]}),r.jsxs("div",{className:"flex gap-2 mt-4 md:mt-0",children:[a&&r.jsx(ie,{variant:"outline",size:"icon",className:"rounded-2xl md:size-auto md:px-4 md:py-2 md:flex md:items-center md:gap-2",asChild:!0,children:r.jsxs(et,{to:`/edit-car/${s}`,children:[r.jsx(pn,{className:"h-4 w-4 text-[#581CFA] dark:text-white"}),r.jsx("span",{className:"hidden md:inline-block",children:r.jsx("p",{className:"text-[#581CFA] dark:text-white text-xs md:text-sm lg:text-base font-semibold",children:"Edit Car"})})]})}),r.jsxs(Rt,{open:y,onOpenChange:f,children:[r.jsx(Ht,{asChild:!0,children:r.jsxs(ie,{variant:"outline",size:"icon",className:"rounded-2xl md:size-auto md:px-4 md:py-2 md:flex md:items-center md:gap-2",onClick:p,children:[r.jsx(fn,{className:"h-4 w-4 text-[#581CFA] dark:text-white"}),r.jsx("span",{className:"hidden md:inline-block",children:r.jsx("p",{className:"text-[#581CFA] dark:text-white text-xs md:text-sm lg:text-base font-semibold",children:"Share"})})]})}),r.jsx(Kt,{className:"w-auto p-2 text-sm",children:"Link copied!"})]}),r.jsx(ie,{variant:"outline",size:"icon",className:"rounded-2xl md:size-auto md:px-4 md:py-2 md:flex md:items-center md:gap-2",asChild:!0,children:r.jsxs(et,{to:"/bookings",children:[r.jsx(ut,{className:"h-4 w-4 text-[#581CFA] dark:text-white"}),r.jsx("span",{className:"hidden md:inline-block",children:r.jsx("p",{className:"text-[#581CFA] dark:text-white text-xs md:text-sm lg:text-base font-semibold",children:"Bookings"})})]})})]})]})})},kn=({pricePerDay:e,transmission:t,seats:o,features:n=[]})=>{const i=s=>{switch(s){case"Air Conditioning":return r.jsx(rn,{className:"h-4 w-4"});case"Bluetooth":return r.jsx(on,{className:"h-4 w-4"});case"Cruise Control":return r.jsx(nt,{className:"h-4 w-4"});case"Navigation System":return r.jsx(cn,{className:"h-4 w-4"});case"Leather Seats":return r.jsx(st,{className:"h-4 w-4"});case"Sunroof":return r.jsx(gn,{className:"h-4 w-4"});case"Backup Camera":return r.jsx(tt,{className:"h-4 w-4"});case"Parking Sensors":return r.jsx(yn,{className:"h-4 w-4"});case"Keyless Entry":return r.jsx(Gt,{className:"h-4 w-4"});case"Push Start":return r.jsx(un,{className:"h-4 w-4"});case"Heated Seats":return r.jsx(xn,{className:"h-4 w-4"});case"Premium Sound":return r.jsx(dn,{className:"h-4 w-4"});case"Third Row Seating":return r.jsx(st,{className:"h-4 w-4"});case"Blind Spot Monitor":return r.jsx($t,{className:"h-4 w-4"});case"360 Degree Camera":return r.jsx(tt,{className:"h-4 w-4"});case"Apple CarPlay":return r.jsx(rt,{className:"h-4 w-4"});case"Android Auto":return r.jsx(rt,{className:"h-4 w-4"});case"Roof Rack":return r.jsx(ln,{className:"h-4 w-4"});case"Child Seat Anchor":return r.jsx(sn,{className:"h-4 w-4"});case"Autonomous Driving":return r.jsx(nt,{className:"h-4 w-4"});default:return r.jsx(hn,{className:"h-4 w-4"})}};return r.jsxs(ze,{className:"dark:bg-gray-800 dark:border-gray-700",children:[r.jsx(Ve,{className:"pb-2",children:r.jsx(Be,{className:"text-base text-left text-muted-foreground dark:text-white font-medium",children:"Car Specifications"})}),r.jsxs(_e,{children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm mb-6",children:[r.jsxs("div",{className:"p-4 bg-muted rounded-lg text-left w-full ",children:[r.jsx(Bt,{className:"w-4 h-4 text-primary dark:text-primary-foreground"}),r.jsx("p",{className:"text-base md:text-xl text-left text-gray-700 dark:text-white font-medium mt-4",children:t}),r.jsx("p",{className:"text-xs md:text-sm text-muted-foreground ",children:"Car Fuel"})]}),r.jsxs("div",{className:"p-4 bg-muted rounded-lg text-left",children:[r.jsx(Ut,{className:"w-4 h-4 text-primary dark:text-primary-foreground"}),r.jsx("p",{className:"text-base md:text-xl text-left text-gray-700 dark:text-white font-medium mt-4",children:o}),r.jsx("p",{className:"text-xs md:text-sm text-muted-foreground ",children:"Passenger Seats"})]})]}),n&&n.length>0&&r.jsxs(r.Fragment,{children:[r.jsx("h3",{className:" mb-3 text-base text-left text-muted-foreground dark:text-white font-medium",children:"Car Features"}),r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-2",children:n.map(s=>r.jsxs("div",{className:"flex items-center space-x-2 p-2 rounded-md border bg-muted/30",children:[r.jsx("span",{className:"text-primary",children:i(s)}),r.jsx("span",{className:"text-xs md:text-sm text-muted-foreground",children:s})]},s))})]})]})]})};function vn(e){return Object.prototype.toString.call(e)==="[object Object]"}function ot(e){return vn(e)||Array.isArray(e)}function wn(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function qe(e,t){const o=Object.keys(e),n=Object.keys(t);if(o.length!==n.length)return!1;const i=JSON.stringify(Object.keys(e.breakpoints||{})),s=JSON.stringify(Object.keys(t.breakpoints||{}));return i!==s?!1:o.every(a=>{const u=e[a],l=t[a];return typeof u=="function"?`${u}`==`${l}`:!ot(u)||!ot(l)?u===l:qe(u,l)})}function at(e){return e.concat().sort((t,o)=>t.name>o.name?1:-1).map(t=>t.options)}function Nn(e,t){if(e.length!==t.length)return!1;const o=at(e),n=at(t);return o.every((i,s)=>{const a=n[s];return qe(i,a)})}function Re(e){return typeof e=="number"}function De(e){return typeof e=="string"}function Ne(e){return typeof e=="boolean"}function it(e){return Object.prototype.toString.call(e)==="[object Object]"}function P(e){return Math.abs(e)}function He(e){return Math.sign(e)}function xe(e,t){return P(e-t)}function Sn(e,t){if(e===0||t===0||P(e)<=P(t))return 0;const o=xe(P(e),P(t));return P(o/e)}function ge(e){return ye(e).map(Number)}function R(e){return e[ke(e)]}function ke(e){return Math.max(0,e.length-1)}function Ke(e,t){return t===ke(e)}function ct(e,t=0){return Array.from(Array(e),(o,n)=>t+n)}function ye(e){return Object.keys(e)}function ft(e,t){return[e,t].reduce((o,n)=>(ye(n).forEach(i=>{const s=o[i],a=n[i],u=it(s)&&it(a);o[i]=u?ft(s,a):a}),o),{})}function Oe(e,t){return typeof t.MouseEvent<"u"&&e instanceof t.MouseEvent}function Cn(e,t){const o={start:n,center:i,end:s};function n(){return 0}function i(l){return s(l)/2}function s(l){return t-l}function a(l,c){return De(e)?o[e](l):e(t,l,c)}return{measure:a}}function be(){let e=[];function t(i,s,a,u={passive:!0}){let l;if("addEventListener"in i)i.addEventListener(s,a,u),l=()=>i.removeEventListener(s,a,u);else{const c=i;c.addListener(a),l=()=>c.removeListener(a)}return e.push(l),n}function o(){e=e.filter(i=>i())}const n={add:t,clear:o};return n}function Mn(e,t,o,n){const i=be(),s=1e3/60;let a=null,u=0,l=0;function c(){i.add(e,"visibilitychange",()=>{e.hidden&&d()})}function y(){b(),i.clear()}function f(x){if(!l)return;a||(a=x);const m=x-a;for(a=x,u+=m;u>=s;)o(s),u-=s;const g=u/s;n(g),l&&t.requestAnimationFrame(f)}function p(){l||(l=t.requestAnimationFrame(f))}function b(){t.cancelAnimationFrame(l),a=null,u=0,l=0}function d(){a=null,u=0}return{init:c,destroy:y,start:p,stop:b,update:()=>o(s),render:n}}function En(e,t){const o=t==="rtl",n=e==="y",i=n?"y":"x",s=n?"x":"y",a=!n&&o?-1:1,u=y(),l=f();function c(d){const{height:h,width:x}=d;return n?h:x}function y(){return n?"top":o?"right":"left"}function f(){return n?"bottom":o?"left":"right"}function p(d){return d*a}return{scroll:i,cross:s,startEdge:u,endEdge:l,measureSize:c,direction:p}}function ce(e=0,t=0){const o=P(e-t);function n(c){return c<e}function i(c){return c>t}function s(c){return n(c)||i(c)}function a(c){return s(c)?n(c)?e:t:c}function u(c){return o?c-o*Math.ceil((c-t)/o):c}return{length:o,max:t,min:e,constrain:a,reachedAny:s,reachedMax:i,reachedMin:n,removeOffset:u}}function mt(e,t,o){const{constrain:n}=ce(0,e),i=e+1;let s=a(t);function a(p){return o?P((i+p)%i):n(p)}function u(){return s}function l(p){return s=a(p),f}function c(p){return y().set(u()+p)}function y(){return mt(e,u(),o)}const f={get:u,set:l,add:c,clone:y};return f}function Ln(e,t,o,n,i,s,a,u,l,c,y,f,p,b,d,h,x,m,g){const{cross:j,direction:N}=e,E=["INPUT","SELECT","TEXTAREA"],S={passive:!1},w=be(),C=be(),M=ce(50,225).constrain(b.measure(20)),T={mouse:300,touch:400},L={mouse:500,touch:600},V=d?43:25;let H=!1,K=0,U=0,se=!1,ee=!1,J=!1,Z=!1;function de(k){if(!g)return;function I(z){(Ne(g)||g(k,z))&&me(z)}const D=t;w.add(D,"dragstart",z=>z.preventDefault(),S).add(D,"touchmove",()=>{},S).add(D,"touchend",()=>{}).add(D,"touchstart",I).add(D,"mousedown",I).add(D,"touchcancel",F).add(D,"contextmenu",F).add(D,"click",X,!0)}function $(){w.clear(),C.clear()}function le(){const k=Z?o:t;C.add(k,"touchmove",B,S).add(k,"touchend",F).add(k,"mousemove",B,S).add(k,"mouseup",F)}function ue(k){const I=k.nodeName||"";return E.includes(I)}function Y(){return(d?L:T)[Z?"mouse":"touch"]}function fe(k,I){const D=f.add(He(k)*-1),z=y.byDistance(k,!d).distance;return d||P(k)<M?z:x&&I?z*.5:y.byIndex(D.get(),0).distance}function me(k){const I=Oe(k,n);Z=I,J=d&&I&&!k.buttons&&H,H=xe(i.get(),a.get())>=2,!(I&&k.button!==0)&&(ue(k.target)||(se=!0,s.pointerDown(k),c.useFriction(0).useDuration(0),i.set(a),le(),K=s.readPoint(k),U=s.readPoint(k,j),p.emit("pointerDown")))}function B(k){if(!Oe(k,n)&&k.touches.length>=2)return F(k);const D=s.readPoint(k),z=s.readPoint(k,j),G=xe(D,K),W=xe(z,U);if(!ee&&!Z&&(!k.cancelable||(ee=G>W,!ee)))return F(k);const te=s.pointerMove(k);G>h&&(J=!0),c.useFriction(.3).useDuration(.75),u.start(),i.add(N(te)),k.preventDefault()}function F(k){const D=y.byDistance(0,!1).index!==f.get(),z=s.pointerUp(k)*Y(),G=fe(N(z),D),W=Sn(z,G),te=V-10*W,ne=m+W/50;ee=!1,se=!1,C.clear(),c.useDuration(te).useFriction(ne),l.distance(G,!d),Z=!1,p.emit("pointerUp")}function X(k){J&&(k.stopPropagation(),k.preventDefault(),J=!1)}function _(){return se}return{init:de,destroy:$,pointerDown:_}}function In(e,t){let n,i;function s(f){return f.timeStamp}function a(f,p){const d=`client${(p||e.scroll)==="x"?"X":"Y"}`;return(Oe(f,t)?f:f.touches[0])[d]}function u(f){return n=f,i=f,a(f)}function l(f){const p=a(f)-a(i),b=s(f)-s(n)>170;return i=f,b&&(n=f),p}function c(f){if(!n||!i)return 0;const p=a(i)-a(n),b=s(f)-s(n),d=s(f)-s(i)>170,h=p/b;return b&&!d&&P(h)>.1?h:0}return{pointerDown:u,pointerMove:l,pointerUp:c,readPoint:a}}function An(){function e(o){const{offsetTop:n,offsetLeft:i,offsetWidth:s,offsetHeight:a}=o;return{top:n,right:i+s,bottom:n+a,left:i,width:s,height:a}}return{measure:e}}function Pn(e){function t(n){return e*(n/100)}return{measure:t}}function Tn(e,t,o,n,i,s,a){const u=[e].concat(n);let l,c,y=[],f=!1;function p(x){return i.measureSize(a.measure(x))}function b(x){if(!s)return;c=p(e),y=n.map(p);function m(g){for(const j of g){if(f)return;const N=j.target===e,E=n.indexOf(j.target),S=N?c:y[E],w=p(N?e:n[E]);if(P(w-S)>=.5){x.reInit(),t.emit("resize");break}}}l=new ResizeObserver(g=>{(Ne(s)||s(x,g))&&m(g)}),o.requestAnimationFrame(()=>{u.forEach(g=>l.observe(g))})}function d(){f=!0,l&&l.disconnect()}return{init:b,destroy:d}}function Dn(e,t,o,n,i,s){let a=0,u=0,l=i,c=s,y=e.get(),f=0;function p(S){const w=S/1e3,C=l*w,M=n.get()-e.get(),T=!l;let L=0;return T?(a=0,o.set(n),e.set(n),L=M):(o.set(e),a+=M/C,a*=c,y+=a,e.add(a*w),L=y-f),u=He(L),f=y,E}function b(){const S=n.get()-t.get();return P(S)<.001}function d(){return l}function h(){return u}function x(){return a}function m(){return j(i)}function g(){return N(s)}function j(S){return l=S,E}function N(S){return c=S,E}const E={direction:h,duration:d,velocity:x,seek:p,settled:b,useBaseFriction:g,useBaseDuration:m,useFriction:N,useDuration:j};return E}function On(e,t,o,n,i){const s=i.measure(10),a=i.measure(50),u=ce(.1,.99);let l=!1;function c(){return!(l||!e.reachedAny(o.get())||!e.reachedAny(t.get()))}function y(b){if(!c())return;const d=e.reachedMin(t.get())?"min":"max",h=P(e[d]-t.get()),x=o.get()-t.get(),m=u.constrain(h/a);o.subtract(x*m),!b&&P(x)<s&&(o.set(e.constrain(o.get())),n.useDuration(25).useBaseFriction())}function f(b){l=!b}return{shouldConstrain:c,constrain:y,toggleActive:f}}function Fn(e,t,o,n,i){const s=ce(-t+e,0),a=f(),u=y(),l=p();function c(d,h){return xe(d,h)<1}function y(){const d=a[0],h=R(a),x=a.lastIndexOf(d),m=a.indexOf(h)+1;return ce(x,m)}function f(){return o.map((d,h)=>{const{min:x,max:m}=s,g=s.constrain(d),j=!h,N=Ke(o,h);return j?m:N||c(x,g)?x:c(m,g)?m:g}).map(d=>parseFloat(d.toFixed(3)))}function p(){if(t<=e+i)return[s.max];if(n==="keepSnaps")return a;const{min:d,max:h}=u;return a.slice(d,h)}return{snapsContained:l,scrollContainLimit:u}}function zn(e,t,o){const n=t[0],i=o?n-e:R(t);return{limit:ce(i,n)}}function Vn(e,t,o,n){const s=t.min+.1,a=t.max+.1,{reachedMin:u,reachedMax:l}=ce(s,a);function c(p){return p===1?l(o.get()):p===-1?u(o.get()):!1}function y(p){if(!c(p))return;const b=e*(p*-1);n.forEach(d=>d.add(b))}return{loop:y}}function Bn(e){const{max:t,length:o}=e;function n(s){const a=s-t;return o?a/-o:0}return{get:n}}function _n(e,t,o,n,i){const{startEdge:s,endEdge:a}=e,{groupSlides:u}=i,l=f().map(t.measure),c=p(),y=b();function f(){return u(n).map(h=>R(h)[a]-h[0][s]).map(P)}function p(){return n.map(h=>o[s]-h[s]).map(h=>-P(h))}function b(){return u(c).map(h=>h[0]).map((h,x)=>h+l[x])}return{snaps:c,snapsAligned:y}}function qn(e,t,o,n,i,s){const{groupSlides:a}=i,{min:u,max:l}=n,c=y();function y(){const p=a(s),b=!e||t==="keepSnaps";return o.length===1?[s]:b?p:p.slice(u,l).map((d,h,x)=>{const m=!h,g=Ke(x,h);if(m){const j=R(x[0])+1;return ct(j)}if(g){const j=ke(s)-R(x)[0]+1;return ct(j,R(x)[0])}return d})}return{slideRegistry:c}}function Rn(e,t,o,n,i){const{reachedAny:s,removeOffset:a,constrain:u}=n;function l(d){return d.concat().sort((h,x)=>P(h)-P(x))[0]}function c(d){const h=e?a(d):u(d),x=t.map((g,j)=>({diff:y(g-h,0),index:j})).sort((g,j)=>P(g.diff)-P(j.diff)),{index:m}=x[0];return{index:m,distance:h}}function y(d,h){const x=[d,d+o,d-o];if(!e)return d;if(!h)return l(x);const m=x.filter(g=>He(g)===h);return m.length?l(m):R(x)-o}function f(d,h){const x=t[d]-i.get(),m=y(x,h);return{index:d,distance:m}}function p(d,h){const x=i.get()+d,{index:m,distance:g}=c(x),j=!e&&s(x);if(!h||j)return{index:m,distance:d};const N=t[m]-g,E=d+y(N,0);return{index:m,distance:E}}return{byDistance:p,byIndex:f,shortcut:y}}function Hn(e,t,o,n,i,s,a){function u(f){const p=f.distance,b=f.index!==t.get();s.add(p),p&&(n.duration()?e.start():(e.update(),e.render(1),e.update())),b&&(o.set(t.get()),t.set(f.index),a.emit("select"))}function l(f,p){const b=i.byDistance(f,p);u(b)}function c(f,p){const b=t.clone().set(f),d=i.byIndex(b.get(),p);u(d)}return{distance:l,index:c}}function Kn(e,t,o,n,i,s,a,u){const l={passive:!0,capture:!0};let c=0;function y(b){if(!u)return;function d(h){if(new Date().getTime()-c>10)return;a.emit("slideFocusStart"),e.scrollLeft=0;const g=o.findIndex(j=>j.includes(h));Re(g)&&(i.useDuration(0),n.index(g,0),a.emit("slideFocus"))}s.add(document,"keydown",f,!1),t.forEach((h,x)=>{s.add(h,"focus",m=>{(Ne(u)||u(b,m))&&d(x)},l)})}function f(b){b.code==="Tab"&&(c=new Date().getTime())}return{init:y}}function pe(e){let t=e;function o(){return t}function n(l){t=a(l)}function i(l){t+=a(l)}function s(l){t-=a(l)}function a(l){return Re(l)?l:l.get()}return{get:o,set:n,add:i,subtract:s}}function ht(e,t){const o=e.scroll==="x"?s:a,n=t.style;let i=!1;function s(f){return`translate3d(${f}px,0px,0px)`}function a(f){return`translate3d(0px,${f}px,0px)`}function u(f){i||(n.transform=o(e.direction(f)))}function l(f){i=!f}function c(){i||(n.transform="",t.getAttribute("style")||t.removeAttribute("style"))}return{clear:c,to:u,toggleActive:l}}function Un(e,t,o,n,i,s,a,u,l){const y=ge(i),f=ge(i).reverse(),p=m().concat(g());function b(w,C){return w.reduce((M,T)=>M-i[T],C)}function d(w,C){return w.reduce((M,T)=>b(M,C)>0?M.concat([T]):M,[])}function h(w){return s.map((C,M)=>({start:C-n[M]+.5+w,end:C+t-.5+w}))}function x(w,C,M){const T=h(C);return w.map(L=>{const V=M?0:-o,H=M?o:0,K=M?"end":"start",U=T[L][K];return{index:L,loopPoint:U,slideLocation:pe(-1),translate:ht(e,l[L]),target:()=>u.get()>U?V:H}})}function m(){const w=a[0],C=d(f,w);return x(C,o,!1)}function g(){const w=t-a[0]-1,C=d(y,w);return x(C,-o,!0)}function j(){return p.every(({index:w})=>{const C=y.filter(M=>M!==w);return b(C,t)<=.1})}function N(){p.forEach(w=>{const{target:C,translate:M,slideLocation:T}=w,L=C();L!==T.get()&&(M.to(L),T.set(L))})}function E(){p.forEach(w=>w.translate.clear())}return{canLoop:j,clear:E,loop:N,loopPoints:p}}function $n(e,t,o){let n,i=!1;function s(l){if(!o)return;function c(y){for(const f of y)if(f.type==="childList"){l.reInit(),t.emit("slidesChanged");break}}n=new MutationObserver(y=>{i||(Ne(o)||o(l,y))&&c(y)}),n.observe(e,{childList:!0})}function a(){n&&n.disconnect(),i=!0}return{init:s,destroy:a}}function Gn(e,t,o,n){const i={};let s=null,a=null,u,l=!1;function c(){u=new IntersectionObserver(d=>{l||(d.forEach(h=>{const x=t.indexOf(h.target);i[x]=h}),s=null,a=null,o.emit("slidesInView"))},{root:e.parentElement,threshold:n}),t.forEach(d=>u.observe(d))}function y(){u&&u.disconnect(),l=!0}function f(d){return ye(i).reduce((h,x)=>{const m=parseInt(x),{isIntersecting:g}=i[m];return(d&&g||!d&&!g)&&h.push(m),h},[])}function p(d=!0){if(d&&s)return s;if(!d&&a)return a;const h=f(d);return d&&(s=h),d||(a=h),h}return{init:c,destroy:y,get:p}}function Qn(e,t,o,n,i,s){const{measureSize:a,startEdge:u,endEdge:l}=e,c=o[0]&&i,y=d(),f=h(),p=o.map(a),b=x();function d(){if(!c)return 0;const g=o[0];return P(t[u]-g[u])}function h(){if(!c)return 0;const g=s.getComputedStyle(R(n));return parseFloat(g.getPropertyValue(`margin-${l}`))}function x(){return o.map((g,j,N)=>{const E=!j,S=Ke(N,j);return E?p[j]+y:S?p[j]+f:N[j+1][u]-g[u]}).map(P)}return{slideSizes:p,slideSizesWithGaps:b,startGap:y,endGap:f}}function Jn(e,t,o,n,i,s,a,u,l){const{startEdge:c,endEdge:y,direction:f}=e,p=Re(o);function b(m,g){return ge(m).filter(j=>j%g===0).map(j=>m.slice(j,j+g))}function d(m){return m.length?ge(m).reduce((g,j,N)=>{const E=R(g)||0,S=E===0,w=j===ke(m),C=i[c]-s[E][c],M=i[c]-s[j][y],T=!n&&S?f(a):0,L=!n&&w?f(u):0,V=P(M-L-(C+T));return N&&V>t+l&&g.push(j),w&&g.push(m.length),g},[]).map((g,j,N)=>{const E=Math.max(N[j-1]||0);return m.slice(E,g)}):[]}function h(m){return p?b(m,o):d(m)}return{groupSlides:h}}function Zn(e,t,o,n,i,s,a){const{align:u,axis:l,direction:c,startIndex:y,loop:f,duration:p,dragFree:b,dragThreshold:d,inViewThreshold:h,slidesToScroll:x,skipSnaps:m,containScroll:g,watchResize:j,watchSlides:N,watchDrag:E,watchFocus:S}=s,w=2,C=An(),M=C.measure(t),T=o.map(C.measure),L=En(l,c),V=L.measureSize(M),H=Pn(V),K=Cn(u,V),U=!f&&!!g,se=f||!!g,{slideSizes:ee,slideSizesWithGaps:J,startGap:Z,endGap:de}=Qn(L,M,T,o,se,i),$=Jn(L,V,x,f,M,T,Z,de,w),{snaps:le,snapsAligned:ue}=_n(L,K,M,T,$),Y=-R(le)+R(J),{snapsContained:fe,scrollContainLimit:me}=Fn(V,Y,ue,g,w),B=U?fe:ue,{limit:F}=zn(Y,B,f),X=mt(ke(B),y,f),_=X.clone(),A=ge(o),k=({dragHandler:re,scrollBody:Le,scrollBounds:Ie,options:{loop:ve}},Ae)=>{ve||Ie.constrain(re.pointerDown()),Le.seek(Ae)},I=({scrollBody:re,translate:Le,location:Ie,offsetLocation:ve,scrollLooper:Ae,slideLooper:wt,dragHandler:Nt,animation:St,eventHandler:Je,scrollBounds:Ct,options:{loop:Ze}},Ye)=>{const Xe=re.settled(),Mt=!Ct.shouldConstrain(),We=Ze?Xe:Xe&&Mt;We&&!Nt.pointerDown()&&(St.stop(),Je.emit("settle")),We||Je.emit("scroll");const Et=Ie.get()*Ye+te.get()*(1-Ye);ve.set(Et),Ze&&(Ae.loop(re.direction()),wt.loop()),Le.to(ve.get())},D=Mn(n,i,re=>k(Ee,re),re=>I(Ee,re)),z=.68,G=B[X.get()],W=pe(G),te=pe(G),ne=pe(G),oe=pe(G),he=Dn(W,ne,te,oe,p,z),Ce=Rn(f,B,Y,F,oe),Me=Hn(D,X,_,he,Ce,oe,a),$e=Bn(F),Ge=be(),kt=Gn(t,o,a,h),{slideRegistry:Qe}=qn(U,g,B,me,$,A),vt=Kn(e,o,Qe,Me,he,Ge,a,S),Ee={ownerDocument:n,ownerWindow:i,eventHandler:a,containerRect:M,slideRects:T,animation:D,axis:L,dragHandler:Ln(L,e,n,i,oe,In(L,i),W,D,Me,he,Ce,X,a,H,b,d,m,z,E),eventStore:Ge,percentOfView:H,index:X,indexPrevious:_,limit:F,location:W,offsetLocation:ne,previousLocation:te,options:s,resizeHandler:Tn(t,a,i,o,L,j,C),scrollBody:he,scrollBounds:On(F,ne,oe,he,H),scrollLooper:Vn(Y,F,ne,[W,ne,te,oe]),scrollProgress:$e,scrollSnapList:B.map($e.get),scrollSnaps:B,scrollTarget:Ce,scrollTo:Me,slideLooper:Un(L,V,Y,ee,J,le,B,ne,o),slideFocus:vt,slidesHandler:$n(t,a,N),slidesInView:kt,slideIndexes:A,slideRegistry:Qe,slidesToScroll:$,target:oe,translate:ht(L,t)};return Ee}function Yn(){let e={},t;function o(c){t=c}function n(c){return e[c]||[]}function i(c){return n(c).forEach(y=>y(t,c)),l}function s(c,y){return e[c]=n(c).concat([y]),l}function a(c,y){return e[c]=n(c).filter(f=>f!==y),l}function u(){e={}}const l={init:o,emit:i,off:a,on:s,clear:u};return l}const Xn={align:"center",axis:"x",container:null,slides:null,containScroll:"trimSnaps",direction:"ltr",slidesToScroll:1,inViewThreshold:0,breakpoints:{},dragFree:!1,dragThreshold:10,loop:!1,skipSnaps:!1,duration:25,startIndex:0,active:!0,watchDrag:!0,watchResize:!0,watchSlides:!0,watchFocus:!0};function Wn(e){function t(s,a){return ft(s,a||{})}function o(s){const a=s.breakpoints||{},u=ye(a).filter(l=>e.matchMedia(l).matches).map(l=>a[l]).reduce((l,c)=>t(l,c),{});return t(s,u)}function n(s){return s.map(a=>ye(a.breakpoints||{})).reduce((a,u)=>a.concat(u),[]).map(e.matchMedia)}return{mergeOptions:t,optionsAtMedia:o,optionsMediaQueries:n}}function er(e){let t=[];function o(s,a){return t=a.filter(({options:u})=>e.optionsAtMedia(u).active!==!1),t.forEach(u=>u.init(s,e)),a.reduce((u,l)=>Object.assign(u,{[l.name]:l}),{})}function n(){t=t.filter(s=>s.destroy())}return{init:o,destroy:n}}function we(e,t,o){const n=e.ownerDocument,i=n.defaultView,s=Wn(i),a=er(s),u=be(),l=Yn(),{mergeOptions:c,optionsAtMedia:y,optionsMediaQueries:f}=s,{on:p,off:b,emit:d}=l,h=L;let x=!1,m,g=c(Xn,we.globalOptions),j=c(g),N=[],E,S,w;function C(){const{container:A,slides:k}=j;S=(De(A)?e.querySelector(A):A)||e.children[0];const D=De(k)?S.querySelectorAll(k):k;w=[].slice.call(D||S.children)}function M(A){const k=Zn(e,S,w,n,i,A,l);if(A.loop&&!k.slideLooper.canLoop()){const I=Object.assign({},A,{loop:!1});return M(I)}return k}function T(A,k){x||(g=c(g,A),j=y(g),N=k||N,C(),m=M(j),f([g,...N.map(({options:I})=>I)]).forEach(I=>u.add(I,"change",L)),j.active&&(m.translate.to(m.location.get()),m.animation.init(),m.slidesInView.init(),m.slideFocus.init(_),m.eventHandler.init(_),m.resizeHandler.init(_),m.slidesHandler.init(_),m.options.loop&&m.slideLooper.loop(),S.offsetParent&&w.length&&m.dragHandler.init(_),E=a.init(_,N)))}function L(A,k){const I=$();V(),T(c({startIndex:I},A),k),l.emit("reInit")}function V(){m.dragHandler.destroy(),m.eventStore.clear(),m.translate.clear(),m.slideLooper.clear(),m.resizeHandler.destroy(),m.slidesHandler.destroy(),m.slidesInView.destroy(),m.animation.destroy(),a.destroy(),u.clear()}function H(){x||(x=!0,u.clear(),V(),l.emit("destroy"),l.clear())}function K(A,k,I){!j.active||x||(m.scrollBody.useBaseFriction().useDuration(k===!0?0:j.duration),m.scrollTo.index(A,I||0))}function U(A){const k=m.index.add(1).get();K(k,A,-1)}function se(A){const k=m.index.add(-1).get();K(k,A,1)}function ee(){return m.index.add(1).get()!==$()}function J(){return m.index.add(-1).get()!==$()}function Z(){return m.scrollSnapList}function de(){return m.scrollProgress.get(m.location.get())}function $(){return m.index.get()}function le(){return m.indexPrevious.get()}function ue(){return m.slidesInView.get()}function Y(){return m.slidesInView.get(!1)}function fe(){return E}function me(){return m}function B(){return e}function F(){return S}function X(){return w}const _={canScrollNext:ee,canScrollPrev:J,containerNode:F,internalEngine:me,destroy:H,off:b,on:p,emit:d,plugins:fe,previousScrollSnap:le,reInit:h,rootNode:B,scrollNext:U,scrollPrev:se,scrollProgress:de,scrollSnapList:Z,scrollTo:K,selectedScrollSnap:$,slideNodes:X,slidesInView:ue,slidesNotInView:Y};return T(t,o),setTimeout(()=>l.emit("init"),0),_}we.globalOptions=void 0;function Ue(e={},t=[]){const o=v.useRef(e),n=v.useRef(t),[i,s]=v.useState(),[a,u]=v.useState(),l=v.useCallback(()=>{i&&i.reInit(o.current,n.current)},[i]);return v.useEffect(()=>{qe(o.current,e)||(o.current=e,l())},[e,l]),v.useEffect(()=>{Nn(n.current,t)||(n.current=t,l())},[t,l]),v.useEffect(()=>{if(wn()&&a){we.globalOptions=Ue.globalOptions;const c=we(a,o.current,n.current);return s(c),()=>c.destroy()}else s(void 0)},[a,s]),[u,i]}Ue.globalOptions=void 0;const pt=v.createContext(null);function Se(){const e=v.useContext(pt);if(!e)throw new Error("useCarousel must be used within a <Carousel />");return e}const xt=v.forwardRef(({orientation:e="horizontal",opts:t,setApi:o,plugins:n,className:i,children:s,...a},u)=>{const[l,c]=Ue({...t,axis:e==="horizontal"?"x":"y"},n),[y,f]=v.useState(!1),[p,b]=v.useState(!1),d=v.useCallback(g=>{g&&(f(g.canScrollPrev()),b(g.canScrollNext()))},[]),h=v.useCallback(()=>{c==null||c.scrollPrev()},[c]),x=v.useCallback(()=>{c==null||c.scrollNext()},[c]),m=v.useCallback(g=>{g.key==="ArrowLeft"?(g.preventDefault(),h()):g.key==="ArrowRight"&&(g.preventDefault(),x())},[h,x]);return v.useEffect(()=>{!c||!o||o(c)},[c,o]),v.useEffect(()=>{if(c)return d(c),c.on("reInit",d),c.on("select",d),()=>{c==null||c.off("select",d)}},[c,d]),r.jsx(pt.Provider,{value:{carouselRef:l,api:c,opts:t,orientation:e||((t==null?void 0:t.axis)==="y"?"vertical":"horizontal"),scrollPrev:h,scrollNext:x,canScrollPrev:y,canScrollNext:p},children:r.jsx("div",{ref:u,onKeyDownCapture:m,className:je("relative",i),role:"region","aria-roledescription":"carousel",...a,children:s})})});xt.displayName="Carousel";const gt=v.forwardRef(({className:e,...t},o)=>{const{carouselRef:n,orientation:i}=Se();return r.jsx("div",{ref:n,className:"overflow-hidden",children:r.jsx("div",{ref:o,className:je("flex",i==="horizontal"?"-ml-4":"-mt-4 flex-col",e),...t})})});gt.displayName="CarouselContent";const yt=v.forwardRef(({className:e,...t},o)=>{const{orientation:n}=Se();return r.jsx("div",{ref:o,role:"group","aria-roledescription":"slide",className:je("min-w-0 shrink-0 grow-0 basis-full",n==="horizontal"?"pl-4":"pt-4",e),...t})});yt.displayName="CarouselItem";const bt=v.forwardRef(({className:e,variant:t="outline",size:o="icon",...n},i)=>{const{orientation:s,scrollPrev:a,canScrollPrev:u}=Se();return r.jsxs(ie,{ref:i,variant:t,size:o,className:je("absolute  h-8 w-8 rounded-full",s==="horizontal"?"-left-12 top-1/2 -translate-y-1/2":"-top-12 left-1/2 -translate-x-1/2 rotate-90",e),disabled:!u,onClick:a,...n,children:[r.jsx(Zt,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Previous slide"})]})});bt.displayName="CarouselPrevious";const jt=v.forwardRef(({className:e,variant:t="outline",size:o="icon",...n},i)=>{const{orientation:s,scrollNext:a,canScrollNext:u}=Se();return r.jsxs(ie,{ref:i,variant:t,size:o,className:je("absolute h-8 w-8 rounded-full",s==="horizontal"?"-right-12 top-1/2 -translate-y-1/2":"-bottom-12 left-1/2 -translate-x-1/2 rotate-90",e),disabled:!u,onClick:a,...n,children:[r.jsx(Yt,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Next slide"})]})});jt.displayName="CarouselNext";const tr=({carId:e,mainImageUrl:t})=>{const{data:o,isLoading:n}=Fe({queryKey:["car-images",e],queryFn:async()=>{console.log("Fetching images for car:",e);const{data:i,error:s}=await Q.from("car_images").select("*").eq("car_id",e);if(s)throw console.error("Error fetching car images:",s),s;const a=t?[{id:"main",image_url:t},...i||[]]:i||[];return console.log("Retrieved images:",a),a}});return n?r.jsx(ae,{className:"w-full h-64 rounded-lg"}):o!=null&&o.length?r.jsxs(xt,{className:"w-full",children:[r.jsx(gt,{children:o.map(i=>r.jsx(yt,{children:r.jsx("img",{src:i.image_url,alt:"Car",className:"w-full h-64 object-cover rounded-lg"})},i.id))}),r.jsx(bt,{className:"left-2"}),r.jsx(jt,{className:"right-2"})]}):r.jsx("div",{className:"w-full h-64 bg-muted rounded-lg flex items-center justify-center",children:r.jsx("p",{className:"text-muted-foreground",children:"No images available"})})},nr=({car:e})=>{v.useState(!1),v.useState(0),v.useState(""),At();const{data:t,isLoading:o}=Fe({queryKey:["car-reviews",e.id],queryFn:async()=>{console.log("Fetching reviews for car:",e.id);const{data:n,error:i}=await Q.from("reviews").select(`
          *,
          reviewer:profiles!reviewer_id (
            full_name,
            avatar_url
          )
        `).eq("car_id",e.id).eq("review_type","car").order("created_at",{ascending:!1});if(i)throw console.error("Error fetching reviews:",i),i;return console.log("Retrieved reviews:",n),n}});return r.jsxs(ze,{className:"dark:bg-gray-800 dark:border-gray-700",children:[r.jsx(Ve,{className:"pb-2",children:r.jsxs(Be,{className:"text-lg flex items-center justify-between dark:text-white",children:[r.jsx("div",{className:"flex items-center gap-2",children:r.jsx("span",{className:"text-base text-left text-muted-foreground dark:text-white font-medium",children:"Reviews"})}),r.jsxs("span",{className:"text-sm font-normal text-muted-foreground",children:[(t==null?void 0:t.length)||0," ",(t==null?void 0:t.length)===1?"review":"reviews"]})]})}),r.jsx(_e,{children:r.jsxs("div",{className:"space-y-4",children:[(t==null?void 0:t.length)===0&&r.jsx("div",{className:"text-center py-6",children:r.jsx("span",{className:"text-xs md:text-sm text-muted-foreground",children:"No reviews yet"})}),t==null?void 0:t.map(n=>r.jsxs("div",{className:"border rounded-lg p-4 dark:border-gray-700",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("img",{src:n.reviewer.avatar_url?Q.storage.from("avatars").getPublicUrl(n.reviewer.avatar_url).data.publicUrl:"/placeholder.svg",alt:n.reviewer.full_name,className:"w-8 h-8 rounded-full object-cover"}),r.jsx("span",{className:"font-medium",children:n.reviewer.full_name})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex gap-0.5 mr-2",children:Array.from({length:n.rating}).map((i,s)=>r.jsx(Xt,{className:"h-4 w-4 text-yellow-500",fill:"currentColor"},s))}),r.jsx("span",{className:"text-xs text-muted-foreground",children:n.created_at?Wt(new Date(n.created_at),"MMM d, yyyy"):""})]})]}),n.comment&&r.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:n.comment})]},n.id))]})})]})},rr=({latitude:e,longitude:t,location:o,mapStyle:n="mapbox://styles/mapbox/streets-v12"})=>{const i=v.useRef(null),s=v.useRef(null),a=v.useRef(null),u=v.useRef(!1),[l,c]=v.useState(null),[y,f]=v.useState(!0),p="mapbox://styles/mapbox/light-v11";return v.useEffect(()=>{(async()=>{try{const d=await en();if(!d){q.error("Failed to get the map token");return}c(d),f(!1)}catch(d){console.error("Error getting Mapbox token:",d),q.error("Failed to load map configuration")}})()},[]),v.useEffect(()=>{if(y||!i.current)return;const b=i.current;if(b.offsetWidth===0||b.offsetHeight===0){console.error("Map container has zero width or height");return}if(console.log("Initializing map with coordinates:",{longitude:t,latitude:e}),l)Te.accessToken=l;else{console.error("No Mapbox token available");return}try{s.current=new Te.Map({container:i.current,style:n||p,center:[t,e],zoom:13,interactive:!1}),s.current.on("load",()=>{console.log("Map loaded successfully"),a.current=new Te.Marker({color:"#7C3AED"}).setLngLat([t,e]).addTo(s.current),u.current=!0}),s.current.on("style.load",()=>{console.log("Map style loaded successfully")}),s.current.on("error",d=>{var h;console.error("Map error:",d),q.error("Error loading location map"),d.error&&d.error.message.includes("style")&&n!==p&&(console.log("Attempting to load fallback style"),(h=s.current)==null||h.setStyle(p))})}catch(d){console.error("Error initializing map:",d),q.error("Could not initialize location map")}return()=>{s.current&&(s.current.remove(),s.current=null,a.current=null,u.current=!1)}},[e,t,l,n,y]),v.useEffect(()=>{s.current&&u.current&&a.current&&(s.current.setCenter([t,e]),a.current.setLngLat([t,e]))},[e,t]),v.useEffect(()=>{s.current&&u.current&&s.current.setStyle(n||p)},[n]),r.jsxs(ze,{className:"dark:bg-gray-800 dark:border-gray-700",children:[r.jsx(Ve,{className:"pb-2",children:r.jsx(Be,{className:"text-base text-left text-muted-foreground dark:text-white font-medium",children:"Location"})}),r.jsxs(_e,{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx(dt,{size:16,className:"text-red-500 "}),r.jsx("p",{className:"text-xs md:text-sm text-left text-muted-foreground dark:text-gray-300",children:o})]}),r.jsx("div",{ref:i,className:"w-full h-40 rounded-md overflow-hidden border border-muted dark:border-gray-700"})]})]})},Rr=()=>{var u,l;const{id:e}=lt(),{theme:t}=Pt(),o=tn.useUser(),{data:n,isLoading:i,error:s}=Fe({queryKey:["car",e],queryFn:async()=>{if(console.log("Fetching car details for ID:",e),e==="af67919d-012e-418a-a183-0d390caeef1f"){const{error:f}=await Q.from("cars").update({latitude:-24.6527,longitude:25.9088}).eq("id",e);f&&console.error("Error updating car coordinates:",f)}const{data:c,error:y}=await Q.from("cars").select(`
          *,
          profiles:owner_id (
            full_name,
            avatar_url
          )
        `).eq("id",e).maybeSingle();if(y)throw console.error("Error fetching car:",y),y;return console.log("Car details fetched:",c),o&&(console.log("Current user ID:",o.id),console.log("Car owner ID:",c.owner_id),console.log("Is owner check:",o.id===c.owner_id)),c}});if(i)return r.jsxs("div",{className:"min-h-screen bg-background dark:bg-gray-900",children:[r.jsxs("div",{className:"container mx-auto",children:[r.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[200px] w-full p-4",children:[r.jsx("p",{className:"text-sm text-muted-foreground dark:text-gray-400 mb-3",children:"Loading vehicle details..."}),r.jsx(Tt,{color:"#7c3aed",width:100})]}),r.jsxs("div",{className:"space-y-4 p-4 mt-4",children:[r.jsx(ae,{className:"h-64 w-full bg-gray-200 dark:bg-gray-700"}),r.jsx(ae,{className:"h-8 w-3/4 bg-gray-200 dark:bg-gray-700"}),r.jsx(ae,{className:"h-4 w-1/2 bg-gray-200 dark:bg-gray-700"}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsx(ae,{className:"h-20 bg-gray-200 dark:bg-gray-700"}),r.jsx(ae,{className:"h-20 bg-gray-200 dark:bg-gray-700"}),r.jsx(ae,{className:"h-20 bg-gray-200 dark:bg-gray-700"})]})]})]}),r.jsx(Pe,{})]});if(s||!n)return r.jsxs("div",{className:"min-h-screen bg-background dark:bg-gray-900",children:[r.jsx("div",{className:"container mx-auto",children:r.jsxs("div",{className:"p-4 text-center space-y-4",children:[r.jsx(nn,{className:"h-12 w-12 text-red-500 mx-auto"}),r.jsx("h2",{className:"text-xl font-semibold text-red-500",children:"Error loading vehicle details"}),r.jsx("p",{className:"text-muted-foreground dark:text-gray-400",children:"Please try again later"})]})}),r.jsx(Pe,{})]});const a=(u=n.profiles)!=null&&u.avatar_url?Q.storage.from("avatars").getPublicUrl(n.profiles.avatar_url).data.publicUrl:"/placeholder.svg";return r.jsxs("div",{className:"min-h-screen bg-background dark:bg-gray-900 pb-20",children:[r.jsx("div",{className:"container mx-auto",children:r.jsxs("div",{className:"space-y-4 p-4",children:[r.jsx(tr,{carId:n.id,mainImageUrl:n.image_url}),r.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[r.jsx(jn,{brand:n.brand,model:n.model,year:n.year,location:n.location,pricePerDay:n.price_per_day}),r.jsx(kn,{pricePerDay:n.price_per_day,transmission:n.transmission,seats:n.seats,features:n.features}),n.description&&r.jsx(Qt,{description:n.description}),r.jsx(rr,{latitude:n.latitude,longitude:n.longitude,location:n.location,mapStyle:t==="dark"?"mapbox://styles/mapbox/dark-v11":"mapbox://styles/mapbox/light-v11"}),r.jsx(Jt,{ownerName:((l=n.profiles)==null?void 0:l.full_name)||"Car Owner",avatarUrl:a,ownerId:n.owner_id,carId:n.id}),r.jsx(nr,{car:n})]}),r.jsx(bn,{car:n})]})}),r.jsx(Pe,{})]})};export{Rr as default};
