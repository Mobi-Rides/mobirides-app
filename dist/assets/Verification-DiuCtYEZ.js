var pe=Object.defineProperty;var fe=(i,r,s)=>r in i?pe(i,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[r]=s;var re=(i,r,s)=>fe(i,typeof r!="symbol"?r+"":r,s);import{j as e}from"./query-vendor-C7aRRP05.js";import{c as ne,aC as U,ad as je,B as b,a8 as le,f as R,I as F,aD as ge,J as j,a9 as ee,v as D,m as $,n as z,y as q,aw as ce,aE as Ne,P as Q,z as be,aF as ve,U as ae,aG as S,X as ye,aH as E,T as we,aI as Ce}from"./index-CV3rVyoS.js";import{r as m,R as Y,u as se}from"./react-vendor-mnpoGfEl.js";import{C as P,d as k,a as A,b as _,c as Se}from"./card-BYz0HUlZ.js";import{P as oe}from"./progress-mSNCZC0J.js";import"./separator-BbjXUszL.js";import{A as Pe,a as ke,b as Te,c as Ee,d as Re,e as Fe,f as Ae,g as _e,h as Ie}from"./alert-dialog-C9umbRrm.js";import{U as te}from"./user-BnZM330N.js";import{A as H}from"./arrow-right-CBC0BUbV.js";import{C}from"./circle-check-big-vUkh3tr9.js";import{C as W}from"./camera-B5ieDs1K.js";import{U as Z}from"./upload-COdgzhDy.js";import{C as I}from"./circle-alert-BpEAAwrr.js";import{F as de}from"./file-text-CANqw8Wt.js";import{R as K}from"./rotate-ccw-j14JiNRn.js";import{M as Ve}from"./message-square-INBje8qK.js";import{M as me}from"./map-pin-DSTFqCgm.js";import{P as Oe}from"./pen-line-BLofg9jA.js";import{C as G}from"./clock-DmPI1L3z.js";import{M as xe}from"./mail-BHRmIhQv.js";import{U as De}from"./user-check-Ba1_i7eF.js";import{S as X}from"./shield-TCFOhCsD.js";import{t as Ue}from"./useVerificationStatus-C07Dma4U.js";import{S as he}from"./star-D66U8PNt.js";import{D as Me}from"./download-Diz2m6yS.js";import{C as ie}from"./car-Bf051nla.js";import{C as Le}from"./calendar-C9v2Noik.js";import{H as Be}from"./house-DsXGOxyt.js";import"./supabase-vendor-BOn0LdFJ.js";import"./mapbox-vendor-fnXFVHMy.js";import"./date-vendor-Dhms5dOu.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=ne("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=ne("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]),ze=({onNext:i})=>{const{verificationData:r,updatePersonalInfo:s,isLoading:d,refreshData:x}=U(),[n,l]=m.useState({fullName:"",dateOfBirth:"",nationalIdNumber:"",phoneNumber:"",email:"",address:{street:"",area:"",city:"",postalCode:""}}),[p,N]=m.useState(!1);m.useEffect(()=>{var c,g,y,o;if(r!=null&&r.personal_info){const t=r.personal_info,a={fullName:String((t==null?void 0:t.fullName)||""),dateOfBirth:String((t==null?void 0:t.dateOfBirth)||""),nationalIdNumber:String((t==null?void 0:t.nationalIdNumber)||""),phoneNumber:String((t==null?void 0:t.phoneNumber)||""),email:String((t==null?void 0:t.email)||""),address:{street:String(((c=t==null?void 0:t.address)==null?void 0:c.street)||""),area:String(((g=t==null?void 0:t.address)==null?void 0:g.area)||""),city:String(((y=t==null?void 0:t.address)==null?void 0:y.city)||""),postalCode:String(((o=t==null?void 0:t.address)==null?void 0:o.postalCode)||"")}};l(a);const u=t.fullName||t.phoneNumber||t.email;N(!!u)}},[r]);const v=async c=>{if(c.preventDefault(),!n.fullName||!n.dateOfBirth||!n.nationalIdNumber){j.error("Please fill in all required fields");return}try{await s(n),j.success("Personal information saved successfully!"),i()}catch(g){console.error("Failed to save personal information:",g),j.error("Failed to save personal information")}},h=(c,g)=>{if(c.includes("address.")){const y=c.split(".")[1];l(o=>({...o,address:{...o.address,[y]:g}}))}else l(y=>({...y,[c]:g}))},f=async()=>{if(r!=null&&r.user_id)try{await ge.refreshFromProfile(r.user_id)?(await x(),j.success("Profile data refreshed successfully!")):j.error("Failed to refresh profile data")}catch(c){console.error("Failed to refresh from profile:",c),j.error("Failed to refresh profile data")}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Personal Information"}),e.jsx("p",{className:"text-muted-foreground",children:"Please provide your personal details for verification"})]}),p&&e.jsx(P,{className:"border-blue-200 bg-blue-50 dark:border-blue-800 dark:bg-blue-950",children:e.jsx(k,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(je,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-blue-900 dark:text-blue-100",children:"Profile Data Imported"}),e.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:"We've pre-filled some fields from your profile. Please review and update as needed."}),e.jsxs(b,{type:"button",variant:"outline",size:"sm",onClick:f,className:"text-blue-700 border-blue-300 hover:bg-blue-100 dark:text-blue-300 dark:border-blue-700 dark:hover:bg-blue-900",children:[e.jsx(le,{className:"h-4 w-4 mr-2"}),"Refresh from Profile"]})]})]})})}),e.jsxs(P,{children:[e.jsx(A,{children:e.jsxs(_,{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"h-5 w-5"}),e.jsx("span",{children:"Basic Information"})]})}),e.jsx(k,{children:e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(R,{htmlFor:"fullName",children:"Full Name *"}),e.jsx(F,{id:"fullName",value:n.fullName,onChange:c=>h("fullName",c.target.value),placeholder:"Enter your full name",required:!0})]}),e.jsxs("div",{children:[e.jsx(R,{htmlFor:"dateOfBirth",children:"Date of Birth *"}),e.jsx(F,{id:"dateOfBirth",type:"date",value:n.dateOfBirth,onChange:c=>h("dateOfBirth",c.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx(R,{htmlFor:"nationalIdNumber",children:"National ID Number *"}),e.jsx(F,{id:"nationalIdNumber",value:n.nationalIdNumber,onChange:c=>h("nationalIdNumber",c.target.value),placeholder:"Enter your Omang number",required:!0})]}),e.jsxs("div",{children:[e.jsx(R,{htmlFor:"phoneNumber",children:"Phone Number"}),e.jsx(F,{id:"phoneNumber",type:"tel",value:n.phoneNumber,onChange:c=>h("phoneNumber",c.target.value),placeholder:"+267 XX XXX XXX"})]}),e.jsxs("div",{children:[e.jsx(R,{htmlFor:"email",children:"Email Address"}),e.jsx(F,{id:"email",type:"email",value:n.email,onChange:c=>h("email",c.target.value),placeholder:"your.email@example.com"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-medium",children:"Address Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(R,{htmlFor:"street",children:"Street Address"}),e.jsx(F,{id:"street",value:n.address.street,onChange:c=>h("address.street",c.target.value),placeholder:"Street address"})]}),e.jsxs("div",{children:[e.jsx(R,{htmlFor:"area",children:"Area/Suburb"}),e.jsx(F,{id:"area",value:n.address.area,onChange:c=>h("address.area",c.target.value),placeholder:"Area or suburb"})]}),e.jsxs("div",{children:[e.jsx(R,{htmlFor:"city",children:"City"}),e.jsx(F,{id:"city",value:n.address.city,onChange:c=>h("address.city",c.target.value),placeholder:"City"})]}),e.jsxs("div",{children:[e.jsx(R,{htmlFor:"postalCode",children:"Postal Code"}),e.jsx(F,{id:"postalCode",value:n.address.postalCode,onChange:c=>h("address.postalCode",c.target.value),placeholder:"Postal code"})]})]})]}),e.jsx("div",{className:"flex justify-end pt-6",children:e.jsxs(b,{type:"submit",disabled:d,className:"flex items-center space-x-2",children:[e.jsx("span",{children:d?"Saving...":"Continue to Documents"}),e.jsx(H,{className:"h-4 w-4"})]})})]})})]})]})},He=({onPhotoCapture:i,photoUrl:r,onRetake:s,documentTitle:d})=>{const x=m.useRef(null),n=m.useRef(null),[l,p]=m.useState(null),[N,v]=m.useState(!1),[h,f]=m.useState(!1),c=m.useCallback(async()=>{try{p(null);const o=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:1280},height:{ideal:720},facingMode:"environment"}});x.current&&(x.current.srcObject=o,x.current.onloadedmetadata=()=>{f(!0)})}catch(o){console.error("Camera initialization error:",o);let t="Unable to access camera.";o.name==="NotAllowedError"?t="Camera access denied. Please allow camera permissions and try again.":o.name==="NotFoundError"?t="No camera found. Please ensure your device has a camera.":(o.name==="SecurityError"||window.location.protocol!=="https:")&&(t="Camera access requires HTTPS. Please use HTTPS or upload manually."),p(t)}},[]),g=m.useCallback(()=>{var o;(o=x.current)!=null&&o.srcObject&&x.current.srcObject.getTracks().forEach(a=>a.stop())},[]),y=m.useCallback(async()=>{if(!(!x.current||!n.current||!h)){v(!0);try{const o=x.current,t=n.current,a=t.getContext("2d");if(!a)return;t.width=o.videoWidth,t.height=o.videoHeight,a.drawImage(o,0,0,t.width,t.height),t.toBlob(u=>{u&&(i(u),j.success(`${d} captured successfully!`))},"image/jpeg",.9)}catch(o){console.error("Photo capture error:",o),j.error("Failed to capture photo")}finally{v(!1)}}},[h,i,d]);return m.useEffect(()=>(r||c(),g),[r,c,g]),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"relative bg-gray-900 rounded-lg overflow-hidden aspect-[4/3] max-w-md mx-auto",children:l?e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100",children:e.jsxs("div",{className:"text-center p-4",children:[e.jsx(I,{className:"h-8 w-8 text-red-500 mx-auto mb-2"}),e.jsx("p",{className:"text-xs text-red-600 mb-2",children:l}),e.jsx(b,{onClick:c,size:"sm",children:"Try Again"})]})}):r?e.jsx("img",{src:r,alt:`Captured ${d}`,className:"w-full h-full object-cover"}):e.jsxs(e.Fragment,{children:[e.jsx("video",{ref:x,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 pointer-events-none",children:e.jsx("div",{className:"absolute inset-4 border-2 border-white/50 rounded-lg flex items-center justify-center",children:e.jsxs("div",{className:"text-white text-center",children:[e.jsx(de,{className:"h-8 w-8 mx-auto mb-2"}),e.jsxs("p",{className:"text-sm",children:["Position ",d," in frame"]})]})})})]})}),e.jsx("canvas",{ref:n,className:"hidden"}),e.jsx("div",{className:"flex justify-center space-x-3",children:r?e.jsxs(b,{variant:"outline",onClick:s,className:"flex items-center space-x-2",children:[e.jsx(K,{className:"h-4 w-4"}),e.jsx("span",{children:"Retake"})]}):e.jsxs(b,{onClick:y,disabled:N||!h,className:"flex items-center space-x-2",children:[e.jsx(W,{className:"h-4 w-4"}),e.jsx("span",{children:N?"Capturing...":"Take Photo"})]})})]})},Ye=({onFileSelect:i,photoUrl:r,onRetake:s,documentTitle:d})=>{const x=m.useRef(null),n=p=>{var v;const N=(v=p.target.files)==null?void 0:v[0];if(N){if(!N.type.startsWith("image/")&&N.type!=="application/pdf"){j.error("Please select an image or PDF file");return}if(N.size>10*1024*1024){j.error("File size must be less than 10MB");return}i(N)}},l=()=>{var p;(p=x.current)==null||p.click()};return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"relative bg-gray-50 border-2 border-dashed border-gray-300 rounded-lg overflow-hidden aspect-[4/3] max-w-md mx-auto",children:r?e.jsx("img",{src:r,alt:`Uploaded ${d}`,className:"w-full h-full object-cover"}):e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"text-center p-4",children:[e.jsx(ue,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Upload ",d]}),e.jsxs(b,{onClick:l,size:"sm",className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"h-4 w-4"}),e.jsx("span",{children:"Choose File"})]})]})})}),e.jsx("input",{ref:x,type:"file",accept:"image/*,.pdf",onChange:n,className:"hidden"}),r&&e.jsx("div",{className:"flex justify-center",children:e.jsxs(b,{variant:"outline",onClick:s,className:"flex items-center space-x-2",children:[e.jsx(K,{className:"h-4 w-4"}),e.jsx("span",{children:"Choose Different File"})]})})]})},qe=({onNext:i,onPrevious:r})=>{const{isLoading:s,completeDocumentUpload:d}=U(),{user:x}=ee(),[n,l]=m.useState({}),[p,N]=m.useState({}),v=[{id:"national_id_front",title:"National ID (Front)",description:"Front side of your Botswana National ID (Omang)"},{id:"national_id_back",title:"National ID (Back)",description:"Back side of your Botswana National ID (Omang)"},{id:"driving_license_front",title:"Driving License (Front)",description:"Front side of your valid driving license"},{id:"proof_of_address",title:"Proof of Address",description:"Utility bill or bank statement (max 3 months old)"}],h=m.useCallback((a,u)=>{const w=URL.createObjectURL(u),T={id:a,blob:u,url:w,method:"camera"};l(O=>({...O,[a]:T}))},[]),f=m.useCallback((a,u)=>{var O;const w=URL.createObjectURL(u),T={id:a,blob:u,url:w,method:"upload"};l(B=>({...B,[a]:T})),j.success(`${(O=v.find(B=>B.id===a))==null?void 0:O.title} uploaded successfully!`)},[v]),c=m.useCallback(a=>{l(u=>{const w={...u};return w[a]&&(URL.revokeObjectURL(w[a].url),delete w[a]),w})},[]),g=m.useCallback((a,u)=>{N(w=>({...w,[a]:u})),c(a)},[c]),y=async(a,u)=>new Promise(w=>{setTimeout(()=>{j.success(`${a.name} uploaded successfully`),w(!0)},1e3)}),o=async()=>{if(Object.keys(n).length<v.length){j.error("Please upload all required documents");return}try{for(const[u,w]of Object.entries(n)){const T=new File([w.blob],`${u}.jpg`,{type:"image/jpeg"});await y(T,u)}await d((x==null?void 0:x.id)||""),i()}catch(u){console.error("Document upload completion error:",u),j.error("Failed to complete document upload")}},t=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia;return e.jsxs("div",{className:"max-w-2xl mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Document Upload"}),e.jsx("p",{className:"text-gray-600",children:"Please upload the following documents to verify your identity"})]}),e.jsx("div",{className:"space-y-8",children:v.map(a=>{const u=n[a.id],w=p[a.id]||(t?"camera":"upload");return e.jsxs("div",{className:"border rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:a.title}),e.jsx("p",{className:"text-sm text-gray-600",children:a.description})]}),u&&e.jsxs(D,{variant:"default",className:"bg-green-100 text-green-800",children:[e.jsx(C,{className:"h-3 w-3 mr-1"}),"Uploaded"]})]}),t&&e.jsxs("div",{className:"flex mb-6 bg-gray-100 rounded-lg p-1",children:[e.jsxs("button",{onClick:()=>g(a.id,"camera"),className:`flex-1 flex items-center justify-center space-x-2 py-2 px-4 rounded-md text-sm font-medium transition-colors ${w==="camera"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(W,{className:"h-4 w-4"}),e.jsx("span",{children:"Take Photo"})]}),e.jsxs("button",{onClick:()=>g(a.id,"upload"),className:`flex-1 flex items-center justify-center space-x-2 py-2 px-4 rounded-md text-sm font-medium transition-colors ${w==="upload"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(Z,{className:"h-4 w-4"}),e.jsx("span",{children:"Upload File"})]})]}),w==="camera"?e.jsx(He,{onPhotoCapture:T=>h(a.id,T),photoUrl:(u==null?void 0:u.url)||null,onRetake:()=>c(a.id),documentTitle:a.title}):e.jsx(Ye,{onFileSelect:T=>f(a.id,T),photoUrl:(u==null?void 0:u.url)||null,onRetake:()=>c(a.id),documentTitle:a.title}),!t&&e.jsxs($,{className:"mt-4",children:[e.jsx(I,{className:"h-4 w-4"}),e.jsx(z,{children:"Camera not available. Please upload files manually."})]})]},a.id)})}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-3 pt-6",children:[e.jsxs(b,{variant:"outline",onClick:r,className:"flex items-center justify-center space-x-2 w-full sm:w-auto min-h-[48px] sm:min-h-[40px]",children:[e.jsx(q,{className:"h-4 w-4"}),e.jsx("span",{children:"Previous"})]}),e.jsxs(b,{onClick:o,disabled:s||Object.keys(n).length<v.length,className:"flex items-center justify-center space-x-2 w-full sm:w-auto min-h-[48px] sm:min-h-[40px]",children:[s?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):e.jsx(H,{className:"h-4 w-4"}),e.jsx("span",{children:s?"Processing...":"Continue"})]})]})]})},We=({onCapture:i,onRetake:r,isCapturing:s,hasPhoto:d})=>e.jsx("div",{className:"flex justify-center space-x-4 mt-6",children:d?e.jsx("div",{className:"flex space-x-3",children:e.jsxs(b,{variant:"outline",onClick:r,className:"flex items-center space-x-2",children:[e.jsx(K,{className:"h-4 w-4"}),e.jsx("span",{children:"Retake"})]})}):e.jsxs(b,{onClick:i,disabled:s,size:"lg",className:"flex items-center space-x-2",children:[e.jsx(W,{className:"h-5 w-5"}),e.jsx("span",{children:s?"Capturing...":"Take Selfie"})]})}),Xe=({onFileSelect:i,photoUrl:r,onRetake:s})=>{const d=m.useRef(null),x=l=>{var N;const p=(N=l.target.files)==null?void 0:N[0];if(p){if(!p.type.startsWith("image/")){j.error("Please select an image file");return}if(p.size>10*1024*1024){j.error("File size must be less than 10MB");return}i(p)}},n=()=>{var l;(l=d.current)==null||l.click()};return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"relative bg-gray-50 border-2 border-dashed border-gray-300 rounded-lg overflow-hidden aspect-[4/3] max-w-md mx-auto",children:r?e.jsx("img",{src:r,alt:"Uploaded selfie",className:"w-full h-full object-cover"}):e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"text-center p-6",children:[e.jsx(ue,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Upload a clear selfie photo"}),e.jsxs(b,{onClick:n,className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"h-4 w-4"}),e.jsx("span",{children:"Choose File"})]})]})})}),e.jsx("input",{ref:d,type:"file",accept:"image/*",onChange:x,className:"hidden"}),r&&e.jsx("div",{className:"flex justify-center",children:e.jsxs(b,{variant:"outline",onClick:s,className:"flex items-center space-x-2",children:[e.jsx(K,{className:"h-4 w-4"}),e.jsx("span",{children:"Choose Different Photo"})]})})]})},Ge=()=>e.jsxs(P,{className:"mb-6",children:[e.jsx(A,{children:e.jsxs(_,{className:"flex items-center space-x-2 text-lg",children:[e.jsx(te,{className:"h-5 w-5"}),e.jsx("span",{children:"Selfie Guidelines"})]})}),e.jsx(k,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h4",{className:"font-medium text-green-600 flex items-center space-x-2",children:[e.jsx(C,{className:"h-4 w-4"}),e.jsx("span",{children:"Do This"})]}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx(ce,{className:"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"Look directly at the camera"})]}),e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx(Ne,{className:"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"Have a neutral expression"})]}),e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx(C,{className:"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"Ensure good lighting on your face"})]}),e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx(C,{className:"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"Remove sunglasses and hats"})]}),e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx(C,{className:"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"Face the camera directly"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h4",{className:"font-medium text-red-600 flex items-center space-x-2",children:[e.jsx(I,{className:"h-4 w-4"}),e.jsx("span",{children:"Avoid This"})]}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx(I,{className:"h-4 w-4 text-red-500 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"Don't cover your face"})]}),e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx(I,{className:"h-4 w-4 text-red-500 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"Don't take photos in dark lighting"})]}),e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx(I,{className:"h-4 w-4 text-red-500 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"Don't blur the image"})]}),e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx(I,{className:"h-4 w-4 text-red-500 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"Don't include other people"})]}),e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx(I,{className:"h-4 w-4 text-red-500 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"Don't tilt your head significantly"})]})]})]})]})})]}),Je=({onPhotoCapture:i,photoUrl:r,onRetake:s})=>{const d=m.useRef(null),x=m.useRef(null),[n,l]=m.useState(null),[p,N]=m.useState(!1),[v,h]=m.useState(!1),f=m.useCallback(async()=>{try{l(null);const o=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:640},height:{ideal:480},facingMode:"user"}});d.current&&(d.current.srcObject=o,d.current.onloadedmetadata=()=>{h(!0)})}catch(o){console.error("Camera initialization error:",o);let t="Unable to access camera.";o.name==="NotAllowedError"?t="Camera access denied. Please allow camera permissions in your browser settings and try again.":o.name==="NotFoundError"?t="No camera found. Please ensure your device has a camera connected.":o.name==="NotReadableError"?t="Camera is already in use by another application. Please close other apps using the camera.":o.name==="SecurityError"||window.location.protocol!=="https:"?t="Camera access requires a secure connection (HTTPS). Please use HTTPS or try uploading a selfie manually.":o.name==="NotSupportedError"&&(t="Camera not supported on this device or browser. Please try a different browser or upload a selfie manually."),l(t)}},[]),c=m.useCallback(()=>{var o;(o=d.current)!=null&&o.srcObject&&d.current.srcObject.getTracks().forEach(a=>a.stop())},[]),g=m.useCallback(async()=>{if(!(!d.current||!x.current||!v)){N(!0);try{const o=d.current,t=x.current,a=t.getContext("2d");if(!a)return;t.width=o.videoWidth,t.height=o.videoHeight,a.drawImage(o,0,0,t.width,t.height),t.toBlob(u=>{u&&(i(u),j.success("Selfie captured successfully!"))},"image/jpeg",.8)}catch(o){console.error("Photo capture error:",o),j.error("Failed to capture photo")}finally{N(!1)}}},[v,i]),y=m.useCallback(()=>{s(),v||f()},[s,v,f]);return m.useEffect(()=>(r||f(),c),[r,f,c]),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"relative bg-gray-900 rounded-lg overflow-hidden aspect-[4/3] max-w-md mx-auto",children:n?e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100",children:e.jsxs("div",{className:"text-center p-6",children:[e.jsx(I,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("p",{className:"text-sm text-red-600 mb-4",children:n}),e.jsx(b,{onClick:f,size:"sm",children:"Try Again"})]})}):r?e.jsx("img",{src:r,alt:"Captured selfie",className:"w-full h-full object-cover"}):e.jsxs(e.Fragment,{children:[e.jsx("video",{ref:d,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 pointer-events-none",children:e.jsxs("div",{className:"relative w-full h-full",children:[e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"w-48 h-48 border-2 border-white/50 rounded-full flex items-center justify-center",children:e.jsx("div",{className:"w-44 h-44 border border-white/30 rounded-full"})})}),e.jsx("div",{className:"absolute top-4 left-4 right-4",children:e.jsx("div",{className:"bg-black/50 text-white text-center py-2 px-4 rounded",children:e.jsx("p",{className:"text-sm",children:v?"Position your face in the circle":"Loading camera..."})})})]})})]})}),e.jsx("canvas",{ref:x,className:"hidden"}),e.jsx(We,{onCapture:g,onRetake:y,isCapturing:p,hasPhoto:!!r})]})},Ze=({onNext:i,onPrevious:r})=>{const{verificationData:s,completeSelfieVerification:d,isLoading:x}=U(),[n,l]=m.useState(null),[p,N]=m.useState(null),[v,h]=m.useState(!1),[f,c]=m.useState("camera"),g=m.useCallback(w=>{l(w);const T=URL.createObjectURL(w);N(T)},[]),y=m.useCallback(()=>{p&&URL.revokeObjectURL(p),l(null),N(null)},[p]),o=m.useCallback(w=>{const T=new Blob([w],{type:w.type});l(T);const O=URL.createObjectURL(T);N(O),j.success("Photo uploaded successfully!")},[]),t=async()=>{if(!n){j.error("Please take a selfie first");return}try{h(!0),await d(),j.success("Selfie verification completed!"),setTimeout(()=>{i()},1e3)}catch(w){console.error("Failed to submit selfie:",w),j.error("Failed to submit selfie verification")}finally{h(!1)}},u=!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia?{supported:!1,error:"Your browser doesn't support camera access. Please use a modern browser (Chrome, Firefox, Safari, Edge) or upload a selfie manually."}:window.location.protocol!=="https:"&&window.location.hostname!=="localhost"?{supported:!1,error:"Camera access requires a secure connection (HTTPS). Please access this page via HTTPS or upload a selfie manually."}:{supported:!0,error:null};return m.useEffect(()=>{u.supported||c("upload")},[u.supported]),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Take Your Verification Selfie"}),e.jsx("p",{className:"text-muted-foreground",children:"We need to verify that you're the same person as in your ID documents"})]}),e.jsx(Ge,{}),e.jsxs(P,{children:[e.jsx(A,{children:e.jsxs(_,{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Capture Your Selfie"}),p&&e.jsxs(D,{variant:"secondary",className:"bg-green-100 text-green-700",children:[e.jsx(C,{className:"h-3 w-3 mr-1"}),"Photo Captured"]})]})}),e.jsxs(k,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-1 mb-6 bg-gray-100 p-1 rounded-lg",children:[e.jsxs("button",{onClick:()=>c("camera"),disabled:!u.supported,className:`flex-1 min-h-[48px] sm:min-h-[40px] py-3 sm:py-2 px-4 rounded-md text-sm sm:text-base font-medium transition-colors flex items-center justify-center ${f==="camera"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"} ${u.supported?"":"opacity-50 cursor-not-allowed"}`,children:[e.jsx(W,{className:"h-4 w-4 flex-shrink-0 mr-2"}),e.jsx("span",{className:"truncate",children:"Use Camera"})]}),e.jsxs("button",{onClick:()=>c("upload"),className:`flex-1 min-h-[48px] sm:min-h-[40px] py-3 sm:py-2 px-4 rounded-md text-sm sm:text-base font-medium transition-colors flex items-center justify-center ${f==="upload"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(Z,{className:"h-4 w-4 flex-shrink-0 mr-2"}),e.jsx("span",{className:"truncate",children:"Upload Photo"})]})]}),!u.supported&&f==="camera"&&e.jsxs($,{className:"mb-4",children:[e.jsx(I,{className:"h-4 w-4"}),e.jsxs(z,{children:[e.jsx("strong",{children:"Camera Access Issue:"})," ",u.error,window.location.protocol!=="https:"&&window.location.hostname!=="localhost"&&e.jsxs("div",{className:"mt-2 p-2 bg-blue-50 border border-blue-200 rounded",children:[e.jsx("strong",{children:"💡 Quick Fix:"})," Try accessing this page with ",e.jsx("code",{children:"https://"})," instead of ",e.jsx("code",{children:"http://"})]})]})]}),f==="camera"&&u.supported?e.jsx(Je,{onPhotoCapture:g,photoUrl:p,onRetake:y}):e.jsx(Xe,{onFileSelect:o,photoUrl:p,onRetake:y})]})]}),e.jsxs($,{children:[e.jsx(I,{className:"h-4 w-4"}),e.jsxs(z,{children:[e.jsx("strong",{children:"Privacy Notice:"})," Your selfie is used only for identity verification and is processed securely. We do not use your photo for any other purposes."]})]}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row justify-between gap-3 sm:gap-0 pt-6",children:[e.jsxs(b,{variant:"outline",onClick:r,className:"flex items-center justify-center space-x-2 min-h-[48px] sm:min-h-[40px] w-full sm:w-auto",children:[e.jsx(q,{className:"h-4 w-4 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Previous"})]}),e.jsxs(b,{onClick:t,disabled:!p||v||x,className:"flex items-center justify-center space-x-2 min-h-[48px] sm:min-h-[40px] w-full sm:w-auto",children:[e.jsx("span",{className:"truncate",children:v?"Submitting...":"Continue to Phone Verification"}),e.jsx(H,{className:"h-4 w-4 flex-shrink-0"})]})]})]})},Ke=({onNext:i,onPrevious:r})=>{const{updatePhoneVerification:s,isLoading:d}=U(),[x,n]=m.useState(""),[l,p]=m.useState(""),[N,v]=m.useState(!1),[h,f]=m.useState(!1),c=async()=>{if(!x){j.error("Please enter your phone number");return}setTimeout(()=>{v(!0),j.success("Verification code sent to your phone")},1e3)},g=async()=>{if(!l){j.error("Please enter the verification code");return}l==="123456"||l.length===6?(f(!0),await s({phoneNumber:x,countryCode:"+267",verificationCode:l,isVerified:!0}),j.success("Phone number verified successfully!")):j.error("Invalid verification code")},y=()=>{if(!h){j.error("Please verify your phone number first");return}i()};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Phone Verification"}),e.jsx("p",{className:"text-muted-foreground",children:"Verify your phone number to secure your account"})]}),e.jsxs(P,{children:[e.jsx(A,{children:e.jsxs(_,{className:"flex items-center space-x-2",children:[e.jsx(Q,{className:"h-5 w-5"}),e.jsx("span",{children:"Phone Number Verification"})]})}),e.jsxs(k,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(R,{htmlFor:"phoneNumber",children:"Phone Number"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(F,{id:"phoneNumber",type:"tel",value:x,onChange:o=>n(o.target.value),placeholder:"+267 XX XXX XXX",disabled:N}),e.jsx(b,{onClick:c,disabled:N||!x,variant:"outline",children:N?"Code Sent":"Send Code"})]})]}),N&&!h&&e.jsxs("div",{children:[e.jsxs(R,{htmlFor:"verificationCode",children:[e.jsx(Ve,{className:"h-4 w-4 inline mr-2"}),"Verification Code"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(F,{id:"verificationCode",value:l,onChange:o=>p(o.target.value),placeholder:"Enter 6-digit code",maxLength:6}),e.jsx(b,{onClick:g,disabled:!l,children:"Verify"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Enter the 6-digit code sent to your phone"})]}),h&&e.jsxs("div",{className:"flex items-center justify-center p-4 bg-green-50 border border-green-200 rounded-lg",children:[e.jsx(Q,{className:"h-5 w-5 text-green-500 mr-2"}),e.jsx("span",{className:"text-green-700",children:"Phone number verified successfully!"})]})]})]}),e.jsxs("div",{className:"flex justify-between pt-6",children:[e.jsxs(b,{variant:"outline",onClick:r,children:[e.jsx(q,{className:"h-4 w-4 mr-2"}),"Previous"]}),e.jsxs(b,{onClick:y,disabled:d||!h,children:[e.jsx("span",{children:"Continue to Address"}),e.jsx(H,{className:"h-4 w-4 ml-2"})]})]})]})},Qe=({onNext:i,onPrevious:r})=>{const{verificationData:s,updateAddressConfirmation:d,updatePersonalInfo:x,isLoading:n}=U(),[l,p]=m.useState(!1),[N,v]=m.useState(!1),[h,f]=m.useState({street:"",area:"",city:"",postalCode:""});m.useEffect(()=>{var t;(t=s==null?void 0:s.personal_info)!=null&&t.address&&f(s.personal_info.address)},[s]);const c=async()=>{try{await x({...s==null?void 0:s.personal_info,address:h}),v(!1),j.success("Address updated successfully!")}catch(t){console.error("Failed to update address:",t),j.error("Failed to update address")}},g=(t,a)=>{f(u=>({...u,[t]:a}))},y=async()=>{await d({currentAddress:h,confirmationMethod:"document",isConfirmed:!0,confirmationDate:new Date().toISOString()}),p(!0),j.success("Address confirmed successfully!")},o=()=>{if(!l){j.error("Please confirm your address first");return}i()};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Address Confirmation"}),e.jsx("p",{className:"text-muted-foreground",children:"Confirm your residential address details"})]}),e.jsxs(P,{children:[e.jsx(A,{children:e.jsxs(_,{className:"flex items-center space-x-2",children:[e.jsx(me,{className:"h-5 w-5"}),e.jsx("span",{children:"Residential Address"})]})}),e.jsxs(k,{className:"space-y-4",children:[N?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(R,{htmlFor:"edit-street",children:"Street Address"}),e.jsx(F,{id:"edit-street",value:h.street,onChange:t=>g("street",t.target.value),placeholder:"Street address"})]}),e.jsxs("div",{children:[e.jsx(R,{htmlFor:"edit-area",children:"Area/Suburb"}),e.jsx(F,{id:"edit-area",value:h.area,onChange:t=>g("area",t.target.value),placeholder:"Area or suburb"})]}),e.jsxs("div",{children:[e.jsx(R,{htmlFor:"edit-city",children:"City"}),e.jsx(F,{id:"edit-city",value:h.city,onChange:t=>g("city",t.target.value),placeholder:"City"})]}),e.jsxs("div",{children:[e.jsx(R,{htmlFor:"edit-postalCode",children:"Postal Code"}),e.jsx(F,{id:"edit-postalCode",value:h.postalCode,onChange:t=>g("postalCode",t.target.value),placeholder:"Postal code"})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(b,{onClick:c,disabled:n,children:"Save Changes"}),e.jsx(b,{variant:"outline",onClick:()=>{var t;v(!1),f(((t=s==null?void 0:s.personal_info)==null?void 0:t.address)||{street:"",area:"",city:"",postalCode:""})},children:"Cancel"})]})]}):e.jsxs("div",{className:"bg-muted p-4 rounded-lg",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Street:"})," ",h.street||"Not provided"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Area:"})," ",h.area||"Not provided"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"City:"})," ",h.city||"Not provided"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Postal Code:"})," ",h.postalCode||"Not provided"]})]}),e.jsx("div",{className:"mt-3",children:e.jsxs(b,{variant:"outline",size:"sm",onClick:()=>v(!0),children:[e.jsx(Oe,{className:"h-4 w-4 mr-2"}),"Edit Address"]})})]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:e.jsx("p",{children:"Please confirm that the address above is correct. This address will be used for verification purposes and should match your proof of address document."})}),l?e.jsxs("div",{className:"flex items-center justify-center p-4 bg-green-50 border border-green-200 rounded-lg",children:[e.jsx(C,{className:"h-5 w-5 text-green-500 mr-2"}),e.jsx("span",{className:"text-green-700",children:"Address confirmed successfully!"})]}):e.jsxs(b,{onClick:y,className:"w-full",children:[e.jsx(C,{className:"h-4 w-4 mr-2"}),"Confirm Address"]})]})]}),e.jsxs("div",{className:"flex justify-between pt-6",children:[e.jsxs(b,{variant:"outline",onClick:r,children:[e.jsx(q,{className:"h-4 w-4 mr-2"}),"Previous"]}),e.jsxs(b,{onClick:o,disabled:n||!l,children:[e.jsx("span",{children:"Continue to Review"}),e.jsx(H,{className:"h-4 w-4 ml-2"})]})]})]})},es=({onNext:i,onPrevious:r})=>{var v,h,f;const{verificationData:s,submitForReview:d,isLoading:x}=U(),[n,l]=m.useState(!1),p=async()=>{try{l(!0),await d(),j.success("Verification submitted for review!"),i()}catch(c){console.error("Failed to submit verification:",c),j.error("Failed to submit verification")}finally{l(!1)}},N=[{title:"Personal Information",completed:!!((v=s==null?void 0:s.personal_info)!=null&&v.fullName),details:String(((h=s==null?void 0:s.personal_info)==null?void 0:h.fullName)||"Not completed")},{title:"Document Upload",completed:!0,details:"All required documents uploaded"},{title:"Selfie Verification",completed:!0,details:"Selfie photo captured"},{title:"Phone Verification",completed:!0,details:String(((f=s==null?void 0:s.personal_info)==null?void 0:f.phoneNumber)||"Phone verified")},{title:"Address Confirmation",completed:!0,details:"Address confirmed"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Review & Submit"}),e.jsx("p",{className:"text-muted-foreground",children:"Review your information before submitting for verification"})]}),e.jsxs(P,{children:[e.jsx(A,{children:e.jsx(_,{children:"Verification Summary"})}),e.jsx(k,{children:e.jsx("div",{className:"space-y-4",children:N.map((c,g)=>e.jsx("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(C,{className:`h-5 w-5 ${c.completed?"text-green-500":"text-gray-400"}`}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:c.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:c.details})]})]})},g))})})]}),e.jsx(P,{children:e.jsx(k,{className:"pt-6",children:e.jsxs("div",{className:"text-sm text-muted-foreground space-y-2",children:[e.jsx("p",{children:e.jsx("strong",{children:"What happens next?"})}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"Your verification will be reviewed by our team"}),e.jsx("li",{children:"You'll receive email updates on the status"}),e.jsx("li",{children:"Processing typically takes 1-3 business days"}),e.jsx("li",{children:"You can check progress anytime in your profile"})]})]})})}),e.jsxs("div",{className:"flex justify-between pt-6",children:[e.jsxs(b,{variant:"outline",onClick:r,children:[e.jsx(q,{className:"h-4 w-4 mr-2"}),"Previous"]}),e.jsxs(b,{onClick:p,disabled:x||n,className:"bg-green-600 hover:bg-green-700",children:[e.jsx(be,{className:"h-4 w-4 mr-2"}),e.jsx("span",{children:n?"Submitting...":"Submit for Review"})]})]})]})},ss=({title:i,description:r,icon:s,status:d,estimatedTime:x})=>{const n=()=>{switch(d){case"completed":return"text-green-600";case"in_progress":return"text-blue-600";default:return"text-gray-400"}},l=()=>{switch(d){case"completed":return e.jsxs(D,{variant:"secondary",className:"bg-green-100 text-green-700",children:[e.jsx(C,{className:"h-3 w-3 mr-1"}),"Complete"]});case"in_progress":return e.jsxs(D,{variant:"secondary",className:"bg-blue-100 text-blue-700",children:[e.jsx(G,{className:"h-3 w-3 mr-1"}),"Processing"]});default:return e.jsx(D,{variant:"outline",children:"Pending"})}};return e.jsxs("div",{className:"flex items-start space-x-4 p-4 border rounded-lg",children:[e.jsx("div",{className:`p-2 rounded-full ${d==="completed"?"bg-green-100":d==="in_progress"?"bg-blue-100":"bg-gray-100"}`,children:e.jsx("div",{className:n(),children:s})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h4",{className:"font-medium",children:i}),l()]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:r}),d==="in_progress"&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),e.jsx("span",{className:"text-sm text-blue-600",children:"Processing..."})]}),x&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Estimated time: ",x]})]})]})]})},ts=({onNext:i})=>{const{user:r}=ee(),{verificationData:s,refreshData:d}=U(),[x,n]=m.useState(25),[l,p]=m.useState(0),[N,v]=m.useState(!1),h=[{title:"Document Review",description:"Our team is reviewing your uploaded documents for authenticity and completeness",icon:e.jsx($e,{className:"h-5 w-5"}),estimatedTime:"2-4 hours"},{title:"Identity Verification",description:"Verifying your identity against official databases and cross-referencing documents",icon:e.jsx(De,{className:"h-5 w-5"}),estimatedTime:"4-8 hours"},{title:"Address Confirmation",description:"Confirming your residential address and proof of address documents",icon:e.jsx(ce,{className:"h-5 w-5"}),estimatedTime:"1-2 hours"},{title:"Final Approval",description:"Final review and approval of your verification application",icon:e.jsx(X,{className:"h-5 w-5"}),estimatedTime:"30 minutes"}];m.useEffect(()=>{const a=setInterval(()=>{n(u=>{const w=Math.min(u+8,100);return w>=25&&l<1&&p(1),w>=50&&l<2&&p(2),w>=75&&l<3&&p(3),w})},2e3);return()=>clearInterval(a)},[l]),m.useEffect(()=>{if(x>=100){const a=setTimeout(()=>{console.log("[ProcessingStatusStep] Auto-advancing to completion step"),i()},3e3);return()=>clearTimeout(a)}},[x,i]),m.useEffect(()=>{const a=setInterval(()=>{d()},1e4);return()=>clearInterval(a)},[d]);const f=a=>a<l?"completed":a===l?"in_progress":"pending",c=()=>{const a=new Date,u=Math.max(1,Math.ceil((100-x)/10));return new Date(a.getTime()+u*60*60*1e3).toLocaleString("en-BW",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})},g=(s==null?void 0:s.overall_status)==="completed",[y]=Y.useState(Date.now()),[o,t]=Y.useState(!1);return Y.useEffect(()=>{const a=setInterval(()=>{Date.now()-y>36e5&&t(!0)},6e4);return()=>clearInterval(a)},[y]),Y.useEffect(()=>{if(g){const a=setTimeout(()=>{console.log("[ProcessingStatusStep] Verification already complete, advancing"),i()},1e3);return()=>clearTimeout(a)}},[g,i]),g?e.jsxs("div",{className:"text-center p-8",children:[e.jsx(C,{className:"h-16 w-16 text-green-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-green-700 mb-2",children:"Verification Complete!"}),e.jsx("p",{className:"text-muted-foreground",children:"Redirecting to completion step..."})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Verification in Progress"}),e.jsx("p",{className:"text-muted-foreground",children:"Your verification is being processed by our team"})]}),o&&e.jsxs("div",{className:"p-4 bg-yellow-100 border border-yellow-300 rounded text-yellow-800",children:[e.jsx("strong",{children:"Note:"})," Verification processing is taking longer than usual. If you have any concerns, please contact our support team with your reference number."]}),e.jsxs(P,{children:[e.jsx(A,{children:e.jsxs(_,{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Overall Progress"}),e.jsxs(D,{variant:"secondary",className:"bg-blue-100 text-blue-700",children:[e.jsx(G,{className:"h-3 w-3 mr-1"}),"Processing"]})]})}),e.jsxs(k,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Verification Progress"}),e.jsxs("span",{children:[x,"%"]})]}),e.jsx(oe,{value:x,className:"h-3"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Estimated Completion"}),e.jsx("p",{className:"text-muted-foreground",children:c()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Reference Number"}),e.jsx("p",{className:"text-muted-foreground font-mono",children:s!=null&&s.user_id?`VER-${s.user_id.slice(-8).toUpperCase()}`:"Generating..."})]})]})]})]}),e.jsxs(P,{children:[e.jsx(A,{children:e.jsx(_,{children:"Processing Stages"})}),e.jsx(k,{children:e.jsx("div",{className:"space-y-4",children:h.map((a,u)=>e.jsx(ss,{title:a.title,description:a.description,icon:a.icon,status:f(u),estimatedTime:f(u)==="in_progress"?a.estimatedTime:void 0},u))})})]}),e.jsxs(P,{children:[e.jsx(A,{children:e.jsxs(_,{className:"flex items-center space-x-2",children:[e.jsx(xe,{className:"h-5 w-5"}),e.jsx("span",{children:"Status Updates"})]})}),e.jsx(k,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-green-50 rounded-lg",children:[e.jsx(C,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-green-700",children:"Verification Submitted"}),e.jsx("p",{className:"text-sm text-green-600",children:s!=null&&s.created_at?new Date(s.created_at).toLocaleString():"Just now"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-blue-50 rounded-lg",children:[e.jsx(G,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-blue-700",children:"Review in Progress"}),e.jsx("p",{className:"text-sm text-blue-600",children:"Our verification team is currently reviewing your documents"})]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs($,{children:[e.jsx(I,{className:"h-4 w-4"}),e.jsxs(z,{children:[e.jsx("strong",{children:"What happens next?"})," You'll receive email notifications for any status updates. You can close this page and return anytime to check progress."]})]}),e.jsxs($,{children:[e.jsx(I,{className:"h-4 w-4"}),e.jsxs(z,{children:[e.jsx("strong",{children:"Need help?"})," If you have questions about your verification, contact our support team with your reference number."]})]})]}),!1]})},rs=({verificationData:i})=>{const r=i!=null&&i.user_id?`VER-${i.user_id.slice(-8).toUpperCase()}`:"Unknown",s=i!=null&&i.completed_at?new Date(i.completed_at).toLocaleDateString():new Date().toLocaleDateString(),d=()=>{navigator.clipboard.writeText(r),j.success("Verification ID copied to clipboard")};return e.jsxs(P,{className:"border-green-200 bg-green-50",children:[e.jsxs(A,{className:"text-center",children:[e.jsx("div",{className:"mx-auto mb-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(X,{className:"h-16 w-16 text-green-600 mx-auto"}),e.jsx(C,{className:"h-6 w-6 text-green-600 absolute -bottom-1 -right-1 bg-white rounded-full"})]})}),e.jsx(_,{className:"text-green-700",children:"Verification Complete!"})]}),e.jsx(k,{className:"space-y-4",children:e.jsxs("div",{className:"text-center",children:[e.jsxs(D,{variant:"secondary",className:"bg-green-100 text-green-700 mb-4",children:[e.jsx(C,{className:"h-3 w-3 mr-1"}),"Verified User"]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-600",children:"Verification ID"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("code",{className:"text-green-600 font-mono",children:r}),e.jsx(b,{variant:"ghost",size:"icon",onClick:d,className:"h-6 w-6",children:e.jsx(ve,{className:"h-3 w-3"})})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-600",children:"Completion Date"}),e.jsx("p",{className:"text-green-600",children:s})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-600",children:"User Role"}),e.jsx("p",{className:"text-green-600 capitalize",children:(i==null?void 0:i.user_role)||"Renter"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-600",children:"Status"}),e.jsx("p",{className:"text-green-600",children:"Active"})]})]})]})]})})]})},as=({userRole:i})=>{const r=se(),x=i==="host"?[{title:"Add Your First Car",description:"List your vehicle and start earning",icon:e.jsx(ie,{className:"h-5 w-5 text-blue-500"}),action:()=>r("/add-car"),buttonText:"Add Car"},{title:"Set Up Hosting Profile",description:"Complete your hosting profile and preferences",icon:e.jsx(ae,{className:"h-5 w-5 text-purple-500"}),action:()=>r("/profile"),buttonText:"Setup Profile"},{title:"View Dashboard",description:"Monitor your bookings and earnings",icon:e.jsx(he,{className:"h-5 w-5 text-orange-500"}),action:()=>r("/dashboard"),buttonText:"Open Dashboard"}]:[{title:"Browse Available Cars",description:"Explore cars available for rent in your area",icon:e.jsx(ie,{className:"h-5 w-5 text-blue-500"}),action:()=>r("/"),buttonText:"Browse Cars"},{title:"Complete Your Profile",description:"Add a profile photo and additional details",icon:e.jsx(ae,{className:"h-5 w-5 text-purple-500"}),action:()=>r("/profile"),buttonText:"Edit Profile"},{title:"Make Your First Booking",description:"Find and book your first rental car",icon:e.jsx(Le,{className:"h-5 w-5 text-green-500"}),action:()=>r("/"),buttonText:"Start Booking"}];return e.jsxs(P,{children:[e.jsx(A,{children:e.jsx(_,{children:"What's Next?"})}),e.jsx(k,{children:e.jsx("div",{className:"space-y-4",children:x.map((n,l)=>e.jsxs("div",{className:"flex items-start space-x-4 p-4 border rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx("div",{className:"p-2 bg-gray-100 rounded-full",children:n.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium mb-1",children:n.title}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:n.description}),e.jsxs(b,{onClick:n.action,size:"sm",className:"flex items-center space-x-2",children:[e.jsx("span",{children:n.buttonText}),e.jsx(H,{className:"h-3 w-3"})]})]})]},l))})})]})},is=()=>{const{verificationData:i}=U(),r=se();if(Y.useEffect(()=>{Ue();const n=sessionStorage.getItem("verification_return_context");if(n)try{const l=JSON.parse(n);console.log("[CompletionStep] Found return context:",l),sessionStorage.removeItem("verification_return_context"),setTimeout(()=>{if(l.action==="booking"&&l.carData){const p=l.carData.id||l.carData.car_id;r(`/cars/${p}`),j.success("Verification complete! You can now book this car.")}else l.action==="listing"?(r("/add-car"),j.success("Verification complete! You can now list your vehicle.")):r("/")},3e3)}catch(l){console.error("[CompletionStep] Failed to parse return context:",l)}},[r]),!i)return e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-muted-foreground",children:"No verification data found"})});const s=()=>{i.user_role==="host"?r("/dashboard"):r("/")},d=()=>{j.success("Certificate download started (Feature coming soon)")},x=i.user_role==="host"?"host":"renter";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"mx-auto mb-6",children:e.jsx("div",{className:"relative",children:e.jsx("div",{className:"animate-bounce",children:e.jsx(C,{className:"h-20 w-20 text-green-500 mx-auto"})})})}),e.jsx("h1",{className:"text-3xl font-bold text-green-700 mb-2",children:"🎉 Verification Complete!"}),e.jsx("p",{className:"text-lg text-muted-foreground",children:"Welcome to MobiRides! Your identity has been successfully verified."})]}),e.jsx(rs,{verificationData:i}),e.jsxs(P,{children:[e.jsx(A,{children:e.jsxs(_,{className:"flex items-center space-x-2",children:[e.jsx(he,{className:"h-5 w-5 text-orange-500"}),e.jsx("span",{children:"Your Verification Benefits"})]})}),e.jsx(k,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(C,{className:"h-5 w-5 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Trusted Member Badge"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Show other users you're verified"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(C,{className:"h-5 w-5 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Full Platform Access"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Book cars and access all features"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(C,{className:"h-5 w-5 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Priority Support"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Get faster help when needed"})]})]}),i.user_role==="host"&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(C,{className:"h-5 w-5 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Host Privileges"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"List cars and start earning"})]})]})]})]})})]}),e.jsx(as,{userRole:x}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs($,{children:[e.jsx(xe,{className:"h-4 w-4"}),e.jsxs(z,{children:[e.jsx("strong",{children:"Email Confirmation:"})," A verification certificate has been sent to your email address. Keep this for your records."]})]}),e.jsxs($,{children:[e.jsx(X,{className:"h-4 w-4"}),e.jsxs(z,{children:[e.jsx("strong",{children:"Security Notice:"})," Your verification is valid indefinitely. Contact support if you need to update any verified information."]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-6",children:[e.jsxs(b,{onClick:d,variant:"outline",className:"flex items-center space-x-2 flex-1",children:[e.jsx(Me,{className:"h-4 w-4"}),e.jsx("span",{children:"Download Certificate"})]}),e.jsxs(b,{onClick:s,className:"flex items-center space-x-2 flex-1 bg-green-600 hover:bg-green-700",children:[e.jsx("span",{children:i.user_role==="host"?"Go to Dashboard":"Start Using MobiRides"}),e.jsx(H,{className:"h-4 w-4"})]})]}),!1]})},J={[S.PERSONAL_INFO]:{title:"Personal Information",description:"Provide your basic details",icon:te,component:ze},[S.DOCUMENT_UPLOAD]:{title:"Document Upload",description:"Upload required documents",icon:de,component:qe},[S.SELFIE_VERIFICATION]:{title:"Selfie Verification",description:"Take a verification selfie",icon:W,component:Ze},[S.PHONE_VERIFICATION]:{title:"Phone Verification",description:"Verify your phone number",icon:Q,component:Ke},[S.ADDRESS_CONFIRMATION]:{title:"Address Confirmation",description:"Confirm your address",icon:me,component:Qe},[S.REVIEW_SUBMIT]:{title:"Review & Submit",description:"Review and submit verification",icon:C,component:es},[S.PROCESSING_STATUS]:{title:"Processing",description:"Verification in progress",icon:G,component:ts},[S.COMPLETION]:{title:"Completed",description:"Verification complete",icon:X,component:is}},ns=({currentStep:i,stepStatuses:r,onStepClick:s,canNavigateToStep:d})=>{const x=Object.values(S);return e.jsxs("div",{className:"w-full mb-8",children:[e.jsxs("div",{className:"sm:hidden",children:[e.jsx("div",{className:"flex items-center gap-6 overflow-x-auto pb-4 mb-4 scrollbar-hide",children:e.jsx("div",{className:"flex items-center gap-6 min-w-max px-4",children:x.map((n,l)=>{const p=J[n],N=p.icon,v=r[n],h=n===i,f=v===E.COMPLETED,c=d(n);let g="bg-gray-700",y="text-gray-300",o="",t="bg-white",a="text-gray-700";return f?(g="bg-green-500 hover:bg-green-600",y="text-white",t="bg-white",a="text-green-700"):h&&(g="bg-blue-600",y="text-white",o="ring-2 ring-blue-400 ring-offset-2",t="bg-white",a="text-blue-700"),e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex flex-col items-center relative",children:[e.jsxs("div",{className:"relative",children:[e.jsx(b,{variant:"outline",size:"icon",className:`
                          h-12 w-12 rounded-full mb-2
                          ${g} ${y} ${o}
                          ${!c&&!h&&!f?"opacity-50 cursor-not-allowed":""}
                        `,onClick:()=>c&&s(n),disabled:!c&&!h&&!f,children:f?e.jsx(C,{className:"h-6 w-6 text-white"}):e.jsx(N,{className:`h-6 w-6 ${y}`})}),e.jsx(D,{variant:"secondary",className:`absolute -top-1 -right-1 h-5 w-5 p-0 text-xs ${t} ${a} border border-gray-200`,children:l+1})]}),e.jsx("div",{className:"text-center max-w-[80px]",children:e.jsx("p",{className:`text-xs font-medium ${h?"text-blue-600":f?"text-green-600":"text-gray-400"}`,children:p.title})})]}),l<x.length-1&&e.jsx("div",{className:`
                      w-8 h-0.5 mx-2 mb-8
                      ${f?"bg-green-500":h?"bg-blue-600":"bg-gray-700"}
                    `})]},n)})})}),e.jsx("div",{className:"flex justify-center mb-2",children:e.jsx("div",{className:"flex space-x-1",children:Array.from({length:Math.ceil(x.length/3)}).map((n,l)=>e.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-300"},l))})})]}),e.jsx("div",{className:"hidden sm:flex items-center justify-between mb-4",children:x.map((n,l)=>{const p=J[n],N=p.icon,v=r[n],h=n===i,f=v===E.COMPLETED,c=d(n);let g="bg-gray-700",y="text-gray-300",o="",t="bg-white",a="text-gray-700";return f?(g="bg-green-500 hover:bg-green-600",y="text-white",t="bg-white",a="text-green-700"):h&&(g="bg-blue-600",y="text-white",o="ring-2 ring-blue-400 ring-offset-2",t="bg-white",a="text-blue-700"),e.jsxs("div",{className:"contents",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("div",{className:"relative",children:[e.jsx(b,{variant:"outline",size:"icon",className:`
                      h-12 w-12 rounded-full mb-2
                      ${g} ${y} ${o}
                      ${!c&&!h&&!f?"opacity-50 cursor-not-allowed":""}
                    `,onClick:()=>c&&s(n),disabled:!c&&!h&&!f,children:f?e.jsx(C,{className:"h-6 w-6 text-white"}):e.jsx(N,{className:`h-6 w-6 ${y}`})}),e.jsx(D,{variant:"secondary",className:`absolute -top-1 -right-1 h-5 w-5 p-0 text-xs ${t} ${a} border border-gray-200`,children:l+1})]}),e.jsxs("div",{className:"text-center max-w-[80px]",children:[e.jsx("p",{className:`text-xs font-medium ${h?"text-blue-600":f?"text-green-600":"text-gray-400"}`,children:p.title}),e.jsx("p",{className:"text-xs text-muted-foreground hidden sm:block",children:p.description})]})]}),l<x.length-1&&e.jsx("div",{className:`
                  flex-1 h-0.5 mx-2 mb-8
                  ${f?"bg-green-500":h?"bg-blue-600":"bg-gray-700"}
                `})]},n)})})]})},ls=()=>{const{user:i}=ee(),r=se(),{verificationData:s,isLoading:d,error:x,isInitialized:n,initializeVerification:l,navigateToStep:p,canNavigateToStep:N,getStepProgress:v,resetVerification:h}=U(),[f,c]=m.useState(!1),[g,y]=m.useState(!1);m.useEffect(()=>{if(!(i!=null&&i.id)){console.log("[VerificationHub] No user ID available");return}if(n||d||s)return;(async()=>{var M;try{const L=((M=i.user_metadata)==null?void 0:M.role)||"renter";console.log("[VerificationHub] Initializing verification for user:",i.id,"Role:",L),await l(i.id,L)}catch(L){console.error("[VerificationHub] Failed to initialize verification:",L),j.error("Failed to initialize verification process")}})()},[i==null?void 0:i.id,n,d,s]),Y.useEffect(()=>{s&&s.overall_status==="completed"&&s.current_step!=="completion"&&p(S.COMPLETION)},[s==null?void 0:s.overall_status,s==null?void 0:s.current_step,p]);const o=V=>{if(!N(V)){j.error("Please complete the previous steps first");return}p(V)},t=()=>{if(!s)return;const V=Object.values(S),M=V.indexOf(s.current_step);if(M<V.length-1){const L=V[M+1];o(L)}},a=()=>{if(!s)return;const V=Object.values(S),M=V.indexOf(s.current_step);if(M>0){const L=V[M-1];p(L)}},u=()=>{j.info("Verification canceled. You can resume anytime from your profile."),r("/")},w=()=>{r("/")},T=()=>{if(!s)return null;const V=J[s.current_step].component;return e.jsx(V,{onNext:t,onPrevious:a})};if(x)return e.jsx("div",{className:"min-h-screen p-4 flex items-center justify-center",style:{backgroundColor:"#020817"},children:e.jsxs(P,{className:"w-full max-w-md",children:[e.jsxs(A,{className:"text-center",children:[e.jsx(I,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx(_,{className:"text-red-600",children:"Verification Error"})]}),e.jsxs(k,{className:"text-center space-y-4",children:[e.jsx("p",{className:"text-muted-foreground",children:x}),e.jsx(b,{onClick:()=>window.location.reload(),children:"Try Again"})]})]})});if(d||!s)return e.jsx("div",{className:"min-h-screen p-4 flex items-center justify-center",style:{backgroundColor:"#020817"},children:e.jsx(P,{className:"w-full max-w-md",children:e.jsxs(k,{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Initializing verification..."})]})})});const O=v(),B=J[s==null?void 0:s.current_step];return e.jsx("div",{className:"min-h-screen p-4",style:{backgroundColor:"#020817"},children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-6 p-4 bg-white/10 rounded-lg border border-white/20",children:[e.jsxs(b,{variant:"outline",onClick:w,className:"flex items-center gap-2 bg-white/90 hover:bg-white text-gray-900",children:[e.jsx(Be,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Back to Home"}),e.jsx("span",{className:"sm:hidden",children:"Home"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-white/80 text-sm",children:[e.jsx(X,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Secure verification process"}),e.jsx("span",{className:"sm:hidden",children:"Secure process"})]}),e.jsxs(Pe,{open:g,onOpenChange:y,children:[e.jsx(ke,{asChild:!0,children:e.jsxs(b,{variant:"outline",className:"flex items-center gap-2 bg-white/90 hover:bg-white text-gray-900 border-red-200 hover:border-red-300",children:[e.jsx(ye,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Cancel Verification"}),e.jsx("span",{className:"sm:hidden",children:"Cancel"})]})}),e.jsxs(Te,{children:[e.jsxs(Ee,{children:[e.jsx(Re,{children:"Cancel Verification?"}),e.jsx(Fe,{children:"Are you sure you want to cancel the verification process? Your progress will be saved and you can resume later from your profile."})]}),e.jsxs(Ae,{children:[e.jsx(_e,{children:"Continue Verification"}),e.jsx(Ie,{onClick:u,children:"Yes, Cancel"})]})]})]})]}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Identity Verification"}),e.jsx("p",{className:"text-lg text-muted-foreground mb-4",children:"Complete your verification to start using MobiRides"}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Overall Progress"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[O.completed," of ",O.total," steps"]})]}),e.jsx(oe,{value:O.percentage,className:"h-2"})]})]}),e.jsx(ns,{currentStep:s==null?void 0:s.current_step,stepStatuses:{[S.PERSONAL_INFO]:s!=null&&s.personal_info_completed?E.COMPLETED:E.NOT_STARTED,[S.DOCUMENT_UPLOAD]:s!=null&&s.documents_completed?E.COMPLETED:E.NOT_STARTED,[S.SELFIE_VERIFICATION]:s!=null&&s.selfie_completed?E.COMPLETED:E.NOT_STARTED,[S.PHONE_VERIFICATION]:s!=null&&s.phone_verified?E.COMPLETED:E.NOT_STARTED,[S.ADDRESS_CONFIRMATION]:s!=null&&s.address_confirmed?E.COMPLETED:E.NOT_STARTED,[S.REVIEW_SUBMIT]:E.NOT_STARTED,[S.PROCESSING_STATUS]:E.NOT_STARTED,[S.COMPLETION]:E.NOT_STARTED},onStepClick:o,canNavigateToStep:N}),e.jsxs(P,{className:"mb-8",children:[e.jsx(A,{children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(B.icon,{className:"h-6 w-6 text-primary"}),e.jsxs("div",{children:[e.jsx(_,{children:B.title}),e.jsx("p",{className:"text-muted-foreground",children:B.description})]})]})}),e.jsx(k,{children:T()})]}),!1]})})};class cs extends m.Component{constructor(){super(...arguments);re(this,"state",{hasError:!1})}static getDerivedStateFromError(s){return{hasError:!0,error:s}}componentDidCatch(s,d){console.error("Verification error boundary caught an error:",s,d)}render(){var s;return this.state.hasError?e.jsx("div",{className:"container mx-auto px-4 py-8 max-w-2xl",children:e.jsxs(P,{className:"border-destructive",children:[e.jsxs(A,{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(we,{className:"h-12 w-12 text-destructive"})}),e.jsx(_,{className:"text-destructive",children:"Verification Error"}),e.jsx(Se,{children:"Something went wrong during the verification process. This has been logged and our team will investigate."})]}),e.jsxs(k,{className:"space-y-4",children:[e.jsx("div",{className:"bg-muted p-4 rounded-lg",children:e.jsx("p",{className:"text-sm font-mono text-muted-foreground",children:((s=this.state.error)==null?void 0:s.message)||"An unexpected error occurred"})}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsxs(b,{onClick:()=>this.setState({hasError:!1}),variant:"outline",children:[e.jsx(le,{className:"h-4 w-4 mr-2"}),"Try Again"]}),e.jsx(b,{onClick:()=>window.location.href="/dashboard",variant:"default",children:"Return to Dashboard"})]})]})]})}):this.props.children}}const Bs=()=>e.jsx(cs,{children:e.jsx(Ce,{children:e.jsx(ls,{})})});export{Bs as default};
