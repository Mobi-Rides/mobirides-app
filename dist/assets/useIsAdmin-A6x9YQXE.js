import{r as t}from"./react-vendor-mnpoGfEl.js";import{a9 as p,s as d}from"./index-D9LOOiBY.js";const _=()=>{const{user:n,isAuthenticated:u}=p(),[f,s]=t.useState(!1),[c,e]=t.useState(!1),[m,i]=t.useState(!0),[A,a]=t.useState(null);return t.useEffect(()=>{(async()=>{if(!u||!n){s(!1),e(!1),a(null),i(!1);return}try{const{data:r,error:o}=await d.rpc("is_admin",{user_uuid:n.id});if(o){console.error("Error checking admin status:",o),s(!1),e(!1),a(null),i(!1);return}if(r){const{data:l}=await d.from("admins").select("id, is_super_admin").eq("id",n.id).maybeSingle();l?(s(!0),e(l.is_super_admin||!1),a(l)):(s(!1),e(!1),a(null))}else s(!1),e(!1),a(null)}catch(r){console.error("Error checking admin status:",r),s(!1),e(!1),a(null)}finally{i(!1)}})()},[n,u]),{isAdmin:f,isSuperAdmin:c,isLoading:m,adminInfo:A}};export{_ as u};
