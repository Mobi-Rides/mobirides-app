import{j as e,u as g}from"./query-vendor-C7aRRP05.js";import{U as h,T as v,s as r}from"./index-CfXH57CA.js";import{C as d,a as u,d as m,b as j}from"./card-CZf4UH4z.js";import{S as o}from"./skeleton-CMwq_CyE.js";import{u as C}from"./react-vendor-mnpoGfEl.js";import{C as N}from"./car-LgBAYQxH.js";import{C as x}from"./credit-card-C3Wl-UQ1.js";const k=()=>g({queryKey:["admin-stats"],queryFn:async()=>{var a;const[s,n,l,t,c]=await Promise.all([r.from("profiles").select("id",{count:"exact",head:!0}),r.from("cars").select("id",{count:"exact",head:!0}),r.from("bookings").select("id",{count:"exact",head:!0}),r.from("user_verifications").select("id",{count:"exact",head:!0}).neq("overall_status","verified"),r.from("wallet_transactions").select("amount").eq("status","completed")]),i=((a=c.data)==null?void 0:a.reduce((f,p)=>f+Number(p.amount),0))||0;return{totalUsers:s.count||0,totalCars:n.count||0,totalBookings:l.count||0,pendingVerifications:t.count||0,totalRevenue:i}}}),q=()=>{const{data:s,isLoading:n,error:l}=k(),t=C();if(n)return e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[...Array(5)].map((i,a)=>e.jsxs(d,{children:[e.jsxs(u,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(o,{className:"h-4 w-20"}),e.jsx(o,{className:"h-4 w-4"})]}),e.jsxs(m,{children:[e.jsx(o,{className:"h-8 w-16 mb-1"}),e.jsx(o,{className:"h-3 w-24"})]})]},a))});if(l)return e.jsx(d,{children:e.jsx(m,{className:"p-6",children:e.jsx("p",{className:"text-destructive",children:"Failed to load admin statistics"})})});const c=[{title:"Total Users",value:(s==null?void 0:s.totalUsers)||0,icon:h,description:"Registered users",onClick:()=>t("/admin/users")},{title:"Total Cars",value:(s==null?void 0:s.totalCars)||0,icon:N,description:"Listed vehicles",onClick:()=>t("/admin/cars")},{title:"Total Bookings",value:(s==null?void 0:s.totalBookings)||0,icon:x,description:"All bookings",onClick:()=>t("/admin/bookings")},{title:"Pending Verifications",value:(s==null?void 0:s.pendingVerifications)||0,icon:v,description:"Awaiting review",onClick:()=>t("/admin/verifications")},{title:"Total Revenue",value:`P${((s==null?void 0:s.totalRevenue)||0).toFixed(2)}`,icon:x,description:"Platform revenue",onClick:()=>t("/admin/transactions")}];return e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:c.map((i,a)=>e.jsxs(d,{className:"cursor-pointer hover:shadow-md transition-shadow duration-200",onClick:i.onClick,children:[e.jsxs(u,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(j,{className:"text-sm font-medium",children:i.title}),e.jsx(i.icon,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(m,{children:[e.jsx("div",{className:"text-2xl font-bold hover:text-primary transition-colors",children:i.value}),e.jsx("p",{className:"text-xs text-muted-foreground",children:i.description})]})]},a))})};export{q as A};
