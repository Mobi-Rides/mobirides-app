import{r as i}from"./react-vendor-DmU5vXC9.js";import{O as l,as as d,aw as u}from"./index-ahmQo-Zq.js";const p=()=>{window.dispatchEvent(new CustomEvent("verification-completed"))},E=()=>{const{user:e}=l(),[r,a]=i.useState(null),[c,o]=i.useState(!1),[f,n]=i.useState(!1),s=async()=>{if(e!=null&&e.id)try{n(!0);const t=await d.loadVerificationData(e.id);t?(a(t),o(t.overall_status===u.COMPLETED)):(a(null),o(!1))}catch(t){console.error("Failed to check verification status:",t),a(null),o(!1)}finally{n(!1)}};return i.useEffect(()=>{s()},[e==null?void 0:e.id]),i.useEffect(()=>{const t=()=>{s()};return window.addEventListener("verification-completed",t),()=>{window.removeEventListener("verification-completed",t)}},[]),{verificationData:r,isVerified:c,isLoading:f,refetch:s}};export{p as t,E as u};
