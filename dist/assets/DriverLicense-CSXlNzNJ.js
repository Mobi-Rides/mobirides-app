import{k as w,E as _,r as x,j as e,I as c,B as d,b as u,s as E}from"./index-B1v-fdDy.js";import{u as S,F as k,a as t,b as o,c as n,d as l,e as i}from"./form-DmE3Qh0a.js";import{C as h}from"./calendar-Blx7UGIQ.js";import{P as j,a as p,b as f}from"./popover-4EB8yVS7.js";import{I as g}from"./ImageUpload-iLTkREmh.js";import{C as v}from"./calendar-D-otnCnk.js";import{f as b}from"./format-BOBWS5Wu.js";import"./addDays-Di48Ycau.js";import"./chevron-right-CgiltgM9.js";import"./camera-BVx23dB2.js";const G=()=>{const N=w(),{toast:m}=_(),[D,y]=x.useState(null),[L,I]=x.useState(null),a=S({defaultValues:{license_number:"",country_of_issue:"",phone_number:""}}),C=s=>{var r;(r=s.target.files)!=null&&r[0]&&y(s.target.files[0])},F=s=>{var r;(r=s.target.files)!=null&&r[0]&&I(s.target.files[0])},P=async s=>{try{const{data:{user:r}}=await E.auth.getUser();if(!r)throw new Error("No user found");m({title:"Success",description:"Driver's license information saved successfully"}),N("/")}catch(r){console.error("Error saving driver's license:",r),m({title:"Error",description:"Failed to save driver's license information",variant:"destructive"})}};return e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Driver License Information"}),e.jsx(k,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(P),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(t,{control:a.control,name:"license_number",render:({field:s})=>e.jsxs(o,{children:[e.jsx(n,{children:"License Number"}),e.jsx(l,{children:e.jsx(c,{...s,placeholder:"Enter license number"})}),e.jsx(i,{})]})}),e.jsx(t,{control:a.control,name:"country_of_issue",render:({field:s})=>e.jsxs(o,{children:[e.jsx(n,{children:"Country of Issue"}),e.jsx(l,{children:e.jsx(c,{...s,placeholder:"Enter country of issue"})}),e.jsx(i,{})]})}),e.jsx(t,{control:a.control,name:"phone_number",render:({field:s})=>e.jsxs(o,{children:[e.jsx(n,{children:"Phone Number"}),e.jsx(l,{children:e.jsx(c,{...s,placeholder:"Enter phone number",type:"tel"})}),e.jsx(i,{})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(t,{control:a.control,name:"expiry_date",render:({field:s})=>e.jsxs(o,{className:"flex flex-col",children:[e.jsx(n,{children:"Expiry Date"}),e.jsxs(j,{children:[e.jsx(p,{asChild:!0,children:e.jsx(l,{children:e.jsxs(d,{variant:"outline",className:u("w-full pl-3 text-left font-normal",!s.value&&"text-muted-foreground"),children:[s.value?b(s.value,"PPP"):e.jsx("span",{children:"Pick a date"}),e.jsx(v,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),e.jsx(f,{className:"w-auto p-0",align:"start",children:e.jsx(h,{mode:"single",selected:s.value,onSelect:s.onChange,disabled:r=>r<new Date,initialFocus:!0})})]}),e.jsx(i,{})]})}),e.jsx(t,{control:a.control,name:"date_of_birth",render:({field:s})=>e.jsxs(o,{className:"flex flex-col",children:[e.jsx(n,{children:"Date of Birth"}),e.jsxs(j,{children:[e.jsx(p,{asChild:!0,children:e.jsx(l,{children:e.jsxs(d,{variant:"outline",className:u("w-full pl-3 text-left font-normal",!s.value&&"text-muted-foreground"),children:[s.value?b(s.value,"PPP"):e.jsx("span",{children:"Pick a date"}),e.jsx(v,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),e.jsx(f,{className:"w-auto p-0",align:"start",children:e.jsx(h,{mode:"single",selected:s.value,onSelect:s.onChange,disabled:r=>r>new Date,initialFocus:!0})})]}),e.jsx(i,{})]})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(n,{children:"Front of License"}),e.jsx(g,{onImageChange:C})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Back of License"}),e.jsx(g,{onImageChange:F})]})]}),e.jsx(d,{type:"submit",className:"w-full",children:"Save License Information"})]})})]})};export{G as default};
