import{r as t,u as P,j as s,L as m,aA as x,I as h,B as i,aB as w,aC as f,s as g,J as n}from"./index-BAM2AQzj.js";const C=()=>{const[u,p]=t.useState(!1),[r,j]=t.useState(""),[d,y]=t.useState(""),[o,N]=t.useState(!1),[l,v]=t.useState(!1),c=P();t.useEffect(()=>{(async()=>{const{data:e}=await g.auth.getSession();e.session||(n.error("Invalid or expired reset link"),c("/login"))})()},[c]);const b=async a=>{if(a.preventDefault(),r!==d){n.error("Passwords do not match");return}try{p(!0);const{error:e}=await g.auth.updateUser({password:r});if(e)throw e;n.success("Password updated successfully"),c("/login")}catch(e){console.error("Error updating password:",e),n.error(e instanceof Error?e.message:"Failed to update password")}finally{p(!1)}};return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-md w-full space-y-8",children:[s.jsxs("div",{children:[s.jsx("img",{src:"/lovable-uploads/5f01f258-2bf0-42c9-a69a-83350aa11d7f.png",alt:"Mobirides Logo",className:"mx-auto h-48 w-48"}),s.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Reset your password"}),s.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Enter a new password for your account"})]}),s.jsxs("form",{onSubmit:b,className:"mt-8 space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(m,{htmlFor:"password",children:"New Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(x,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),s.jsx(h,{id:"password",type:o?"text":"password",placeholder:"Enter new password",value:r,onChange:a=>j(a.target.value),className:"pl-10 pr-10",required:!0}),s.jsxs(i,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full px-3 py-2 text-muted-foreground hover:text-foreground",onClick:()=>N(!o),children:[o?s.jsx(w,{className:"h-4 w-4"}):s.jsx(f,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:o?"Hide password":"Show password"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(m,{htmlFor:"confirmPassword",children:"Confirm New Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(x,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),s.jsx(h,{id:"confirmPassword",type:l?"text":"password",placeholder:"Confirm new password",value:d,onChange:a=>y(a.target.value),className:"pl-10 pr-10",required:!0}),s.jsxs(i,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full px-3 py-2 text-muted-foreground hover:text-foreground",onClick:()=>v(!l),children:[l?s.jsx(w,{className:"h-4 w-4"}):s.jsx(f,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:l?"Hide password":"Show password"})]})]})]})]}),s.jsx(i,{type:"submit",className:"w-full",disabled:u||!r||!d,children:u?"Updating...":"Reset Password"})]})]})})};export{C as default};
