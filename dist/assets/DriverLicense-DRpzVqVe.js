import{j as e}from"./query-vendor-BOSMW7hd.js";import{u as w,r as x}from"./react-vendor-DmU5vXC9.js";import{u as _}from"./form-vendor-DFDJoFvF.js";import{C as u}from"./calendar-D_cFmEe6.js";import{l as E,I as c,B as m,_ as h,s as S}from"./index-ahmQo-Zq.js";import{F as D,a as o,b as t,c as n,d as l,e as i}from"./form-CaxEeZ4p.js";import{P as j,a as p,b as f}from"./popover-D6QS4X_r.js";import{I as g}from"./ImageUpload-BCsrutM3.js";import{C as v}from"./calendar-CpXOYIBo.js";import{a as b}from"./date-vendor-Dhms5dOu.js";import"./chevron-left-Dh8Ads5x.js";import"./supabase-vendor-B3A6ooRR.js";import"./mapbox-vendor-ueN8uhVJ.js";import"./camera-D85mMN_S.js";const O=()=>{const N=w(),{toast:d}=E(),[L,y]=x.useState(null),[k,I]=x.useState(null),a=_({defaultValues:{license_number:"",country_of_issue:"",phone_number:""}}),C=s=>{var r;(r=s.target.files)!=null&&r[0]&&y(s.target.files[0])},F=s=>{var r;(r=s.target.files)!=null&&r[0]&&I(s.target.files[0])},P=async s=>{try{const{data:{user:r}}=await S.auth.getUser();if(!r)throw new Error("No user found");d({title:"Success",description:"Driver's license information saved successfully"}),N("/")}catch(r){console.error("Error saving driver's license:",r),d({title:"Error",description:"Failed to save driver's license information",variant:"destructive"})}};return e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Driver License Information"}),e.jsx(D,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(P),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(o,{control:a.control,name:"license_number",render:({field:s})=>e.jsxs(t,{children:[e.jsx(n,{children:"License Number"}),e.jsx(l,{children:e.jsx(c,{...s,placeholder:"Enter license number"})}),e.jsx(i,{})]})}),e.jsx(o,{control:a.control,name:"country_of_issue",render:({field:s})=>e.jsxs(t,{children:[e.jsx(n,{children:"Country of Issue"}),e.jsx(l,{children:e.jsx(c,{...s,placeholder:"Enter country of issue"})}),e.jsx(i,{})]})}),e.jsx(o,{control:a.control,name:"phone_number",render:({field:s})=>e.jsxs(t,{children:[e.jsx(n,{children:"Phone Number"}),e.jsx(l,{children:e.jsx(c,{...s,placeholder:"Enter phone number",type:"tel"})}),e.jsx(i,{})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(o,{control:a.control,name:"expiry_date",render:({field:s})=>e.jsxs(t,{className:"flex flex-col",children:[e.jsx(n,{children:"Expiry Date"}),e.jsxs(j,{children:[e.jsx(p,{asChild:!0,children:e.jsx(l,{children:e.jsxs(m,{variant:"outline",className:h("w-full pl-3 text-left font-normal",!s.value&&"text-muted-foreground"),children:[s.value?b(s.value,"PPP"):e.jsx("span",{children:"Pick a date"}),e.jsx(v,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),e.jsx(f,{className:"w-auto p-0",align:"start",children:e.jsx(u,{mode:"single",selected:s.value,onSelect:s.onChange,disabled:r=>r<new Date,initialFocus:!0})})]}),e.jsx(i,{})]})}),e.jsx(o,{control:a.control,name:"date_of_birth",render:({field:s})=>e.jsxs(t,{className:"flex flex-col",children:[e.jsx(n,{children:"Date of Birth"}),e.jsxs(j,{children:[e.jsx(p,{asChild:!0,children:e.jsx(l,{children:e.jsxs(m,{variant:"outline",className:h("w-full pl-3 text-left font-normal",!s.value&&"text-muted-foreground"),children:[s.value?b(s.value,"PPP"):e.jsx("span",{children:"Pick a date"}),e.jsx(v,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),e.jsx(f,{className:"w-auto p-0",align:"start",children:e.jsx(u,{mode:"single",selected:s.value,onSelect:s.onChange,disabled:r=>r>new Date,initialFocus:!0})})]}),e.jsx(i,{})]})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(n,{children:"Front of License"}),e.jsx(g,{onImageChange:C})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Back of License"}),e.jsx(g,{onImageChange:F})]})]}),e.jsx(m,{type:"submit",className:"w-full",children:"Save License Information"})]})})]})};export{O as default};
