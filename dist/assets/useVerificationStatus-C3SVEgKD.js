import{r as i}from"./react-vendor-mnpoGfEl.js";import{a9 as l,aD as d,aH as u}from"./index-BG7cKZ7G.js";const p=()=>{window.dispatchEvent(new CustomEvent("verification-completed"))},E=()=>{const{user:e}=l(),[r,a]=i.useState(null),[c,o]=i.useState(!1),[f,s]=i.useState(!1),n=async()=>{if(e!=null&&e.id)try{s(!0);const t=await d.loadVerificationData(e.id);t?(a(t),o(t.overall_status===u.COMPLETED)):(a(null),o(!1))}catch(t){console.error("Failed to check verification status:",t),a(null),o(!1)}finally{s(!1)}};return i.useEffect(()=>{n()},[e==null?void 0:e.id]),i.useEffect(()=>{const t=()=>{n()};return window.addEventListener("verification-completed",t),()=>{window.removeEventListener("verification-completed",t)}},[]),{verificationData:r,isVerified:c,isLoading:f,refetch:n}};export{p as t,E as u};
