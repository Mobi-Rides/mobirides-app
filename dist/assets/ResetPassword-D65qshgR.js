import{j as s}from"./query-vendor-Bsfdn-Hb.js";import{r as t,u as P}from"./react-vendor-mnpoGfEl.js";import{c as S,f as u,I as h,B as i,ao as w,ak as x,s as f,J as l}from"./index-CEKMvnhM.js";import"./supabase-vendor-BOn0LdFJ.js";import"./mapbox-vendor-fnXFVHMy.js";import"./date-vendor-Dhms5dOu.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y=S("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),z=()=>{const[p,m]=t.useState(!1),[r,g]=t.useState(""),[d,j]=t.useState(""),[o,N]=t.useState(!1),[n,v]=t.useState(!1),c=P();t.useEffect(()=>{(async()=>{const{data:e}=await f.auth.getSession();e.session||(l.error("Invalid or expired reset link"),c("/login"))})()},[c]);const b=async a=>{if(a.preventDefault(),r!==d){l.error("Passwords do not match");return}try{m(!0);const{error:e}=await f.auth.updateUser({password:r});if(e)throw e;l.success("Password updated successfully"),c("/login")}catch(e){console.error("Error updating password:",e),l.error(e instanceof Error?e.message:"Failed to update password")}finally{m(!1)}};return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-md w-full space-y-8",children:[s.jsxs("div",{children:[s.jsx("img",{src:"/lovable-uploads/a065be26-80b7-4e50-b683-b6afb0add925.png",alt:"Mobirides Logo",className:"mx-auto h-48 w-48"}),s.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Reset your password"}),s.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Enter a new password for your account"})]}),s.jsxs("form",{onSubmit:b,className:"mt-8 space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(u,{htmlFor:"password",children:"New Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(y,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),s.jsx(h,{id:"password",type:o?"text":"password",placeholder:"Enter new password",value:r,onChange:a=>g(a.target.value),className:"pl-10 pr-10",required:!0}),s.jsxs(i,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full px-3 py-2 text-muted-foreground hover:text-foreground",onClick:()=>N(!o),children:[o?s.jsx(w,{className:"h-4 w-4"}):s.jsx(x,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:o?"Hide password":"Show password"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(u,{htmlFor:"confirmPassword",children:"Confirm New Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(y,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),s.jsx(h,{id:"confirmPassword",type:n?"text":"password",placeholder:"Confirm new password",value:d,onChange:a=>j(a.target.value),className:"pl-10 pr-10",required:!0}),s.jsxs(i,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full px-3 py-2 text-muted-foreground hover:text-foreground",onClick:()=>v(!n),children:[n?s.jsx(w,{className:"h-4 w-4"}):s.jsx(x,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:n?"Hide password":"Show password"})]})]})]})]}),s.jsx(i,{type:"submit",className:"w-full",disabled:p||!r||!d,children:p?"Updating...":"Reset Password"})]})]})})};export{z as default};
